# 📄 App.tsx 상세 설명

버전: v1.0.4 - [Gemini CLI] 한글 입력(IME) 중복 전송 최종 해결 및 사이드바 명령어 실행 기능 추가

## 📂 파일 정보
- **파일명**: App.tsx
- **경로**: `.ai_monitor/vibe-view/src/App.tsx`
- **역할**: 바이브 코딩(Vibe Coding)의 메인 프론트엔드 컴포넌트로, 터미널, 파일 탐색기, 메시지 채널 등 모든 UI 요소를 관리합니다.

## 🛠 주요 기능 및 로직

### 1. 터미널 입력 처리 (IME 대응 및 줄바꿈 최적화)
- **한글 입력 최적화 (v1.0.4)**: 한글 조합(`isComposing`) 중 엔터 키 입력 시 발생하는 중복 전송 및 불필요한 줄바꿈 문제를 완전히 해결했습니다. `useRef`를 통해 `isComposingRef` 상태를 관리하고, `onCompositionStart/End` 이벤트를 사용하여 한글 조합 중에는 엔터 키 입력을 무시하고 글자 확정에만 집중하도록 UX를 개선했습니다.
- **메시지 채널 동기화**: 사이드바의 메시지 채널 입력창에도 동일한 `isComposing` 방어 로직을 적용하여 한글 메시지 전송 시의 안정성을 확보했습니다.
- **문자열 정리 (Trim)**: `handleSend`와 `sendMessage` 함수에서 전송 전 텍스트 끝의 줄바꿈 문자(`\n`, `\r`)를 자동으로 제거하여, 터미널이나 채팅창에 불필요한 공백 라인이 생기지 않도록 개선했습니다.
- **개행 문자 처리**: 윈도우 환경(cmd.exe)과의 호환성을 위해 전송 문자열 끝에 명시적으로 `\r\n` (CRLF)을 추가합니다.
- **단축키**: `Enter`는 전송, `Shift + Enter`는 줄바꿈으로 동작합니다.

### 2. 에이전트 협업 시스템
- **메시지 채널 (사이드바)**: 에이전트 간 소통뿐만 아니라, 사용자가 `>` 접두사를 사용하여 터미널 명령어를 직접 실행할 수 있는 기능을 추가했습니다. (예: `>ls -al`)
- **태스크 보드**: 현재 진행 중인 작업들의 상태를 관리하고 시각화합니다.

## 🔄 최근 변경 사항 (2026-02-24) — 한글 입력 및 사이드바 명령어 개선

- **한글 입력(IME) 안정화**: `isComposingRef` 도입으로 글자 확정 엔터와 전송 엔터를 완벽하게 분리.
- **사이드바 명령어 실행**: 메시지 입력창에서 `>`로 시작하는 내용을 입력하면 모든 활성 터미널에 명령어가 전송되도록 백엔드와 연동.
- **UI 힌트 추가**: 입력창 placeholder에 `>명령어: 터미널 실행` 안내 문구 추가.
