(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();function Mb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pv={exports:{}},yc={},Mv={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ua=Symbol.for("react.element"),jb=Symbol.for("react.portal"),Db=Symbol.for("react.fragment"),Lb=Symbol.for("react.strict_mode"),Rb=Symbol.for("react.profiler"),Ab=Symbol.for("react.provider"),Bb=Symbol.for("react.context"),Ob=Symbol.for("react.forward_ref"),Ib=Symbol.for("react.suspense"),$b=Symbol.for("react.memo"),zb=Symbol.for("react.lazy"),Zm=Symbol.iterator;function Fb(e){return e===null||typeof e!="object"?null:(e=Zm&&e[Zm]||e["@@iterator"],typeof e=="function"?e:null)}var jv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dv=Object.assign,Lv={};function Pn(e,t,i){this.props=e,this.context=t,this.refs=Lv,this.updater=i||jv}Pn.prototype.isReactComponent={};Pn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rv(){}Rv.prototype=Pn.prototype;function Sf(e,t,i){this.props=e,this.context=t,this.refs=Lv,this.updater=i||jv}var bf=Sf.prototype=new Rv;bf.constructor=Sf;Dv(bf,Pn.prototype);bf.isPureReactComponent=!0;var Jm=Array.isArray,Av=Object.prototype.hasOwnProperty,Cf={current:null},Bv={key:!0,ref:!0,__self:!0,__source:!0};function Ov(e,t,i){var s,r={},n=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(n=""+t.key),t)Av.call(t,s)&&!Bv.hasOwnProperty(s)&&(r[s]=t[s]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(s in a=e.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:ua,type:e,key:n,ref:o,props:r,_owner:Cf.current}}function Hb(e,t){return{$$typeof:ua,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kf(e){return typeof e=="object"&&e!==null&&e.$$typeof===ua}function Vb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Qm=/\/+/g;function fh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vb(""+e.key):t.toString(36)}function al(e,t,i,s,r){var n=typeof e;(n==="undefined"||n==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(n){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ua:case jb:o=!0}}if(o)return o=e,r=r(o),e=s===""?"."+fh(o,0):s,Jm(r)?(i="",e!=null&&(i=e.replace(Qm,"$&/")+"/"),al(r,t,i,"",function(c){return c})):r!=null&&(kf(r)&&(r=Hb(r,i+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Qm,"$&/")+"/")+e)),t.push(r)),1;if(o=0,s=s===""?".":s+":",Jm(e))for(var a=0;a<e.length;a++){n=e[a];var l=s+fh(n,a);o+=al(n,t,i,l,r)}else if(l=Fb(e),typeof l=="function")for(e=l.call(e),a=0;!(n=e.next()).done;)n=n.value,l=s+fh(n,a++),o+=al(n,t,i,l,r);else if(n==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ra(e,t,i){if(e==null)return e;var s=[],r=0;return al(e,s,"","",function(n){return t.call(i,n,r++)}),s}function Wb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},ll={transition:null},Ub={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:ll,ReactCurrentOwner:Cf};function Iv(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Ra,forEach:function(e,t,i){Ra(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ra(e,function(){t++}),t},toArray:function(e){return Ra(e,function(t){return t})||[]},only:function(e){if(!kf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=Pn;de.Fragment=Db;de.Profiler=Rb;de.PureComponent=Sf;de.StrictMode=Lb;de.Suspense=Ib;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ub;de.act=Iv;de.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Dv({},e.props),r=e.key,n=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(n=t.ref,o=Cf.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Av.call(t,l)&&!Bv.hasOwnProperty(l)&&(s[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)s.children=i;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:ua,type:e.type,key:r,ref:n,props:s,_owner:o}};de.createContext=function(e){return e={$$typeof:Bb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ab,_context:e},e.Consumer=e};de.createElement=Ov;de.createFactory=function(e){var t=Ov.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Ob,render:e}};de.isValidElement=kf;de.lazy=function(e){return{$$typeof:zb,_payload:{_status:-1,_result:e},_init:Wb}};de.memo=function(e,t){return{$$typeof:$b,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=ll.transition;ll.transition={};try{e()}finally{ll.transition=t}};de.unstable_act=Iv;de.useCallback=function(e,t){return At.current.useCallback(e,t)};de.useContext=function(e){return At.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return At.current.useDeferredValue(e)};de.useEffect=function(e,t){return At.current.useEffect(e,t)};de.useId=function(){return At.current.useId()};de.useImperativeHandle=function(e,t,i){return At.current.useImperativeHandle(e,t,i)};de.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return At.current.useMemo(e,t)};de.useReducer=function(e,t,i){return At.current.useReducer(e,t,i)};de.useRef=function(e){return At.current.useRef(e)};de.useState=function(e){return At.current.useState(e)};de.useSyncExternalStore=function(e,t,i){return At.current.useSyncExternalStore(e,t,i)};de.useTransition=function(){return At.current.useTransition()};de.version="18.3.1";Mv.exports=de;var S=Mv.exports;const pr=Mb(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb=S,qb=Symbol.for("react.element"),Yb=Symbol.for("react.fragment"),Gb=Object.prototype.hasOwnProperty,Xb=Kb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zb={key:!0,ref:!0,__self:!0,__source:!0};function $v(e,t,i){var s,r={},n=null,o=null;i!==void 0&&(n=""+i),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)Gb.call(t,s)&&!Zb.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:qb,type:e,key:n,ref:o,props:r,_owner:Xb.current}}yc.Fragment=Yb;yc.jsx=$v;yc.jsxs=$v;Pv.exports=yc;var h=Pv.exports,zv={exports:{}},ii={},Fv={exports:{}},Hv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,B){var U=E.length;E.push(B);e:for(;0<U;){var Q=U-1>>>1,oe=E[Q];if(0<r(oe,B))E[Q]=B,E[U]=oe,U=Q;else break e}}function i(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var B=E[0],U=E.pop();if(U!==B){E[0]=U;e:for(var Q=0,oe=E.length,je=oe>>>1;Q<je;){var xe=2*(Q+1)-1,Ye=E[xe],_e=xe+1,De=E[_e];if(0>r(Ye,U))_e<oe&&0>r(De,Ye)?(E[Q]=De,E[_e]=U,Q=_e):(E[Q]=Ye,E[xe]=U,Q=xe);else if(_e<oe&&0>r(De,U))E[Q]=De,E[_e]=U,Q=_e;else break e}}return B}function r(E,B){var U=E.sortIndex-B.sortIndex;return U!==0?U:E.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var n=performance;e.unstable_now=function(){return n.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,_=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(E){for(var B=i(c);B!==null;){if(B.callback===null)s(c);else if(B.startTime<=E)s(c),B.sortIndex=B.expirationTime,t(l,B);else break;B=i(c)}}function C(E){if(v=!1,x(E),!_)if(i(l)!==null)_=!0,V(k);else{var B=i(c);B!==null&&W(C,B.startTime-E)}}function k(E,B){_=!1,v&&(v=!1,g(P),P=-1),m=!0;var U=p;try{for(x(B),f=i(l);f!==null&&(!(f.expirationTime>B)||E&&!ee());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var oe=Q(f.expirationTime<=B);B=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===i(l)&&s(l),x(B)}else s(l);f=i(l)}if(f!==null)var je=!0;else{var xe=i(c);xe!==null&&W(C,xe.startTime-B),je=!1}return je}finally{f=null,p=U,m=!1}}var T=!1,L=null,P=-1,q=5,H=-1;function ee(){return!(e.unstable_now()-H<q)}function R(){if(L!==null){var E=e.unstable_now();H=E;var B=!0;try{B=L(!0,E)}finally{B?M():(T=!1,L=null)}}else T=!1}var M;if(typeof y=="function")M=function(){y(R)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,I=z.port2;z.port1.onmessage=R,M=function(){I.postMessage(null)}}else M=function(){b(R,0)};function V(E){L=E,T||(T=!0,M())}function W(E,B){P=b(function(){E(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){_||m||(_=!0,V(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(E){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var U=p;p=B;try{return E()}finally{p=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,B){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var U=p;p=E;try{return B()}finally{p=U}},e.unstable_scheduleCallback=function(E,B,U){var Q=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Q+U:Q):U=Q,E){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=U+oe,E={id:d++,callback:B,priorityLevel:E,startTime:U,expirationTime:oe,sortIndex:-1},U>Q?(E.sortIndex=U,t(c,E),i(l)===null&&E===i(c)&&(v?(g(P),P=-1):v=!0,W(C,U-Q))):(E.sortIndex=oe,t(l,E),_||m||(_=!0,V(k))),E},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(E){var B=p;return function(){var U=p;p=B;try{return E.apply(this,arguments)}finally{p=U}}}})(Hv);Fv.exports=Hv;var Jb=Fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb=S,ti=Jb;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vv=new Set,Io={};function Er(e,t){xn(e,t),xn(e+"Capture",t)}function xn(e,t){for(Io[e]=t,e=0;e<t.length;e++)Vv.add(t[e])}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=Object.prototype.hasOwnProperty,e2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eg={},tg={};function t2(e){return wu.call(tg,e)?!0:wu.call(eg,e)?!1:e2.test(e)?tg[e]=!0:(eg[e]=!0,!1)}function i2(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s2(e,t,i,s){if(t===null||typeof t>"u"||i2(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bt(e,t,i,s,r,n,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new Bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new Bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new Bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new Bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new Bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new Bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new Bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new Bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new Bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function Nf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ef,Nf);St[t]=new Bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ef,Nf);St[t]=new Bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ef,Nf);St[t]=new Bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new Bt(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new Bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tf(e,t,i,s){var r=St.hasOwnProperty(t)?St[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s2(t,i,r,s)&&(i=null),s||r===null?t2(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:"":i:(t=r.attributeName,s=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var ms=Qb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aa=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),Wv=Symbol.for("react.provider"),Uv=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),bu=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),jf=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),Kv=Symbol.for("react.offscreen"),ig=Symbol.iterator;function Xn(e){return e===null||typeof e!="object"?null:(e=ig&&e[ig]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,ph;function uo(e){if(ph===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ph=t&&t[1]||""}return`
`+ph+e}var mh=!1;function gh(e,t){if(!e||mh)return"";mh=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),n=s.stack.split(`
`),o=r.length-1,a=n.length-1;1<=o&&0<=a&&r[o]!==n[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==n[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==n[a]){var l=`
`+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{mh=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?uo(e):""}function r2(e){switch(e.tag){case 5:return uo(e.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return e=gh(e.type,!1),e;case 11:return e=gh(e.type.render,!1),e;case 1:return e=gh(e.type,!0),e;default:return""}}function ku(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case qr:return"Portal";case Su:return"Profiler";case Pf:return"StrictMode";case bu:return"Suspense";case Cu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uv:return(e.displayName||"Context")+".Consumer";case Wv:return(e._context.displayName||"Context")+".Provider";case Mf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jf:return t=e.displayName||null,t!==null?t:ku(e.type)||"Memo";case Ns:t=e._payload,e=e._init;try{return ku(e(t))}catch{}}return null}function n2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ku(t);case 8:return t===Pf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function o2(e){var t=qv(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,n=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,n.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ba(e){e._valueTracker||(e._valueTracker=o2(e))}function Yv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=qv(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Ll(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Eu(e,t){var i=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function sg(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=Us(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gv(e,t){t=t.checked,t!=null&&Tf(e,"checked",t,!1)}function Nu(e,t){Gv(e,t);var i=Us(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tu(e,t.type,i):t.hasOwnProperty("defaultValue")&&Tu(e,t.type,Us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rg(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Tu(e,t,i){(t!=="number"||Ll(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var fo=Array.isArray;function fn(e,t,i,s){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Us(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Pu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ng(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(A(92));if(fo(i)){if(1<i.length)throw Error(A(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Us(i)}}function Xv(e,t){var i=Us(t.value),s=Us(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function og(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oa,Jv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $o(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a2=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(e){a2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),So[t]=So[e]})});function Qv(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||So.hasOwnProperty(e)&&So[e]?(""+t).trim():t+"px"}function e1(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,r=Qv(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,r):e[i]=r}}var l2=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ju(e,t){if(t){if(l2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Du(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lu=null;function Df(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ru=null,pn=null,mn=null;function ag(e){if(e=pa(e)){if(typeof Ru!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Cc(t),Ru(e.stateNode,e.type,t))}}function t1(e){pn?mn?mn.push(e):mn=[e]:pn=e}function i1(){if(pn){var e=pn,t=mn;if(mn=pn=null,ag(e),t)for(e=0;e<t.length;e++)ag(t[e])}}function s1(e,t){return e(t)}function r1(){}var _h=!1;function n1(e,t,i){if(_h)return e(t,i);_h=!0;try{return s1(e,t,i)}finally{_h=!1,(pn!==null||mn!==null)&&(r1(),i1())}}function zo(e,t){var i=e.stateNode;if(i===null)return null;var s=Cc(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(A(231,t,typeof i));return i}var Au=!1;if(hs)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Au=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Au=!1}function c2(e,t,i,s,r,n,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(d){this.onError(d)}}var bo=!1,Rl=null,Al=!1,Bu=null,h2={onError:function(e){bo=!0,Rl=e}};function u2(e,t,i,s,r,n,o,a,l){bo=!1,Rl=null,c2.apply(h2,arguments)}function d2(e,t,i,s,r,n,o,a,l){if(u2.apply(this,arguments),bo){if(bo){var c=Rl;bo=!1,Rl=null}else throw Error(A(198));Al||(Al=!0,Bu=c)}}function Nr(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function o1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lg(e){if(Nr(e)!==e)throw Error(A(188))}function f2(e){var t=e.alternate;if(!t){if(t=Nr(e),t===null)throw Error(A(188));return t!==e?null:e}for(var i=e,s=t;;){var r=i.return;if(r===null)break;var n=r.alternate;if(n===null){if(s=r.return,s!==null){i=s;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===i)return lg(r),e;if(n===s)return lg(r),t;n=n.sibling}throw Error(A(188))}if(i.return!==s.return)i=r,s=n;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,s=n;break}if(a===s){o=!0,s=r,i=n;break}a=a.sibling}if(!o){for(a=n.child;a;){if(a===i){o=!0,i=n,s=r;break}if(a===s){o=!0,s=n,i=r;break}a=a.sibling}if(!o)throw Error(A(189))}}if(i.alternate!==s)throw Error(A(190))}if(i.tag!==3)throw Error(A(188));return i.stateNode.current===i?e:t}function a1(e){return e=f2(e),e!==null?l1(e):null}function l1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=l1(e);if(t!==null)return t;e=e.sibling}return null}var c1=ti.unstable_scheduleCallback,cg=ti.unstable_cancelCallback,p2=ti.unstable_shouldYield,m2=ti.unstable_requestPaint,qe=ti.unstable_now,g2=ti.unstable_getCurrentPriorityLevel,Lf=ti.unstable_ImmediatePriority,h1=ti.unstable_UserBlockingPriority,Bl=ti.unstable_NormalPriority,_2=ti.unstable_LowPriority,u1=ti.unstable_IdlePriority,xc=null,Yi=null;function v2(e){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(xc,e,void 0,(e.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:w2,y2=Math.log,x2=Math.LN2;function w2(e){return e>>>=0,e===0?32:31-(y2(e)/x2|0)|0}var Ia=64,$a=4194304;function po(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ol(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,r=e.suspendedLanes,n=e.pingedLanes,o=i&268435455;if(o!==0){var a=o&~r;a!==0?s=po(a):(n&=o,n!==0&&(s=po(n)))}else o=i&~r,o!==0?s=po(o):n!==0&&(s=po(n));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,n=t&-t,r>=n||r===16&&(n&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-ji(t),r=1<<i,s|=e[i],t&=~r;return s}function S2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b2(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,n=e.pendingLanes;0<n;){var o=31-ji(n),a=1<<o,l=r[o];l===-1?(!(a&i)||a&s)&&(r[o]=S2(a,t)):l<=t&&(e.expiredLanes|=a),n&=~a}}function Ou(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function d1(){var e=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),e}function vh(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function da(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ji(t),e[t]=i}function C2(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-ji(i),n=1<<r;t[r]=0,s[r]=-1,e[r]=-1,i&=~n}}function Rf(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-ji(i),r=1<<s;r&t|e[s]&t&&(e[s]|=t),i&=~r}}var ve=0;function f1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var p1,Af,m1,g1,_1,Iu=!1,za=[],Bs=null,Os=null,Is=null,Fo=new Map,Ho=new Map,Ms=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hg(e,t){switch(e){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(t.pointerId)}}function Jn(e,t,i,s,r,n){return e===null||e.nativeEvent!==n?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},t!==null&&(t=pa(t),t!==null&&Af(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function E2(e,t,i,s,r){switch(t){case"focusin":return Bs=Jn(Bs,e,t,i,s,r),!0;case"dragenter":return Os=Jn(Os,e,t,i,s,r),!0;case"mouseover":return Is=Jn(Is,e,t,i,s,r),!0;case"pointerover":var n=r.pointerId;return Fo.set(n,Jn(Fo.get(n)||null,e,t,i,s,r)),!0;case"gotpointercapture":return n=r.pointerId,Ho.set(n,Jn(Ho.get(n)||null,e,t,i,s,r)),!0}return!1}function v1(e){var t=or(e.target);if(t!==null){var i=Nr(t);if(i!==null){if(t=i.tag,t===13){if(t=o1(i),t!==null){e.blockedOn=t,_1(e.priority,function(){m1(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=$u(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Lu=s,i.target.dispatchEvent(s),Lu=null}else return t=pa(i),t!==null&&Af(t),e.blockedOn=i,!1;t.shift()}return!0}function ug(e,t,i){cl(e)&&i.delete(t)}function N2(){Iu=!1,Bs!==null&&cl(Bs)&&(Bs=null),Os!==null&&cl(Os)&&(Os=null),Is!==null&&cl(Is)&&(Is=null),Fo.forEach(ug),Ho.forEach(ug)}function Qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Iu||(Iu=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,N2)))}function Vo(e){function t(r){return Qn(r,e)}if(0<za.length){Qn(za[0],e);for(var i=1;i<za.length;i++){var s=za[i];s.blockedOn===e&&(s.blockedOn=null)}}for(Bs!==null&&Qn(Bs,e),Os!==null&&Qn(Os,e),Is!==null&&Qn(Is,e),Fo.forEach(t),Ho.forEach(t),i=0;i<Ms.length;i++)s=Ms[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ms.length&&(i=Ms[0],i.blockedOn===null);)v1(i),i.blockedOn===null&&Ms.shift()}var gn=ms.ReactCurrentBatchConfig,Il=!0;function T2(e,t,i,s){var r=ve,n=gn.transition;gn.transition=null;try{ve=1,Bf(e,t,i,s)}finally{ve=r,gn.transition=n}}function P2(e,t,i,s){var r=ve,n=gn.transition;gn.transition=null;try{ve=4,Bf(e,t,i,s)}finally{ve=r,gn.transition=n}}function Bf(e,t,i,s){if(Il){var r=$u(e,t,i,s);if(r===null)Th(e,t,s,$l,i),hg(e,s);else if(E2(r,e,t,i,s))s.stopPropagation();else if(hg(e,s),t&4&&-1<k2.indexOf(e)){for(;r!==null;){var n=pa(r);if(n!==null&&p1(n),n=$u(e,t,i,s),n===null&&Th(e,t,s,$l,i),n===r)break;r=n}r!==null&&s.stopPropagation()}else Th(e,t,s,null,i)}}var $l=null;function $u(e,t,i,s){if($l=null,e=Df(s),e=or(e),e!==null)if(t=Nr(e),t===null)e=null;else if(i=t.tag,i===13){if(e=o1(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $l=e,null}function y1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g2()){case Lf:return 1;case h1:return 4;case Bl:case _2:return 16;case u1:return 536870912;default:return 16}default:return 16}}var Ds=null,Of=null,hl=null;function x1(){if(hl)return hl;var e,t=Of,i=t.length,s,r="value"in Ds?Ds.value:Ds.textContent,n=r.length;for(e=0;e<i&&t[e]===r[e];e++);var o=i-e;for(s=1;s<=o&&t[i-s]===r[n-s];s++);return hl=r.slice(e,1<s?1-s:void 0)}function ul(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function dg(){return!1}function si(e){function t(i,s,r,n,o){this._reactName=i,this._targetInst=r,this.type=s,this.nativeEvent=n,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(n):n[a]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Fa:dg,this.isPropagationStopped=dg,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var Mn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},If=si(Mn),fa=Ie({},Mn,{view:0,detail:0}),M2=si(fa),yh,xh,eo,wc=Ie({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$f,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(yh=e.screenX-eo.screenX,xh=e.screenY-eo.screenY):xh=yh=0,eo=e),yh)},movementY:function(e){return"movementY"in e?e.movementY:xh}}),fg=si(wc),j2=Ie({},wc,{dataTransfer:0}),D2=si(j2),L2=Ie({},fa,{relatedTarget:0}),wh=si(L2),R2=Ie({},Mn,{animationName:0,elapsedTime:0,pseudoElement:0}),A2=si(R2),B2=Ie({},Mn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),O2=si(B2),I2=Ie({},Mn,{data:0}),pg=si(I2),$2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F2[e])?!!t[e]:!1}function $f(){return H2}var V2=Ie({},fa,{key:function(e){if(e.key){var t=$2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ul(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?z2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$f,charCode:function(e){return e.type==="keypress"?ul(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ul(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W2=si(V2),U2=Ie({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=si(U2),K2=Ie({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$f}),q2=si(K2),Y2=Ie({},Mn,{propertyName:0,elapsedTime:0,pseudoElement:0}),G2=si(Y2),X2=Ie({},wc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Z2=si(X2),J2=[9,13,27,32],zf=hs&&"CompositionEvent"in window,Co=null;hs&&"documentMode"in document&&(Co=document.documentMode);var Q2=hs&&"TextEvent"in window&&!Co,w1=hs&&(!zf||Co&&8<Co&&11>=Co),gg=" ",_g=!1;function S1(e,t){switch(e){case"keyup":return J2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function eC(e,t){switch(e){case"compositionend":return b1(t);case"keypress":return t.which!==32?null:(_g=!0,gg);case"textInput":return e=t.data,e===gg&&_g?null:e;default:return null}}function tC(e,t){if(Gr)return e==="compositionend"||!zf&&S1(e,t)?(e=x1(),hl=Of=Ds=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return w1&&t.locale!=="ko"?null:t.data;default:return null}}var iC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iC[e.type]:t==="textarea"}function C1(e,t,i,s){t1(s),t=zl(t,"onChange"),0<t.length&&(i=new If("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var ko=null,Wo=null;function sC(e){A1(e,0)}function Sc(e){var t=Jr(e);if(Yv(t))return e}function rC(e,t){if(e==="change")return t}var k1=!1;if(hs){var Sh;if(hs){var bh="oninput"in document;if(!bh){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),bh=typeof yg.oninput=="function"}Sh=bh}else Sh=!1;k1=Sh&&(!document.documentMode||9<document.documentMode)}function xg(){ko&&(ko.detachEvent("onpropertychange",E1),Wo=ko=null)}function E1(e){if(e.propertyName==="value"&&Sc(Wo)){var t=[];C1(t,Wo,e,Df(e)),n1(sC,t)}}function nC(e,t,i){e==="focusin"?(xg(),ko=t,Wo=i,ko.attachEvent("onpropertychange",E1)):e==="focusout"&&xg()}function oC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(Wo)}function aC(e,t){if(e==="click")return Sc(t)}function lC(e,t){if(e==="input"||e==="change")return Sc(t)}function cC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ai=typeof Object.is=="function"?Object.is:cC;function Uo(e,t){if(Ai(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!wu.call(t,r)||!Ai(e[r],t[r]))return!1}return!0}function wg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sg(e,t){var i=wg(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=wg(i)}}function N1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function T1(){for(var e=window,t=Ll();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ll(e.document)}return t}function Ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hC(e){var t=T1(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&N1(i.ownerDocument.documentElement,i)){if(s!==null&&Ff(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=i.textContent.length,n=Math.min(s.start,r);s=s.end===void 0?n:Math.min(s.end,r),!e.extend&&n>s&&(r=s,s=n,n=r),r=Sg(i,n);var o=Sg(i,s);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),n>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uC=hs&&"documentMode"in document&&11>=document.documentMode,Xr=null,zu=null,Eo=null,Fu=!1;function bg(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Fu||Xr==null||Xr!==Ll(s)||(s=Xr,"selectionStart"in s&&Ff(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Eo&&Uo(Eo,s)||(Eo=s,s=zl(zu,"onSelect"),0<s.length&&(t=new If("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Xr)))}function Ha(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Zr={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionend:Ha("Transition","TransitionEnd")},Ch={},P1={};hs&&(P1=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function bc(e){if(Ch[e])return Ch[e];if(!Zr[e])return e;var t=Zr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in P1)return Ch[e]=t[i];return e}var M1=bc("animationend"),j1=bc("animationiteration"),D1=bc("animationstart"),L1=bc("transitionend"),R1=new Map,Cg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(e,t){R1.set(e,t),Er(t,[e])}for(var kh=0;kh<Cg.length;kh++){var Eh=Cg[kh],dC=Eh.toLowerCase(),fC=Eh[0].toUpperCase()+Eh.slice(1);Ys(dC,"on"+fC)}Ys(M1,"onAnimationEnd");Ys(j1,"onAnimationIteration");Ys(D1,"onAnimationStart");Ys("dblclick","onDoubleClick");Ys("focusin","onFocus");Ys("focusout","onBlur");Ys(L1,"onTransitionEnd");xn("onMouseEnter",["mouseout","mouseover"]);xn("onMouseLeave",["mouseout","mouseover"]);xn("onPointerEnter",["pointerout","pointerover"]);xn("onPointerLeave",["pointerout","pointerover"]);Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Er("onBeforeInput",["compositionend","keypress","textInput","paste"]);Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pC=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function kg(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,d2(s,t,void 0,e),e.currentTarget=null}function A1(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],r=s.event;s=s.listeners;e:{var n=void 0;if(t)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&r.isPropagationStopped())break e;kg(r,a,c),n=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==n&&r.isPropagationStopped())break e;kg(r,a,c),n=l}}}if(Al)throw e=Bu,Al=!1,Bu=null,e}function ke(e,t){var i=t[Ku];i===void 0&&(i=t[Ku]=new Set);var s=e+"__bubble";i.has(s)||(B1(t,e,2,!1),i.add(s))}function Nh(e,t,i){var s=0;t&&(s|=4),B1(i,e,s,t)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Ko(e){if(!e[Va]){e[Va]=!0,Vv.forEach(function(i){i!=="selectionchange"&&(pC.has(i)||Nh(i,!1,e),Nh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Va]||(t[Va]=!0,Nh("selectionchange",!1,t))}}function B1(e,t,i,s){switch(y1(t)){case 1:var r=T2;break;case 4:r=P2;break;default:r=Bf}i=r.bind(null,t,i,e),r=void 0,!Au||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Th(e,t,i,s,r){var n=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=or(a),o===null)return;if(l=o.tag,l===5||l===6){s=n=o;continue e}a=a.parentNode}}s=s.return}n1(function(){var c=n,d=Df(i),f=[];e:{var p=R1.get(e);if(p!==void 0){var m=If,_=e;switch(e){case"keypress":if(ul(i)===0)break e;case"keydown":case"keyup":m=W2;break;case"focusin":_="focus",m=wh;break;case"focusout":_="blur",m=wh;break;case"beforeblur":case"afterblur":m=wh;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=q2;break;case M1:case j1:case D1:m=A2;break;case L1:m=G2;break;case"scroll":m=M2;break;case"wheel":m=Z2;break;case"copy":case"cut":case"paste":m=O2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mg}var v=(t&4)!==0,b=!v&&e==="scroll",g=v?p!==null?p+"Capture":null:p;v=[];for(var y=c,x;y!==null;){x=y;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,g!==null&&(C=zo(y,g),C!=null&&v.push(qo(y,C,x)))),b)break;y=y.return}0<v.length&&(p=new m(p,_,null,i,d),f.push({event:p,listeners:v}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&i!==Lu&&(_=i.relatedTarget||i.fromElement)&&(or(_)||_[us]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=i.relatedTarget||i.toElement,m=c,_=_?or(_):null,_!==null&&(b=Nr(_),_!==b||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=c),m!==_)){if(v=fg,C="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=mg,C="onPointerLeave",g="onPointerEnter",y="pointer"),b=m==null?p:Jr(m),x=_==null?p:Jr(_),p=new v(C,y+"leave",m,i,d),p.target=b,p.relatedTarget=x,C=null,or(d)===c&&(v=new v(g,y+"enter",_,i,d),v.target=x,v.relatedTarget=b,C=v),b=C,m&&_)t:{for(v=m,g=_,y=0,x=v;x;x=Fr(x))y++;for(x=0,C=g;C;C=Fr(C))x++;for(;0<y-x;)v=Fr(v),y--;for(;0<x-y;)g=Fr(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Fr(v),g=Fr(g)}v=null}else v=null;m!==null&&Eg(f,p,m,v,!1),_!==null&&b!==null&&Eg(f,b,_,v,!0)}}e:{if(p=c?Jr(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=rC;else if(vg(p))if(k1)k=lC;else{k=oC;var T=nC}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=aC);if(k&&(k=k(e,c))){C1(f,k,i,d);break e}T&&T(e,p,c),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Tu(p,"number",p.value)}switch(T=c?Jr(c):window,e){case"focusin":(vg(T)||T.contentEditable==="true")&&(Xr=T,zu=c,Eo=null);break;case"focusout":Eo=zu=Xr=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,bg(f,i,d);break;case"selectionchange":if(uC)break;case"keydown":case"keyup":bg(f,i,d)}var L;if(zf)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Gr?S1(e,i)&&(P="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(P="onCompositionStart");P&&(w1&&i.locale!=="ko"&&(Gr||P!=="onCompositionStart"?P==="onCompositionEnd"&&Gr&&(L=x1()):(Ds=d,Of="value"in Ds?Ds.value:Ds.textContent,Gr=!0)),T=zl(c,P),0<T.length&&(P=new pg(P,e,null,i,d),f.push({event:P,listeners:T}),L?P.data=L:(L=b1(i),L!==null&&(P.data=L)))),(L=Q2?eC(e,i):tC(e,i))&&(c=zl(c,"onBeforeInput"),0<c.length&&(d=new pg("onBeforeInput","beforeinput",null,i,d),f.push({event:d,listeners:c}),d.data=L))}A1(f,t)})}function qo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function zl(e,t){for(var i=t+"Capture",s=[];e!==null;){var r=e,n=r.stateNode;r.tag===5&&n!==null&&(r=n,n=zo(e,i),n!=null&&s.unshift(qo(e,n,r)),n=zo(e,t),n!=null&&s.push(qo(e,n,r))),e=e.return}return s}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Eg(e,t,i,s,r){for(var n=t._reactName,o=[];i!==null&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=zo(i,n),l!=null&&o.unshift(qo(i,l,a))):r||(l=zo(i,n),l!=null&&o.push(qo(i,l,a)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var mC=/\r\n?/g,gC=/\u0000|\uFFFD/g;function Ng(e){return(typeof e=="string"?e:""+e).replace(mC,`
`).replace(gC,"")}function Wa(e,t,i){if(t=Ng(t),Ng(e)!==t&&i)throw Error(A(425))}function Fl(){}var Hu=null,Vu=null;function Wu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,vC=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(e){return Tg.resolve(null).then(e).catch(yC)}:Uu;function yC(e){setTimeout(function(){throw e})}function Ph(e,t){var i=t,s=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(s===0){e.removeChild(r),Vo(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=r}while(i);Vo(t)}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var jn=Math.random().toString(36).slice(2),Ki="__reactFiber$"+jn,Yo="__reactProps$"+jn,us="__reactContainer$"+jn,Ku="__reactEvents$"+jn,xC="__reactListeners$"+jn,wC="__reactHandles$"+jn;function or(e){var t=e[Ki];if(t)return t;for(var i=e.parentNode;i;){if(t=i[us]||i[Ki]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Pg(e);e!==null;){if(i=e[Ki])return i;e=Pg(e)}return t}e=i,i=e.parentNode}return null}function pa(e){return e=e[Ki]||e[us],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Cc(e){return e[Yo]||null}var qu=[],Qr=-1;function Gs(e){return{current:e}}function Ne(e){0>Qr||(e.current=qu[Qr],qu[Qr]=null,Qr--)}function be(e,t){Qr++,qu[Qr]=e.current,e.current=t}var Ks={},Tt=Gs(Ks),Vt=Gs(!1),yr=Ks;function wn(e,t){var i=e.type.contextTypes;if(!i)return Ks;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},n;for(n in i)r[n]=t[n];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Wt(e){return e=e.childContextTypes,e!=null}function Hl(){Ne(Vt),Ne(Tt)}function Mg(e,t,i){if(Tt.current!==Ks)throw Error(A(168));be(Tt,t),be(Vt,i)}function O1(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(A(108,n2(e)||"Unknown",r));return Ie({},i,s)}function Vl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ks,yr=Tt.current,be(Tt,e),be(Vt,Vt.current),!0}function jg(e,t,i){var s=e.stateNode;if(!s)throw Error(A(169));i?(e=O1(e,t,yr),s.__reactInternalMemoizedMergedChildContext=e,Ne(Vt),Ne(Tt),be(Tt,e)):Ne(Vt),be(Vt,i)}var ns=null,kc=!1,Mh=!1;function I1(e){ns===null?ns=[e]:ns.push(e)}function SC(e){kc=!0,I1(e)}function Xs(){if(!Mh&&ns!==null){Mh=!0;var e=0,t=ve;try{var i=ns;for(ve=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}ns=null,kc=!1}catch(r){throw ns!==null&&(ns=ns.slice(e+1)),c1(Lf,Xs),r}finally{ve=t,Mh=!1}}return null}var en=[],tn=0,Wl=null,Ul=0,ui=[],di=0,xr=null,os=1,as="";function tr(e,t){en[tn++]=Ul,en[tn++]=Wl,Wl=e,Ul=t}function $1(e,t,i){ui[di++]=os,ui[di++]=as,ui[di++]=xr,xr=e;var s=os;e=as;var r=32-ji(s)-1;s&=~(1<<r),i+=1;var n=32-ji(t)+r;if(30<n){var o=r-r%5;n=(s&(1<<o)-1).toString(32),s>>=o,r-=o,os=1<<32-ji(t)+r|i<<r|s,as=n+e}else os=1<<n|i<<r|s,as=e}function Hf(e){e.return!==null&&(tr(e,1),$1(e,1,0))}function Vf(e){for(;e===Wl;)Wl=en[--tn],en[tn]=null,Ul=en[--tn],en[tn]=null;for(;e===xr;)xr=ui[--di],ui[di]=null,as=ui[--di],ui[di]=null,os=ui[--di],ui[di]=null}var ei=null,Qt=null,Pe=!1,Mi=null;function z1(e,t){var i=fi(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Dg(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ei=e,Qt=$s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ei=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=xr!==null?{id:os,overflow:as}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=fi(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,ei=e,Qt=null,!0):!1;default:return!1}}function Yu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gu(e){if(Pe){var t=Qt;if(t){var i=t;if(!Dg(e,t)){if(Yu(e))throw Error(A(418));t=$s(i.nextSibling);var s=ei;t&&Dg(e,t)?z1(s,i):(e.flags=e.flags&-4097|2,Pe=!1,ei=e)}}else{if(Yu(e))throw Error(A(418));e.flags=e.flags&-4097|2,Pe=!1,ei=e}}}function Lg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ei=e}function Ua(e){if(e!==ei)return!1;if(!Pe)return Lg(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wu(e.type,e.memoizedProps)),t&&(t=Qt)){if(Yu(e))throw F1(),Error(A(418));for(;t;)z1(e,t),t=$s(t.nextSibling)}if(Lg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Qt=$s(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=ei?$s(e.stateNode.nextSibling):null;return!0}function F1(){for(var e=Qt;e;)e=$s(e.nextSibling)}function Sn(){Qt=ei=null,Pe=!1}function Wf(e){Mi===null?Mi=[e]:Mi.push(e)}var bC=ms.ReactCurrentBatchConfig;function to(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(A(309));var s=i.stateNode}if(!s)throw Error(A(147,e));var r=s,n=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===n?t.ref:(t=function(o){var a=r.refs;o===null?delete a[n]:a[n]=o},t._stringRef=n,t)}if(typeof e!="string")throw Error(A(284));if(!i._owner)throw Error(A(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rg(e){var t=e._init;return t(e._payload)}function H1(e){function t(g,y){if(e){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function i(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function s(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Vs(g,y),g.index=0,g.sibling=null,g}function n(g,y,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,x,C){return y===null||y.tag!==6?(y=Oh(x,g.mode,C),y.return=g,y):(y=r(y,x),y.return=g,y)}function l(g,y,x,C){var k=x.type;return k===Yr?d(g,y,x.props.children,C,x.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ns&&Rg(k)===y.type)?(C=r(y,x.props),C.ref=to(g,y,x),C.return=g,C):(C=vl(x.type,x.key,x.props,null,g.mode,C),C.ref=to(g,y,x),C.return=g,C)}function c(g,y,x,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Ih(x,g.mode,C),y.return=g,y):(y=r(y,x.children||[]),y.return=g,y)}function d(g,y,x,C,k){return y===null||y.tag!==7?(y=gr(x,g.mode,C,k),y.return=g,y):(y=r(y,x),y.return=g,y)}function f(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Oh(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Aa:return x=vl(y.type,y.key,y.props,null,g.mode,x),x.ref=to(g,null,y),x.return=g,x;case qr:return y=Ih(y,g.mode,x),y.return=g,y;case Ns:var C=y._init;return f(g,C(y._payload),x)}if(fo(y)||Xn(y))return y=gr(y,g.mode,x,null),y.return=g,y;Ka(g,y)}return null}function p(g,y,x,C){var k=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:a(g,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Aa:return x.key===k?l(g,y,x,C):null;case qr:return x.key===k?c(g,y,x,C):null;case Ns:return k=x._init,p(g,y,k(x._payload),C)}if(fo(x)||Xn(x))return k!==null?null:d(g,y,x,C,null);Ka(g,x)}return null}function m(g,y,x,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(x)||null,a(y,g,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Aa:return g=g.get(C.key===null?x:C.key)||null,l(y,g,C,k);case qr:return g=g.get(C.key===null?x:C.key)||null,c(y,g,C,k);case Ns:var T=C._init;return m(g,y,x,T(C._payload),k)}if(fo(C)||Xn(C))return g=g.get(x)||null,d(y,g,C,k,null);Ka(y,C)}return null}function _(g,y,x,C){for(var k=null,T=null,L=y,P=y=0,q=null;L!==null&&P<x.length;P++){L.index>P?(q=L,L=null):q=L.sibling;var H=p(g,L,x[P],C);if(H===null){L===null&&(L=q);break}e&&L&&H.alternate===null&&t(g,L),y=n(H,y,P),T===null?k=H:T.sibling=H,T=H,L=q}if(P===x.length)return i(g,L),Pe&&tr(g,P),k;if(L===null){for(;P<x.length;P++)L=f(g,x[P],C),L!==null&&(y=n(L,y,P),T===null?k=L:T.sibling=L,T=L);return Pe&&tr(g,P),k}for(L=s(g,L);P<x.length;P++)q=m(L,g,P,x[P],C),q!==null&&(e&&q.alternate!==null&&L.delete(q.key===null?P:q.key),y=n(q,y,P),T===null?k=q:T.sibling=q,T=q);return e&&L.forEach(function(ee){return t(g,ee)}),Pe&&tr(g,P),k}function v(g,y,x,C){var k=Xn(x);if(typeof k!="function")throw Error(A(150));if(x=k.call(x),x==null)throw Error(A(151));for(var T=k=null,L=y,P=y=0,q=null,H=x.next();L!==null&&!H.done;P++,H=x.next()){L.index>P?(q=L,L=null):q=L.sibling;var ee=p(g,L,H.value,C);if(ee===null){L===null&&(L=q);break}e&&L&&ee.alternate===null&&t(g,L),y=n(ee,y,P),T===null?k=ee:T.sibling=ee,T=ee,L=q}if(H.done)return i(g,L),Pe&&tr(g,P),k;if(L===null){for(;!H.done;P++,H=x.next())H=f(g,H.value,C),H!==null&&(y=n(H,y,P),T===null?k=H:T.sibling=H,T=H);return Pe&&tr(g,P),k}for(L=s(g,L);!H.done;P++,H=x.next())H=m(L,g,P,H.value,C),H!==null&&(e&&H.alternate!==null&&L.delete(H.key===null?P:H.key),y=n(H,y,P),T===null?k=H:T.sibling=H,T=H);return e&&L.forEach(function(R){return t(g,R)}),Pe&&tr(g,P),k}function b(g,y,x,C){if(typeof x=="object"&&x!==null&&x.type===Yr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Aa:e:{for(var k=x.key,T=y;T!==null;){if(T.key===k){if(k=x.type,k===Yr){if(T.tag===7){i(g,T.sibling),y=r(T,x.props.children),y.return=g,g=y;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ns&&Rg(k)===T.type){i(g,T.sibling),y=r(T,x.props),y.ref=to(g,T,x),y.return=g,g=y;break e}i(g,T);break}else t(g,T);T=T.sibling}x.type===Yr?(y=gr(x.props.children,g.mode,C,x.key),y.return=g,g=y):(C=vl(x.type,x.key,x.props,null,g.mode,C),C.ref=to(g,y,x),C.return=g,g=C)}return o(g);case qr:e:{for(T=x.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){i(g,y.sibling),y=r(y,x.children||[]),y.return=g,g=y;break e}else{i(g,y);break}else t(g,y);y=y.sibling}y=Ih(x,g.mode,C),y.return=g,g=y}return o(g);case Ns:return T=x._init,b(g,y,T(x._payload),C)}if(fo(x))return _(g,y,x,C);if(Xn(x))return v(g,y,x,C);Ka(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(i(g,y.sibling),y=r(y,x),y.return=g,g=y):(i(g,y),y=Oh(x,g.mode,C),y.return=g,g=y),o(g)):i(g,y)}return b}var bn=H1(!0),V1=H1(!1),Kl=Gs(null),ql=null,sn=null,Uf=null;function Kf(){Uf=sn=ql=null}function qf(e){var t=Kl.current;Ne(Kl),e._currentValue=t}function Xu(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function _n(e,t){ql=e,Uf=sn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(Uf!==e)if(e={context:e,memoizedValue:t,next:null},sn===null){if(ql===null)throw Error(A(308));sn=e,ql.dependencies={lanes:0,firstContext:e}}else sn=sn.next=e;return t}var ar=null;function Yf(e){ar===null?ar=[e]:ar.push(e)}function W1(e,t,i,s){var r=t.interleaved;return r===null?(i.next=i,Yf(t)):(i.next=r.next,r.next=i),t.interleaved=i,ds(e,s)}function ds(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Ts=!1;function Gf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,pe&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,ds(e,i)}return r=s.interleaved,r===null?(t.next=t,Yf(s)):(t.next=r.next,r.next=t),s.interleaved=t,ds(e,i)}function dl(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Rf(e,i)}}function Ag(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var r=null,n=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};n===null?r=n=o:n=n.next=o,i=i.next}while(i!==null);n===null?r=n=t:n=n.next=t}else r=n=t;i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Yl(e,t,i,s){var r=e.updateQueue;Ts=!1;var n=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?n=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(n!==null){var f=r.baseState;o=0,d=c=l=null,a=n;do{var p=a.lane,m=a.eventTime;if((s&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=e,v=a;switch(p=t,m=i,v.tag){case 1:if(_=v.payload,typeof _=="function"){f=_.call(m,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,p=typeof _=="function"?_.call(m,f,p):_,p==null)break e;f=Ie({},f,p);break e;case 2:Ts=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else n===null&&(r.shared.lanes=0);Sr|=o,e.lanes=o,e.memoizedState=f}}function Bg(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=i,typeof r!="function")throw Error(A(191,r));r.call(s)}}}var ma={},Gi=Gs(ma),Go=Gs(ma),Xo=Gs(ma);function lr(e){if(e===ma)throw Error(A(174));return e}function Xf(e,t){switch(be(Xo,t),be(Go,e),be(Gi,ma),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mu(t,e)}Ne(Gi),be(Gi,t)}function Cn(){Ne(Gi),Ne(Go),Ne(Xo)}function K1(e){lr(Xo.current);var t=lr(Gi.current),i=Mu(t,e.type);t!==i&&(be(Go,e),be(Gi,i))}function Zf(e){Go.current===e&&(Ne(Gi),Ne(Go))}var Ae=Gs(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jh=[];function Jf(){for(var e=0;e<jh.length;e++)jh[e]._workInProgressVersionPrimary=null;jh.length=0}var fl=ms.ReactCurrentDispatcher,Dh=ms.ReactCurrentBatchConfig,wr=0,Oe=null,it=null,lt=null,Xl=!1,No=!1,Zo=0,CC=0;function bt(){throw Error(A(321))}function Qf(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ai(e[i],t[i]))return!1;return!0}function ep(e,t,i,s,r,n){if(wr=n,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fl.current=e===null||e.memoizedState===null?TC:PC,e=i(s,r),No){n=0;do{if(No=!1,Zo=0,25<=n)throw Error(A(301));n+=1,lt=it=null,t.updateQueue=null,fl.current=MC,e=i(s,r)}while(No)}if(fl.current=Zl,t=it!==null&&it.next!==null,wr=0,lt=it=Oe=null,Xl=!1,t)throw Error(A(300));return e}function tp(){var e=Zo!==0;return Zo=0,e}function Vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Oe.memoizedState=lt=e:lt=lt.next=e,lt}function yi(){if(it===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=lt===null?Oe.memoizedState:lt.next;if(t!==null)lt=t,it=e;else{if(e===null)throw Error(A(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},lt===null?Oe.memoizedState=lt=e:lt=lt.next=e}return lt}function Jo(e,t){return typeof t=="function"?t(e):t}function Lh(e){var t=yi(),i=t.queue;if(i===null)throw Error(A(311));i.lastRenderedReducer=e;var s=it,r=s.baseQueue,n=i.pending;if(n!==null){if(r!==null){var o=r.next;r.next=n.next,n.next=o}s.baseQueue=r=n,i.pending=null}if(r!==null){n=r.next,s=s.baseState;var a=o=null,l=null,c=n;do{var d=c.lane;if((wr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:e(s,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,Oe.lanes|=d,Sr|=d}c=c.next}while(c!==null&&c!==n);l===null?o=s:l.next=a,Ai(s,t.memoizedState)||(Ht=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=l,i.lastRenderedState=s}if(e=i.interleaved,e!==null){r=e;do n=r.lane,Oe.lanes|=n,Sr|=n,r=r.next;while(r!==e)}else r===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Rh(e){var t=yi(),i=t.queue;if(i===null)throw Error(A(311));i.lastRenderedReducer=e;var s=i.dispatch,r=i.pending,n=t.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do n=e(n,o.action),o=o.next;while(o!==r);Ai(n,t.memoizedState)||(Ht=!0),t.memoizedState=n,t.baseQueue===null&&(t.baseState=n),i.lastRenderedState=n}return[n,s]}function q1(){}function Y1(e,t){var i=Oe,s=yi(),r=t(),n=!Ai(s.memoizedState,r);if(n&&(s.memoizedState=r,Ht=!0),s=s.queue,ip(Z1.bind(null,i,s,e),[e]),s.getSnapshot!==t||n||lt!==null&&lt.memoizedState.tag&1){if(i.flags|=2048,Qo(9,X1.bind(null,i,s,r,t),void 0,null),dt===null)throw Error(A(349));wr&30||G1(i,t,r)}return r}function G1(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function X1(e,t,i,s){t.value=i,t.getSnapshot=s,J1(t)&&Q1(e)}function Z1(e,t,i){return i(function(){J1(t)&&Q1(e)})}function J1(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ai(e,i)}catch{return!0}}function Q1(e){var t=ds(e,1);t!==null&&Di(t,e,1,-1)}function Og(e){var t=Vi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e},t.queue=e,e=e.dispatch=NC.bind(null,Oe,e),[t.memoizedState,e]}function Qo(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function ey(){return yi().memoizedState}function pl(e,t,i,s){var r=Vi();Oe.flags|=e,r.memoizedState=Qo(1|t,i,void 0,s===void 0?null:s)}function Ec(e,t,i,s){var r=yi();s=s===void 0?null:s;var n=void 0;if(it!==null){var o=it.memoizedState;if(n=o.destroy,s!==null&&Qf(s,o.deps)){r.memoizedState=Qo(t,i,n,s);return}}Oe.flags|=e,r.memoizedState=Qo(1|t,i,n,s)}function Ig(e,t){return pl(8390656,8,e,t)}function ip(e,t){return Ec(2048,8,e,t)}function ty(e,t){return Ec(4,2,e,t)}function iy(e,t){return Ec(4,4,e,t)}function sy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ry(e,t,i){return i=i!=null?i.concat([e]):null,Ec(4,4,sy.bind(null,t,e),i)}function sp(){}function ny(e,t){var i=yi();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Qf(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function oy(e,t){var i=yi();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Qf(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function ay(e,t,i){return wr&21?(Ai(i,t)||(i=d1(),Oe.lanes|=i,Sr|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=i)}function kC(e,t){var i=ve;ve=i!==0&&4>i?i:4,e(!0);var s=Dh.transition;Dh.transition={};try{e(!1),t()}finally{ve=i,Dh.transition=s}}function ly(){return yi().memoizedState}function EC(e,t,i){var s=Hs(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},cy(e))hy(t,i);else if(i=W1(e,t,i,s),i!==null){var r=Rt();Di(i,e,s,r),uy(i,t,s)}}function NC(e,t,i){var s=Hs(e),r={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(cy(e))hy(t,r);else{var n=e.alternate;if(e.lanes===0&&(n===null||n.lanes===0)&&(n=t.lastRenderedReducer,n!==null))try{var o=t.lastRenderedState,a=n(o,i);if(r.hasEagerState=!0,r.eagerState=a,Ai(a,o)){var l=t.interleaved;l===null?(r.next=r,Yf(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}i=W1(e,t,r,s),i!==null&&(r=Rt(),Di(i,e,s,r),uy(i,t,s))}}function cy(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function hy(e,t){No=Xl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function uy(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Rf(e,i)}}var Zl={readContext:vi,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},TC={readContext:vi,useCallback:function(e,t){return Vi().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:Ig,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,pl(4194308,4,sy.bind(null,t,e),i)},useLayoutEffect:function(e,t){return pl(4194308,4,e,t)},useInsertionEffect:function(e,t){return pl(4,2,e,t)},useMemo:function(e,t){var i=Vi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=Vi();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=EC.bind(null,Oe,e),[s.memoizedState,e]},useRef:function(e){var t=Vi();return e={current:e},t.memoizedState=e},useState:Og,useDebugValue:sp,useDeferredValue:function(e){return Vi().memoizedState=e},useTransition:function(){var e=Og(!1),t=e[0];return e=kC.bind(null,e[1]),Vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Oe,r=Vi();if(Pe){if(i===void 0)throw Error(A(407));i=i()}else{if(i=t(),dt===null)throw Error(A(349));wr&30||G1(s,t,i)}r.memoizedState=i;var n={value:i,getSnapshot:t};return r.queue=n,Ig(Z1.bind(null,s,n,e),[e]),s.flags|=2048,Qo(9,X1.bind(null,s,n,i,t),void 0,null),i},useId:function(){var e=Vi(),t=dt.identifierPrefix;if(Pe){var i=as,s=os;i=(s&~(1<<32-ji(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=Zo++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=CC++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},PC={readContext:vi,useCallback:ny,useContext:vi,useEffect:ip,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:iy,useMemo:oy,useReducer:Lh,useRef:ey,useState:function(){return Lh(Jo)},useDebugValue:sp,useDeferredValue:function(e){var t=yi();return ay(t,it.memoizedState,e)},useTransition:function(){var e=Lh(Jo)[0],t=yi().memoizedState;return[e,t]},useMutableSource:q1,useSyncExternalStore:Y1,useId:ly,unstable_isNewReconciler:!1},MC={readContext:vi,useCallback:ny,useContext:vi,useEffect:ip,useImperativeHandle:ry,useInsertionEffect:ty,useLayoutEffect:iy,useMemo:oy,useReducer:Rh,useRef:ey,useState:function(){return Rh(Jo)},useDebugValue:sp,useDeferredValue:function(e){var t=yi();return it===null?t.memoizedState=e:ay(t,it.memoizedState,e)},useTransition:function(){var e=Rh(Jo)[0],t=yi().memoizedState;return[e,t]},useMutableSource:q1,useSyncExternalStore:Y1,useId:ly,unstable_isNewReconciler:!1};function Ti(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function Zu(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Ie({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Nc={isMounted:function(e){return(e=e._reactInternals)?Nr(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Rt(),r=Hs(e),n=cs(s,r);n.payload=t,i!=null&&(n.callback=i),t=zs(e,n,r),t!==null&&(Di(t,e,r,s),dl(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Rt(),r=Hs(e),n=cs(s,r);n.tag=1,n.payload=t,i!=null&&(n.callback=i),t=zs(e,n,r),t!==null&&(Di(t,e,r,s),dl(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Rt(),s=Hs(e),r=cs(i,s);r.tag=2,t!=null&&(r.callback=t),t=zs(e,r,s),t!==null&&(Di(t,e,s,i),dl(t,e,s))}};function $g(e,t,i,s,r,n,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,n,o):t.prototype&&t.prototype.isPureReactComponent?!Uo(i,s)||!Uo(r,n):!0}function dy(e,t,i){var s=!1,r=Ks,n=t.contextType;return typeof n=="object"&&n!==null?n=vi(n):(r=Wt(t)?yr:Tt.current,s=t.contextTypes,n=(s=s!=null)?wn(e,r):Ks),t=new t(i,n),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nc,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=n),t}function zg(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Nc.enqueueReplaceState(t,t.state,null)}function Ju(e,t,i,s){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs={},Gf(e);var n=t.contextType;typeof n=="object"&&n!==null?r.context=vi(n):(n=Wt(t)?yr:Tt.current,r.context=wn(e,n)),r.state=e.memoizedState,n=t.getDerivedStateFromProps,typeof n=="function"&&(Zu(e,t,n,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Nc.enqueueReplaceState(r,r.state,null),Yl(e,i,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function kn(e,t){try{var i="",s=t;do i+=r2(s),s=s.return;while(s);var r=i}catch(n){r=`
Error generating stack: `+n.message+`
`+n.stack}return{value:e,source:t,stack:r,digest:null}}function Ah(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Qu(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var jC=typeof WeakMap=="function"?WeakMap:Map;function fy(e,t,i){i=cs(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Ql||(Ql=!0,cd=s),Qu(e,t)},i}function py(e,t,i){i=cs(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;i.payload=function(){return s(r)},i.callback=function(){Qu(e,t)}}var n=e.stateNode;return n!==null&&typeof n.componentDidCatch=="function"&&(i.callback=function(){Qu(e,t),typeof s!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}function Fg(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new jC;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(i)||(r.add(i),e=UC.bind(null,e,t,i),t.then(e,e))}function Hg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vg(e,t,i,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=cs(-1,1),t.tag=2,zs(i,t,1))),i.lanes|=1),e)}var DC=ms.ReactCurrentOwner,Ht=!1;function jt(e,t,i,s){t.child=e===null?V1(t,null,i,s):bn(t,e.child,i,s)}function Wg(e,t,i,s,r){i=i.render;var n=t.ref;return _n(t,r),s=ep(e,t,i,s,n,r),i=tp(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,fs(e,t,r)):(Pe&&i&&Hf(t),t.flags|=1,jt(e,t,s,r),t.child)}function Ug(e,t,i,s,r){if(e===null){var n=i.type;return typeof n=="function"&&!up(n)&&n.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=n,my(e,t,n,s,r)):(e=vl(i.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(n=e.child,!(e.lanes&r)){var o=n.memoizedProps;if(i=i.compare,i=i!==null?i:Uo,i(o,s)&&e.ref===t.ref)return fs(e,t,r)}return t.flags|=1,e=Vs(n,s),e.ref=t.ref,e.return=t,t.child=e}function my(e,t,i,s,r){if(e!==null){var n=e.memoizedProps;if(Uo(n,s)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=s=n,(e.lanes&r)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,fs(e,t,r)}return ed(e,t,i,s,r)}function gy(e,t,i){var s=t.pendingProps,r=s.children,n=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(nn,Jt),Jt|=i;else{if(!(i&1073741824))return e=n!==null?n.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(nn,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=n!==null?n.baseLanes:i,be(nn,Jt),Jt|=s}else n!==null?(s=n.baseLanes|i,t.memoizedState=null):s=i,be(nn,Jt),Jt|=s;return jt(e,t,r,i),t.child}function _y(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ed(e,t,i,s,r){var n=Wt(i)?yr:Tt.current;return n=wn(t,n),_n(t,r),i=ep(e,t,i,s,n,r),s=tp(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,fs(e,t,r)):(Pe&&s&&Hf(t),t.flags|=1,jt(e,t,i,r),t.child)}function Kg(e,t,i,s,r){if(Wt(i)){var n=!0;Vl(t)}else n=!1;if(_n(t,r),t.stateNode===null)ml(e,t),dy(t,i,s),Ju(t,i,s,r),s=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=i.contextType;typeof c=="object"&&c!==null?c=vi(c):(c=Wt(i)?yr:Tt.current,c=wn(t,c));var d=i.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&zg(t,o,s,c),Ts=!1;var p=t.memoizedState;o.state=p,Yl(t,s,o,r),l=t.memoizedState,a!==s||p!==l||Vt.current||Ts?(typeof d=="function"&&(Zu(t,i,d,s),l=t.memoizedState),(a=Ts||$g(t,i,a,s,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,U1(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ti(t.type,a),o.props=c,f=t.pendingProps,p=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=vi(l):(l=Wt(i)?yr:Tt.current,l=wn(t,l));var m=i.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&zg(t,o,s,l),Ts=!1,p=t.memoizedState,o.state=p,Yl(t,s,o,r);var _=t.memoizedState;a!==f||p!==_||Vt.current||Ts?(typeof m=="function"&&(Zu(t,i,m,s),_=t.memoizedState),(c=Ts||$g(t,i,c,s,p,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,_,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=_),o.props=s,o.state=_,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return td(e,t,i,s,n,r)}function td(e,t,i,s,r,n){_y(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return r&&jg(t,i,!1),fs(e,t,n);s=t.stateNode,DC.current=t;var a=o&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=bn(t,e.child,null,n),t.child=bn(t,null,a,n)):jt(e,t,a,n),t.memoizedState=s.state,r&&jg(t,i,!0),t.child}function vy(e){var t=e.stateNode;t.pendingContext?Mg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mg(e,t.context,!1),Xf(e,t.containerInfo)}function qg(e,t,i,s,r){return Sn(),Wf(r),t.flags|=256,jt(e,t,i,s),t.child}var id={dehydrated:null,treeContext:null,retryLane:0};function sd(e){return{baseLanes:e,cachePool:null,transitions:null}}function yy(e,t,i){var s=t.pendingProps,r=Ae.current,n=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(n=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),be(Ae,r&1),e===null)return Gu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,n?(s=t.mode,n=t.child,o={mode:"hidden",children:o},!(s&1)&&n!==null?(n.childLanes=0,n.pendingProps=o):n=Mc(o,s,0,null),e=gr(e,s,i,null),n.return=t,e.return=t,n.sibling=e,t.child=n,t.child.memoizedState=sd(i),t.memoizedState=id,e):rp(t,o));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return LC(e,t,o,s,a,r,i);if(n){n=s.fallback,o=t.mode,r=e.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=l,t.deletions=null):(s=Vs(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?n=Vs(a,n):(n=gr(n,o,i,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,o=e.child.memoizedState,o=o===null?sd(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},n.memoizedState=o,n.childLanes=e.childLanes&~i,t.memoizedState=id,s}return n=e.child,e=n.sibling,s=Vs(n,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function rp(e,t){return t=Mc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qa(e,t,i,s){return s!==null&&Wf(s),bn(t,e.child,null,i),e=rp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LC(e,t,i,s,r,n,o){if(i)return t.flags&256?(t.flags&=-257,s=Ah(Error(A(422))),qa(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(n=s.fallback,r=t.mode,s=Mc({mode:"visible",children:s.children},r,0,null),n=gr(n,r,o,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,t.mode&1&&bn(t,e.child,null,o),t.child.memoizedState=sd(o),t.memoizedState=id,n);if(!(t.mode&1))return qa(e,t,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,n=Error(A(419)),s=Ah(n,s,void 0),qa(e,t,o,s)}if(a=(o&e.childLanes)!==0,Ht||a){if(s=dt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==n.retryLane&&(n.retryLane=r,ds(e,r),Di(s,e,r,-1))}return hp(),s=Ah(Error(A(421))),qa(e,t,o,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=KC.bind(null,e),r._reactRetry=t,null):(e=n.treeContext,Qt=$s(r.nextSibling),ei=t,Pe=!0,Mi=null,e!==null&&(ui[di++]=os,ui[di++]=as,ui[di++]=xr,os=e.id,as=e.overflow,xr=t),t=rp(t,s.children),t.flags|=4096,t)}function Yg(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Xu(e.return,t,i)}function Bh(e,t,i,s,r){var n=e.memoizedState;n===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=i,n.tailMode=r)}function xy(e,t,i){var s=t.pendingProps,r=s.revealOrder,n=s.tail;if(jt(e,t,s.children,i),s=Ae.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yg(e,i,t);else if(e.tag===19)Yg(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(be(Ae,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&Gl(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Bh(t,!1,r,i,n);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Gl(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Bh(t,!0,i,null,n);break;case"together":Bh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ml(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,i=Vs(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Vs(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function RC(e,t,i){switch(t.tag){case 3:vy(t),Sn();break;case 5:K1(t);break;case 1:Wt(t.type)&&Vl(t);break;case 4:Xf(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;be(Kl,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(be(Ae,Ae.current&1),t.flags|=128,null):i&t.child.childLanes?yy(e,t,i):(be(Ae,Ae.current&1),e=fs(e,t,i),e!==null?e.sibling:null);be(Ae,Ae.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return xy(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),be(Ae,Ae.current),s)break;return null;case 22:case 23:return t.lanes=0,gy(e,t,i)}return fs(e,t,i)}var wy,rd,Sy,by;wy=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};rd=function(){};Sy=function(e,t,i,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,lr(Gi.current);var n=null;switch(i){case"input":r=Eu(e,r),s=Eu(e,s),n=[];break;case"select":r=Ie({},r,{value:void 0}),s=Ie({},s,{value:void 0}),n=[];break;case"textarea":r=Pu(e,r),s=Pu(e,s),n=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Fl)}ju(i,s);var o;i=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Io.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(n||(n=[]),n.push(c,i)),i=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(n=n||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(n=n||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Io.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",e),n||a===l||(n=[])):(n=n||[]).push(c,l))}i&&(n=n||[]).push("style",i);var c=n;(t.updateQueue=c)&&(t.flags|=4)}};by=function(e,t,i,s){i!==s&&(t.flags|=4)};function io(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function AC(e,t,i){var s=t.pendingProps;switch(Vf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Wt(t.type)&&Hl(),Ct(t),null;case 3:return s=t.stateNode,Cn(),Ne(Vt),Ne(Tt),Jf(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ua(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mi!==null&&(dd(Mi),Mi=null))),rd(e,t),Ct(t),null;case 5:Zf(t);var r=lr(Xo.current);if(i=t.type,e!==null&&t.stateNode!=null)Sy(e,t,i,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(A(166));return Ct(t),null}if(e=lr(Gi.current),Ua(t)){s=t.stateNode,i=t.type;var n=t.memoizedProps;switch(s[Ki]=t,s[Yo]=n,e=(t.mode&1)!==0,i){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(r=0;r<mo.length;r++)ke(mo[r],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":sg(s,n),ke("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!n.multiple},ke("invalid",s);break;case"textarea":ng(s,n),ke("invalid",s)}ju(i,n),r=null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];o==="children"?typeof a=="string"?s.textContent!==a&&(n.suppressHydrationWarning!==!0&&Wa(s.textContent,a,e),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(n.suppressHydrationWarning!==!0&&Wa(s.textContent,a,e),r=["children",""+a]):Io.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",s)}switch(i){case"input":Ba(s),rg(s,n,!0);break;case"textarea":Ba(s),og(s);break;case"select":case"option":break;default:typeof n.onClick=="function"&&(s.onclick=Fl)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zv(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(i,{is:s.is}):(e=o.createElement(i),i==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,i),e[Ki]=t,e[Yo]=s,wy(e,t,!1,!1),t.stateNode=e;e:{switch(o=Du(i,s),i){case"dialog":ke("cancel",e),ke("close",e),r=s;break;case"iframe":case"object":case"embed":ke("load",e),r=s;break;case"video":case"audio":for(r=0;r<mo.length;r++)ke(mo[r],e);r=s;break;case"source":ke("error",e),r=s;break;case"img":case"image":case"link":ke("error",e),ke("load",e),r=s;break;case"details":ke("toggle",e),r=s;break;case"input":sg(e,s),r=Eu(e,s),ke("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Ie({},s,{value:void 0}),ke("invalid",e);break;case"textarea":ng(e,s),r=Pu(e,s),ke("invalid",e);break;default:r=s}ju(i,r),a=r;for(n in a)if(a.hasOwnProperty(n)){var l=a[n];n==="style"?e1(e,l):n==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jv(e,l)):n==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&$o(e,l):typeof l=="number"&&$o(e,""+l):n!=="suppressContentEditableWarning"&&n!=="suppressHydrationWarning"&&n!=="autoFocus"&&(Io.hasOwnProperty(n)?l!=null&&n==="onScroll"&&ke("scroll",e):l!=null&&Tf(e,n,l,o))}switch(i){case"input":Ba(e),rg(e,s,!1);break;case"textarea":Ba(e),og(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Us(s.value));break;case"select":e.multiple=!!s.multiple,n=s.value,n!=null?fn(e,!!s.multiple,n,!1):s.defaultValue!=null&&fn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Fl)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ct(t),null;case 6:if(e&&t.stateNode!=null)by(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(A(166));if(i=lr(Xo.current),lr(Gi.current),Ua(t)){if(s=t.stateNode,i=t.memoizedProps,s[Ki]=t,(n=s.nodeValue!==i)&&(e=ei,e!==null))switch(e.tag){case 3:Wa(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wa(s.nodeValue,i,(e.mode&1)!==0)}n&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[Ki]=t,t.stateNode=s}return Ct(t),null;case 13:if(Ne(Ae),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&Qt!==null&&t.mode&1&&!(t.flags&128))F1(),Sn(),t.flags|=98560,n=!1;else if(n=Ua(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(A(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(A(317));n[Ki]=t}else Sn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ct(t),n=!1}else Mi!==null&&(dd(Mi),Mi=null),n=!0;if(!n)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?st===0&&(st=3):hp())),t.updateQueue!==null&&(t.flags|=4),Ct(t),null);case 4:return Cn(),rd(e,t),e===null&&Ko(t.stateNode.containerInfo),Ct(t),null;case 10:return qf(t.type._context),Ct(t),null;case 17:return Wt(t.type)&&Hl(),Ct(t),null;case 19:if(Ne(Ae),n=t.memoizedState,n===null)return Ct(t),null;if(s=(t.flags&128)!==0,o=n.rendering,o===null)if(s)io(n,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gl(e),o!==null){for(t.flags|=128,io(n,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)n=i,e=s,n.flags&=14680066,o=n.alternate,o===null?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,e=o.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return be(Ae,Ae.current&1|2),t.child}e=e.sibling}n.tail!==null&&qe()>En&&(t.flags|=128,s=!0,io(n,!1),t.lanes=4194304)}else{if(!s)if(e=Gl(o),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),io(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!Pe)return Ct(t),null}else 2*qe()-n.renderingStartTime>En&&i!==1073741824&&(t.flags|=128,s=!0,io(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(i=n.last,i!==null?i.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=qe(),t.sibling=null,i=Ae.current,be(Ae,s?i&1|2:i&1),t):(Ct(t),null);case 22:case 23:return cp(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Jt&1073741824&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function BC(e,t){switch(Vf(t),t.tag){case 1:return Wt(t.type)&&Hl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),Ne(Vt),Ne(Tt),Jf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zf(t),null;case 13:if(Ne(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Sn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(Ae),null;case 4:return Cn(),null;case 10:return qf(t.type._context),null;case 22:case 23:return cp(),null;case 24:return null;default:return null}}var Ya=!1,Et=!1,OC=typeof WeakSet=="function"?WeakSet:Set,Y=null;function rn(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){He(e,t,s)}else i.current=null}function nd(e,t,i){try{i()}catch(s){He(e,t,s)}}var Gg=!1;function IC(e,t){if(Hu=Il,e=T1(),Ff(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var r=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{i.nodeType,n.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==i||r!==0&&f.nodeType!==3||(a=o+r),f!==n||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===i&&++c===r&&(a=o),p===n&&++d===s&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vu={focusedElem:e,selectionRange:i},Il=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,b=_.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ti(t.type,v),b);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(C){He(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return _=Gg,Gg=!1,_}function To(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,n!==void 0&&nd(t,i,n)}r=r.next}while(r!==s)}}function Tc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function od(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Cy(e){var t=e.alternate;t!==null&&(e.alternate=null,Cy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ki],delete t[Yo],delete t[Ku],delete t[xC],delete t[wC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ky(e){return e.tag===5||e.tag===3||e.tag===4}function Xg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ky(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ad(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Fl));else if(s!==4&&(e=e.child,e!==null))for(ad(e,t,i),e=e.sibling;e!==null;)ad(e,t,i),e=e.sibling}function ld(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ld(e,t,i),e=e.sibling;e!==null;)ld(e,t,i),e=e.sibling}var _t=null,Pi=!1;function ws(e,t,i){for(i=i.child;i!==null;)Ey(e,t,i),i=i.sibling}function Ey(e,t,i){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(xc,i)}catch{}switch(i.tag){case 5:Et||rn(i,t);case 6:var s=_t,r=Pi;_t=null,ws(e,t,i),_t=s,Pi=r,_t!==null&&(Pi?(e=_t,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):_t.removeChild(i.stateNode));break;case 18:_t!==null&&(Pi?(e=_t,i=i.stateNode,e.nodeType===8?Ph(e.parentNode,i):e.nodeType===1&&Ph(e,i),Vo(e)):Ph(_t,i.stateNode));break;case 4:s=_t,r=Pi,_t=i.stateNode.containerInfo,Pi=!0,ws(e,t,i),_t=s,Pi=r;break;case 0:case 11:case 14:case 15:if(!Et&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var n=r,o=n.destroy;n=n.tag,o!==void 0&&(n&2||n&4)&&nd(i,t,o),r=r.next}while(r!==s)}ws(e,t,i);break;case 1:if(!Et&&(rn(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(a){He(i,t,a)}ws(e,t,i);break;case 21:ws(e,t,i);break;case 22:i.mode&1?(Et=(s=Et)||i.memoizedState!==null,ws(e,t,i),Et=s):ws(e,t,i);break;default:ws(e,t,i)}}function Zg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new OC),t.forEach(function(s){var r=qC.bind(null,e,s);i.has(s)||(i.add(s),s.then(r,r))})}}function Ci(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var r=i[s];try{var n=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:_t=a.stateNode,Pi=!1;break e;case 3:_t=a.stateNode.containerInfo,Pi=!0;break e;case 4:_t=a.stateNode.containerInfo,Pi=!0;break e}a=a.return}if(_t===null)throw Error(A(160));Ey(n,o,r),_t=null,Pi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){He(r,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ny(t,e),t=t.sibling}function Ny(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ci(t,e),$i(e),s&4){try{To(3,e,e.return),Tc(3,e)}catch(v){He(e,e.return,v)}try{To(5,e,e.return)}catch(v){He(e,e.return,v)}}break;case 1:Ci(t,e),$i(e),s&512&&i!==null&&rn(i,i.return);break;case 5:if(Ci(t,e),$i(e),s&512&&i!==null&&rn(i,i.return),e.flags&32){var r=e.stateNode;try{$o(r,"")}catch(v){He(e,e.return,v)}}if(s&4&&(r=e.stateNode,r!=null)){var n=e.memoizedProps,o=i!==null?i.memoizedProps:n,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&n.type==="radio"&&n.name!=null&&Gv(r,n),Du(a,o);var c=Du(a,n);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?e1(r,f):d==="dangerouslySetInnerHTML"?Jv(r,f):d==="children"?$o(r,f):Tf(r,d,f,c)}switch(a){case"input":Nu(r,n);break;case"textarea":Xv(r,n);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!n.multiple;var m=n.value;m!=null?fn(r,!!n.multiple,m,!1):p!==!!n.multiple&&(n.defaultValue!=null?fn(r,!!n.multiple,n.defaultValue,!0):fn(r,!!n.multiple,n.multiple?[]:"",!1))}r[Yo]=n}catch(v){He(e,e.return,v)}}break;case 6:if(Ci(t,e),$i(e),s&4){if(e.stateNode===null)throw Error(A(162));r=e.stateNode,n=e.memoizedProps;try{r.nodeValue=n}catch(v){He(e,e.return,v)}}break;case 3:if(Ci(t,e),$i(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(v){He(e,e.return,v)}break;case 4:Ci(t,e),$i(e);break;case 13:Ci(t,e),$i(e),r=e.child,r.flags&8192&&(n=r.memoizedState!==null,r.stateNode.isHidden=n,!n||r.alternate!==null&&r.alternate.memoizedState!==null||(ap=qe())),s&4&&Zg(e);break;case 22:if(d=i!==null&&i.memoizedState!==null,e.mode&1?(Et=(c=Et)||d,Ci(t,e),Et=c):Ci(t,e),$i(e),s&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Y=e,d=e.child;d!==null;){for(f=Y=d;Y!==null;){switch(p=Y,m=p.child,p.tag){case 0:case 11:case 14:case 15:To(4,p,p.return);break;case 1:rn(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){s=p,i=p.return;try{t=s,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(v){He(s,i,v)}}break;case 5:rn(p,p.return);break;case 22:if(p.memoizedState!==null){Qg(f);continue}}m!==null?(m.return=p,Y=m):Qg(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,c?(n=r.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Qv("display",o))}catch(v){He(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){He(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ci(t,e),$i(e),s&4&&Zg(e);break;case 21:break;default:Ci(t,e),$i(e)}}function $i(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(ky(i)){var s=i;break e}i=i.return}throw Error(A(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($o(r,""),s.flags&=-33);var n=Xg(e);ld(e,n,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=Xg(e);ad(e,a,o);break;default:throw Error(A(161))}}catch(l){He(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $C(e,t,i){Y=e,Ty(e)}function Ty(e,t,i){for(var s=(e.mode&1)!==0;Y!==null;){var r=Y,n=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Ya;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Et;a=Ya;var c=Et;if(Ya=o,(Et=l)&&!c)for(Y=r;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?e_(r):l!==null?(l.return=o,Y=l):e_(r);for(;n!==null;)Y=n,Ty(n),n=n.sibling;Y=r,Ya=a,Et=c}Jg(e)}else r.subtreeFlags&8772&&n!==null?(n.return=r,Y=n):Jg(e)}}function Jg(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||Tc(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Et)if(i===null)s.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:Ti(t.type,i.memoizedProps);s.componentDidUpdate(r,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;n!==null&&Bg(t,n,s);break;case 3:var o=t.updateQueue;if(o!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Bg(t,o,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Vo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Et||t.flags&512&&od(t)}catch(p){He(t,t.return,p)}}if(t===e){Y=null;break}if(i=t.sibling,i!==null){i.return=t.return,Y=i;break}Y=t.return}}function Qg(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Y=i;break}Y=t.return}}function e_(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Tc(4,t)}catch(l){He(t,i,l)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(l){He(t,r,l)}}var n=t.return;try{od(t)}catch(l){He(t,n,l)}break;case 5:var o=t.return;try{od(t)}catch(l){He(t,o,l)}}}catch(l){He(t,t.return,l)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var zC=Math.ceil,Jl=ms.ReactCurrentDispatcher,np=ms.ReactCurrentOwner,mi=ms.ReactCurrentBatchConfig,pe=0,dt=null,Je=null,wt=0,Jt=0,nn=Gs(0),st=0,ea=null,Sr=0,Pc=0,op=0,Po=null,Ft=null,ap=0,En=1/0,rs=null,Ql=!1,cd=null,Fs=null,Ga=!1,Ls=null,ec=0,Mo=0,hd=null,gl=-1,_l=0;function Rt(){return pe&6?qe():gl!==-1?gl:gl=qe()}function Hs(e){return e.mode&1?pe&2&&wt!==0?wt&-wt:bC.transition!==null?(_l===0&&(_l=d1()),_l):(e=ve,e!==0||(e=window.event,e=e===void 0?16:y1(e.type)),e):1}function Di(e,t,i,s){if(50<Mo)throw Mo=0,hd=null,Error(A(185));da(e,i,s),(!(pe&2)||e!==dt)&&(e===dt&&(!(pe&2)&&(Pc|=i),st===4&&js(e,wt)),Ut(e,s),i===1&&pe===0&&!(t.mode&1)&&(En=qe()+500,kc&&Xs()))}function Ut(e,t){var i=e.callbackNode;b2(e,t);var s=Ol(e,e===dt?wt:0);if(s===0)i!==null&&cg(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&cg(i),t===1)e.tag===0?SC(t_.bind(null,e)):I1(t_.bind(null,e)),vC(function(){!(pe&6)&&Xs()}),i=null;else{switch(f1(s)){case 1:i=Lf;break;case 4:i=h1;break;case 16:i=Bl;break;case 536870912:i=u1;break;default:i=Bl}i=By(i,Py.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function Py(e,t){if(gl=-1,_l=0,pe&6)throw Error(A(327));var i=e.callbackNode;if(vn()&&e.callbackNode!==i)return null;var s=Ol(e,e===dt?wt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=tc(e,s);else{t=s;var r=pe;pe|=2;var n=jy();(dt!==e||wt!==t)&&(rs=null,En=qe()+500,mr(e,t));do try{VC();break}catch(a){My(e,a)}while(!0);Kf(),Jl.current=n,pe=r,Je!==null?t=0:(dt=null,wt=0,t=st)}if(t!==0){if(t===2&&(r=Ou(e),r!==0&&(s=r,t=ud(e,r))),t===1)throw i=ea,mr(e,0),js(e,s),Ut(e,qe()),i;if(t===6)js(e,s);else{if(r=e.current.alternate,!(s&30)&&!FC(r)&&(t=tc(e,s),t===2&&(n=Ou(e),n!==0&&(s=n,t=ud(e,n))),t===1))throw i=ea,mr(e,0),js(e,s),Ut(e,qe()),i;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(A(345));case 2:ir(e,Ft,rs);break;case 3:if(js(e,s),(s&130023424)===s&&(t=ap+500-qe(),10<t)){if(Ol(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Rt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Uu(ir.bind(null,e,Ft,rs),t);break}ir(e,Ft,rs);break;case 4:if(js(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-ji(s);n=1<<o,o=t[o],o>r&&(r=o),s&=~n}if(s=r,s=qe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*zC(s/1960))-s,10<s){e.timeoutHandle=Uu(ir.bind(null,e,Ft,rs),s);break}ir(e,Ft,rs);break;case 5:ir(e,Ft,rs);break;default:throw Error(A(329))}}}return Ut(e,qe()),e.callbackNode===i?Py.bind(null,e):null}function ud(e,t){var i=Po;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=tc(e,t),e!==2&&(t=Ft,Ft=i,t!==null&&dd(t)),e}function dd(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function FC(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var r=i[s],n=r.getSnapshot;r=r.value;try{if(!Ai(n(),r))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t){for(t&=~op,t&=~Pc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ji(t),s=1<<i;e[i]=-1,t&=~s}}function t_(e){if(pe&6)throw Error(A(327));vn();var t=Ol(e,0);if(!(t&1))return Ut(e,qe()),null;var i=tc(e,t);if(e.tag!==0&&i===2){var s=Ou(e);s!==0&&(t=s,i=ud(e,s))}if(i===1)throw i=ea,mr(e,0),js(e,t),Ut(e,qe()),i;if(i===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ir(e,Ft,rs),Ut(e,qe()),null}function lp(e,t){var i=pe;pe|=1;try{return e(t)}finally{pe=i,pe===0&&(En=qe()+500,kc&&Xs())}}function br(e){Ls!==null&&Ls.tag===0&&!(pe&6)&&vn();var t=pe;pe|=1;var i=mi.transition,s=ve;try{if(mi.transition=null,ve=1,e)return e()}finally{ve=s,mi.transition=i,pe=t,!(pe&6)&&Xs()}}function cp(){Jt=nn.current,Ne(nn)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,_C(i)),Je!==null)for(i=Je.return;i!==null;){var s=i;switch(Vf(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Hl();break;case 3:Cn(),Ne(Vt),Ne(Tt),Jf();break;case 5:Zf(s);break;case 4:Cn();break;case 13:Ne(Ae);break;case 19:Ne(Ae);break;case 10:qf(s.type._context);break;case 22:case 23:cp()}i=i.return}if(dt=e,Je=e=Vs(e.current,null),wt=Jt=t,st=0,ea=null,op=Pc=Sr=0,Ft=Po=null,ar!==null){for(t=0;t<ar.length;t++)if(i=ar[t],s=i.interleaved,s!==null){i.interleaved=null;var r=s.next,n=i.pending;if(n!==null){var o=n.next;n.next=r,s.next=o}i.pending=s}ar=null}return e}function My(e,t){do{var i=Je;try{if(Kf(),fl.current=Zl,Xl){for(var s=Oe.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Xl=!1}if(wr=0,lt=it=Oe=null,No=!1,Zo=0,np.current=null,i===null||i.return===null){st=1,ea=t,Je=null;break}e:{var n=e,o=i.return,a=i,l=t;if(t=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Hg(o);if(m!==null){m.flags&=-257,Vg(m,o,a,n,t),m.mode&1&&Fg(n,c,t),t=m,l=c;var _=t.updateQueue;if(_===null){var v=new Set;v.add(l),t.updateQueue=v}else _.add(l);break e}else{if(!(t&1)){Fg(n,c,t),hp();break e}l=Error(A(426))}}else if(Pe&&a.mode&1){var b=Hg(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Vg(b,o,a,n,t),Wf(kn(l,a));break e}}n=l=kn(l,a),st!==4&&(st=2),Po===null?Po=[n]:Po.push(n),n=o;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t;var g=fy(n,l,t);Ag(n,g);break e;case 1:a=l;var y=n.type,x=n.stateNode;if(!(n.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Fs===null||!Fs.has(x)))){n.flags|=65536,t&=-t,n.lanes|=t;var C=py(n,a,t);Ag(n,C);break e}}n=n.return}while(n!==null)}Ly(i)}catch(k){t=k,Je===i&&i!==null&&(Je=i=i.return);continue}break}while(!0)}function jy(){var e=Jl.current;return Jl.current=Zl,e===null?Zl:e}function hp(){(st===0||st===3||st===2)&&(st=4),dt===null||!(Sr&268435455)&&!(Pc&268435455)||js(dt,wt)}function tc(e,t){var i=pe;pe|=2;var s=jy();(dt!==e||wt!==t)&&(rs=null,mr(e,t));do try{HC();break}catch(r){My(e,r)}while(!0);if(Kf(),pe=i,Jl.current=s,Je!==null)throw Error(A(261));return dt=null,wt=0,st}function HC(){for(;Je!==null;)Dy(Je)}function VC(){for(;Je!==null&&!p2();)Dy(Je)}function Dy(e){var t=Ay(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Ly(e):Je=t,np.current=null}function Ly(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=BC(i,t),i!==null){i.flags&=32767,Je=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,Je=null;return}}else if(i=AC(i,t,Jt),i!==null){Je=i;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);st===0&&(st=5)}function ir(e,t,i){var s=ve,r=mi.transition;try{mi.transition=null,ve=1,WC(e,t,i,s)}finally{mi.transition=r,ve=s}return null}function WC(e,t,i,s){do vn();while(Ls!==null);if(pe&6)throw Error(A(327));i=e.finishedWork;var r=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var n=i.lanes|i.childLanes;if(C2(e,n),e===dt&&(Je=dt=null,wt=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Ga||(Ga=!0,By(Bl,function(){return vn(),null})),n=(i.flags&15990)!==0,i.subtreeFlags&15990||n){n=mi.transition,mi.transition=null;var o=ve;ve=1;var a=pe;pe|=4,np.current=null,IC(e,i),Ny(i,e),hC(Vu),Il=!!Hu,Vu=Hu=null,e.current=i,$C(i),m2(),pe=a,ve=o,mi.transition=n}else e.current=i;if(Ga&&(Ga=!1,Ls=e,ec=r),n=e.pendingLanes,n===0&&(Fs=null),v2(i.stateNode),Ut(e,qe()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],s(r.value,{componentStack:r.stack,digest:r.digest});if(Ql)throw Ql=!1,e=cd,cd=null,e;return ec&1&&e.tag!==0&&vn(),n=e.pendingLanes,n&1?e===hd?Mo++:(Mo=0,hd=e):Mo=0,Xs(),null}function vn(){if(Ls!==null){var e=f1(ec),t=mi.transition,i=ve;try{if(mi.transition=null,ve=16>e?16:e,Ls===null)var s=!1;else{if(e=Ls,Ls=null,ec=0,pe&6)throw Error(A(331));var r=pe;for(pe|=4,Y=e.current;Y!==null;){var n=Y,o=n.child;if(Y.flags&16){var a=n.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:To(8,d,n)}var f=d.child;if(f!==null)f.return=d,Y=f;else for(;Y!==null;){d=Y;var p=d.sibling,m=d.return;if(Cy(d),d===c){Y=null;break}if(p!==null){p.return=m,Y=p;break}Y=m}}}var _=n.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Y=n}}if(n.subtreeFlags&2064&&o!==null)o.return=n,Y=o;else e:for(;Y!==null;){if(n=Y,n.flags&2048)switch(n.tag){case 0:case 11:case 15:To(9,n,n.return)}var g=n.sibling;if(g!==null){g.return=n.return,Y=g;break e}Y=n.return}}var y=e.current;for(Y=y;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tc(9,a)}}catch(k){He(a,a.return,k)}if(a===o){Y=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Y=C;break e}Y=a.return}}if(pe=r,Xs(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(xc,e)}catch{}s=!0}return s}finally{ve=i,mi.transition=t}}return!1}function i_(e,t,i){t=kn(i,t),t=fy(e,t,1),e=zs(e,t,1),t=Rt(),e!==null&&(da(e,1,t),Ut(e,t))}function He(e,t,i){if(e.tag===3)i_(e,e,i);else for(;t!==null;){if(t.tag===3){i_(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fs===null||!Fs.has(s))){e=kn(i,e),e=py(t,e,1),t=zs(t,e,1),e=Rt(),t!==null&&(da(t,1,e),Ut(t,e));break}}t=t.return}}function UC(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&i,dt===e&&(wt&i)===i&&(st===4||st===3&&(wt&130023424)===wt&&500>qe()-ap?mr(e,0):op|=i),Ut(e,t)}function Ry(e,t){t===0&&(e.mode&1?(t=$a,$a<<=1,!($a&130023424)&&($a=4194304)):t=1);var i=Rt();e=ds(e,t),e!==null&&(da(e,t,i),Ut(e,i))}function KC(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ry(e,i)}function qC(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(A(314))}s!==null&&s.delete(t),Ry(e,i)}var Ay;Ay=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Ht=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ht=!1,RC(e,t,i);Ht=!!(e.flags&131072)}else Ht=!1,Pe&&t.flags&1048576&&$1(t,Ul,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ml(e,t),e=t.pendingProps;var r=wn(t,Tt.current);_n(t,i),r=ep(null,t,s,e,r,i);var n=tp();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(s)?(n=!0,Vl(t)):n=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Gf(t),r.updater=Nc,t.stateNode=r,r._reactInternals=t,Ju(t,s,e,i),t=td(null,t,s,!0,n,i)):(t.tag=0,Pe&&n&&Hf(t),jt(null,t,r,i),t=t.child),t;case 16:s=t.elementType;e:{switch(ml(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=GC(s),e=Ti(s,e),r){case 0:t=ed(null,t,s,e,i);break e;case 1:t=Kg(null,t,s,e,i);break e;case 11:t=Wg(null,t,s,e,i);break e;case 14:t=Ug(null,t,s,Ti(s.type,e),i);break e}throw Error(A(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ti(s,r),ed(e,t,s,r,i);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ti(s,r),Kg(e,t,s,r,i);case 3:e:{if(vy(t),e===null)throw Error(A(387));s=t.pendingProps,n=t.memoizedState,r=n.element,U1(e,t),Yl(t,s,null,i);var o=t.memoizedState;if(s=o.element,n.isDehydrated)if(n={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=n,t.memoizedState=n,t.flags&256){r=kn(Error(A(423)),t),t=qg(e,t,s,i,r);break e}else if(s!==r){r=kn(Error(A(424)),t),t=qg(e,t,s,i,r);break e}else for(Qt=$s(t.stateNode.containerInfo.firstChild),ei=t,Pe=!0,Mi=null,i=V1(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sn(),s===r){t=fs(e,t,i);break e}jt(e,t,s,i)}t=t.child}return t;case 5:return K1(t),e===null&&Gu(t),s=t.type,r=t.pendingProps,n=e!==null?e.memoizedProps:null,o=r.children,Wu(s,r)?o=null:n!==null&&Wu(s,n)&&(t.flags|=32),_y(e,t),jt(e,t,o,i),t.child;case 6:return e===null&&Gu(t),null;case 13:return yy(e,t,i);case 4:return Xf(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=bn(t,null,s,i):jt(e,t,s,i),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ti(s,r),Wg(e,t,s,r,i);case 7:return jt(e,t,t.pendingProps,i),t.child;case 8:return jt(e,t,t.pendingProps.children,i),t.child;case 12:return jt(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,n=t.memoizedProps,o=r.value,be(Kl,s._currentValue),s._currentValue=o,n!==null)if(Ai(n.value,o)){if(n.children===r.children&&!Vt.current){t=fs(e,t,i);break e}}else for(n=t.child,n!==null&&(n.return=t);n!==null;){var a=n.dependencies;if(a!==null){o=n.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(n.tag===1){l=cs(-1,i&-i),l.tag=2;var c=n.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}n.lanes|=i,l=n.alternate,l!==null&&(l.lanes|=i),Xu(n.return,i,t),a.lanes|=i;break}l=l.next}}else if(n.tag===10)o=n.type===t.type?null:n.child;else if(n.tag===18){if(o=n.return,o===null)throw Error(A(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),Xu(o,i,t),o=n.sibling}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===t){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}jt(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,_n(t,i),r=vi(r),s=s(r),t.flags|=1,jt(e,t,s,i),t.child;case 14:return s=t.type,r=Ti(s,t.pendingProps),r=Ti(s.type,r),Ug(e,t,s,r,i);case 15:return my(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ti(s,r),ml(e,t),t.tag=1,Wt(s)?(e=!0,Vl(t)):e=!1,_n(t,i),dy(t,s,r),Ju(t,s,r,i),td(null,t,s,!0,e,i);case 19:return xy(e,t,i);case 22:return gy(e,t,i)}throw Error(A(156,t.tag))};function By(e,t){return c1(e,t)}function YC(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(e,t,i,s){return new YC(e,t,i,s)}function up(e){return e=e.prototype,!(!e||!e.isReactComponent)}function GC(e){if(typeof e=="function")return up(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mf)return 11;if(e===jf)return 14}return 2}function Vs(e,t){var i=e.alternate;return i===null?(i=fi(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function vl(e,t,i,s,r,n){var o=2;if(s=e,typeof e=="function")up(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yr:return gr(i.children,r,n,t);case Pf:o=8,r|=8;break;case Su:return e=fi(12,i,t,r|2),e.elementType=Su,e.lanes=n,e;case bu:return e=fi(13,i,t,r),e.elementType=bu,e.lanes=n,e;case Cu:return e=fi(19,i,t,r),e.elementType=Cu,e.lanes=n,e;case Kv:return Mc(i,r,n,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wv:o=10;break e;case Uv:o=9;break e;case Mf:o=11;break e;case jf:o=14;break e;case Ns:o=16,s=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=fi(o,i,t,r),t.elementType=e,t.type=s,t.lanes=n,t}function gr(e,t,i,s){return e=fi(7,e,s,t),e.lanes=i,e}function Mc(e,t,i,s){return e=fi(22,e,s,t),e.elementType=Kv,e.lanes=i,e.stateNode={isHidden:!1},e}function Oh(e,t,i){return e=fi(6,e,null,t),e.lanes=i,e}function Ih(e,t,i){return t=fi(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function XC(e,t,i,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vh(0),this.expirationTimes=vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dp(e,t,i,s,r,n,o,a,l){return e=new XC(e,t,i,a,l),t===1?(t=1,n===!0&&(t|=8)):t=0,n=fi(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(n),e}function ZC(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function Oy(e){if(!e)return Ks;e=e._reactInternals;e:{if(Nr(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var i=e.type;if(Wt(i))return O1(e,i,t)}return t}function Iy(e,t,i,s,r,n,o,a,l){return e=dp(i,s,!0,e,r,n,o,a,l),e.context=Oy(null),i=e.current,s=Rt(),r=Hs(i),n=cs(s,r),n.callback=t??null,zs(i,n,r),e.current.lanes=r,da(e,r,s),Ut(e,s),e}function jc(e,t,i,s){var r=t.current,n=Rt(),o=Hs(r);return i=Oy(i),t.context===null?t.context=i:t.pendingContext=i,t=cs(n,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zs(r,t,o),e!==null&&(Di(e,r,o,n),dl(e,r,o)),o}function ic(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function s_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function fp(e,t){s_(e,t),(e=e.alternate)&&s_(e,t)}function JC(){return null}var $y=typeof reportError=="function"?reportError:function(e){console.error(e)};function pp(e){this._internalRoot=e}Dc.prototype.render=pp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));jc(e,t,null,null)};Dc.prototype.unmount=pp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;br(function(){jc(null,e,null,null)}),t[us]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=g1();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ms.length&&t!==0&&t<Ms[i].priority;i++);Ms.splice(i,0,e),i===0&&v1(e)}};function mp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function r_(){}function QC(e,t,i,s,r){if(r){if(typeof s=="function"){var n=s;s=function(){var c=ic(o);n.call(c)}}var o=Iy(t,s,e,0,null,!1,!1,"",r_);return e._reactRootContainer=o,e[us]=o.current,Ko(e.nodeType===8?e.parentNode:e),br(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=ic(l);a.call(c)}}var l=dp(e,0,!1,null,null,!1,!1,"",r_);return e._reactRootContainer=l,e[us]=l.current,Ko(e.nodeType===8?e.parentNode:e),br(function(){jc(t,l,i,s)}),l}function Rc(e,t,i,s,r){var n=i._reactRootContainer;if(n){var o=n;if(typeof r=="function"){var a=r;r=function(){var l=ic(o);a.call(l)}}jc(t,o,e,r)}else o=QC(i,t,e,r,s);return ic(o)}p1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=po(t.pendingLanes);i!==0&&(Rf(t,i|1),Ut(t,qe()),!(pe&6)&&(En=qe()+500,Xs()))}break;case 13:br(function(){var s=ds(e,1);if(s!==null){var r=Rt();Di(s,e,1,r)}}),fp(e,1)}};Af=function(e){if(e.tag===13){var t=ds(e,134217728);if(t!==null){var i=Rt();Di(t,e,134217728,i)}fp(e,134217728)}};m1=function(e){if(e.tag===13){var t=Hs(e),i=ds(e,t);if(i!==null){var s=Rt();Di(i,e,t,s)}fp(e,t)}};g1=function(){return ve};_1=function(e,t){var i=ve;try{return ve=e,t()}finally{ve=i}};Ru=function(e,t,i){switch(t){case"input":if(Nu(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var r=Cc(s);if(!r)throw Error(A(90));Yv(s),Nu(s,r)}}}break;case"textarea":Xv(e,i);break;case"select":t=i.value,t!=null&&fn(e,!!i.multiple,t,!1)}};s1=lp;r1=br;var e5={usingClientEntryPoint:!1,Events:[pa,Jr,Cc,t1,i1,lp]},so={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t5={bundleType:so.bundleType,version:so.version,rendererPackageName:so.rendererPackageName,rendererConfig:so.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=a1(e),e===null?null:e.stateNode},findFiberByHostInstance:so.findFiberByHostInstance||JC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{xc=Xa.inject(t5),Yi=Xa}catch{}}ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e5;ii.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(t))throw Error(A(200));return ZC(e,t,null,i)};ii.createRoot=function(e,t){if(!mp(e))throw Error(A(299));var i=!1,s="",r=$y;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=dp(e,1,!1,null,null,i,!1,s,r),e[us]=t.current,Ko(e.nodeType===8?e.parentNode:e),new pp(t)};ii.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=a1(t),e=e===null?null:e.stateNode,e};ii.flushSync=function(e){return br(e)};ii.hydrate=function(e,t,i){if(!Lc(t))throw Error(A(200));return Rc(null,e,t,!0,i)};ii.hydrateRoot=function(e,t,i){if(!mp(e))throw Error(A(405));var s=i!=null&&i.hydratedSources||null,r=!1,n="",o=$y;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),t=Iy(t,null,e,1,i??null,r,!1,n,o),e[us]=t.current,Ko(e),s)for(e=0;e<s.length;e++)i=s[e],r=i._getVersion,r=r(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new Dc(t)};ii.render=function(e,t,i){if(!Lc(t))throw Error(A(200));return Rc(null,e,t,!1,i)};ii.unmountComponentAtNode=function(e){if(!Lc(e))throw Error(A(40));return e._reactRootContainer?(br(function(){Rc(null,null,e,!1,function(){e._reactRootContainer=null,e[us]=null})}),!0):!1};ii.unstable_batchedUpdates=lp;ii.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!Lc(i))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return Rc(e,t,i,!1,s)};ii.version="18.3.1-next-f1338f8080-20240426";function zy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zy)}catch(e){console.error(e)}}zy(),zv.exports=ii;var i5=zv.exports,Fy,n_=i5;Fy=n_.createRoot,n_.hydrateRoot;const gp=S.createContext({});function _p(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const Hy=typeof window<"u",Vy=Hy?S.useLayoutEffect:S.useEffect,Ac=S.createContext(null);function vp(e,t){e.indexOf(t)===-1&&e.push(t)}function sc(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}const Ji=(e,t,i)=>i>t?t:i<e?e:i;let yp=()=>{};const ps={},Wy=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Uy(e){return typeof e=="object"&&e!==null}const Ky=e=>/^0[^.\s]+$/u.test(e);function qy(e){let t;return()=>(t===void 0&&(t=e()),t)}const gi=e=>e,s5=(e,t)=>i=>t(e(i)),ga=(...e)=>e.reduce(s5),ta=(e,t,i)=>{const s=t-e;return s===0?1:(i-e)/s};class xp{constructor(){this.subscriptions=[]}add(t){return vp(this.subscriptions,t),()=>sc(this.subscriptions,t)}notify(t,i,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,i,s);else for(let n=0;n<r;n++){const o=this.subscriptions[n];o&&o(t,i,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Li=e=>e*1e3,pi=e=>e/1e3;function Yy(e,t){return t?e*(1e3/t):0}const Gy=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,r5=1e-7,n5=12;function o5(e,t,i,s,r){let n,o,a=0;do o=t+(i-t)/2,n=Gy(o,s,r)-e,n>0?i=o:t=o;while(Math.abs(n)>r5&&++a<n5);return o}function _a(e,t,i,s){if(e===t&&i===s)return gi;const r=n=>o5(n,0,1,e,i);return n=>n===0||n===1?n:Gy(r(n),t,s)}const Xy=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Zy=e=>t=>1-e(1-t),Jy=_a(.33,1.53,.69,.99),wp=Zy(Jy),Qy=Xy(wp),ex=e=>(e*=2)<1?.5*wp(e):.5*(2-Math.pow(2,-10*(e-1))),Sp=e=>1-Math.sin(Math.acos(e)),tx=Zy(Sp),ix=Xy(Sp),a5=_a(.42,0,1,1),l5=_a(0,0,.58,1),sx=_a(.42,0,.58,1),c5=e=>Array.isArray(e)&&typeof e[0]!="number",rx=e=>Array.isArray(e)&&typeof e[0]=="number",h5={linear:gi,easeIn:a5,easeInOut:sx,easeOut:l5,circIn:Sp,circInOut:ix,circOut:tx,backIn:wp,backInOut:Qy,backOut:Jy,anticipate:ex},u5=e=>typeof e=="string",o_=e=>{if(rx(e)){yp(e.length===4);const[t,i,s,r]=e;return _a(t,i,s,r)}else if(u5(e))return h5[e];return e},Za=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function d5(e,t){let i=new Set,s=new Set,r=!1,n=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(c.schedule(d),e()),d(a)}const c={schedule:(d,f=!1,p=!1)=>{const _=p&&r?i:s;return f&&o.add(d),_.has(d)||_.add(d),d},cancel:d=>{s.delete(d),o.delete(d)},process:d=>{if(a=d,r){n=!0;return}r=!0,[i,s]=[s,i],i.forEach(l),i.clear(),r=!1,n&&(n=!1,c.process(d))}};return c}const f5=40;function nx(e,t){let i=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},n=()=>i=!0,o=Za.reduce((x,C)=>(x[C]=d5(n),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:f,preRender:p,render:m,postRender:_}=o,v=()=>{const x=ps.useManualTiming?r.timestamp:performance.now();i=!1,ps.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(x-r.timestamp,f5),1)),r.timestamp=x,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),f.process(r),p.process(r),m.process(r),_.process(r),r.isProcessing=!1,i&&t&&(s=!1,e(v))},b=()=>{i=!0,s=!0,r.isProcessing||e(v)};return{schedule:Za.reduce((x,C)=>{const k=o[C];return x[C]=(T,L=!1,P=!1)=>(i||b(),k.schedule(T,L,P)),x},{}),cancel:x=>{for(let C=0;C<Za.length;C++)o[Za[C]].cancel(x)},state:r,steps:o}}const{schedule:Ce,cancel:qs,state:vt,steps:$h}=nx(typeof requestAnimationFrame<"u"?requestAnimationFrame:gi,!0);let yl;function p5(){yl=void 0}const Dt={now:()=>(yl===void 0&&Dt.set(vt.isProcessing||ps.useManualTiming?vt.timestamp:performance.now()),yl),set:e=>{yl=e,queueMicrotask(p5)}},ox=e=>t=>typeof t=="string"&&t.startsWith(e),ax=ox("--"),m5=ox("var(--"),bp=e=>m5(e)?g5.test(e.split("/*")[0].trim()):!1,g5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function a_(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Dn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ia={...Dn,transform:e=>Ji(0,1,e)},Ja={...Dn,default:1},jo=e=>Math.round(e*1e5)/1e5,Cp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _5(e){return e==null}const v5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kp=(e,t)=>i=>!!(typeof i=="string"&&v5.test(i)&&i.startsWith(e)||t&&!_5(i)&&Object.prototype.hasOwnProperty.call(i,t)),lx=(e,t,i)=>s=>{if(typeof s!="string")return s;const[r,n,o,a]=s.match(Cp);return{[e]:parseFloat(r),[t]:parseFloat(n),[i]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},y5=e=>Ji(0,255,e),zh={...Dn,transform:e=>Math.round(y5(e))},cr={test:kp("rgb","red"),parse:lx("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:s=1})=>"rgba("+zh.transform(e)+", "+zh.transform(t)+", "+zh.transform(i)+", "+jo(ia.transform(s))+")"};function x5(e){let t="",i="",s="",r="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,i+=i,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const fd={test:kp("#"),parse:x5,transform:cr.transform},va=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ks=va("deg"),Xi=va("%"),G=va("px"),w5=va("vh"),S5=va("vw"),l_={...Xi,parse:e=>Xi.parse(e)/100,transform:e=>Xi.transform(e*100)},on={test:kp("hsl","hue"),parse:lx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:s=1})=>"hsla("+Math.round(e)+", "+Xi.transform(jo(t))+", "+Xi.transform(jo(i))+", "+jo(ia.transform(s))+")"},Xe={test:e=>cr.test(e)||fd.test(e)||on.test(e),parse:e=>cr.test(e)?cr.parse(e):on.test(e)?on.parse(e):fd.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?cr.transform(e):on.transform(e),getAnimatableNone:e=>{const t=Xe.parse(e);return t.alpha=0,Xe.transform(t)}},b5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function C5(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Cp))==null?void 0:t.length)||0)+(((i=e.match(b5))==null?void 0:i.length)||0)>0}const cx="number",hx="color",k5="var",E5="var(",c_="${}",N5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sa(e){const t=e.toString(),i=[],s={color:[],number:[],var:[]},r=[];let n=0;const a=t.replace(N5,l=>(Xe.test(l)?(s.color.push(n),r.push(hx),i.push(Xe.parse(l))):l.startsWith(E5)?(s.var.push(n),r.push(k5),i.push(l)):(s.number.push(n),r.push(cx),i.push(parseFloat(l))),++n,c_)).split(c_);return{values:i,split:a,indexes:s,types:r}}function ux(e){return sa(e).values}function dx(e){const{split:t,types:i}=sa(e),s=t.length;return r=>{let n="";for(let o=0;o<s;o++)if(n+=t[o],r[o]!==void 0){const a=i[o];a===cx?n+=jo(r[o]):a===hx?n+=Xe.transform(r[o]):n+=r[o]}return n}}const T5=e=>typeof e=="number"?0:Xe.test(e)?Xe.getAnimatableNone(e):e;function P5(e){const t=ux(e);return dx(e)(t.map(T5))}const Ri={test:C5,parse:ux,createTransformer:dx,getAnimatableNone:P5};function Fh(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function M5({hue:e,saturation:t,lightness:i,alpha:s}){e/=360,t/=100,i/=100;let r=0,n=0,o=0;if(!t)r=n=o=i;else{const a=i<.5?i*(1+t):i+t-i*t,l=2*i-a;r=Fh(l,a,e+1/3),n=Fh(l,a,e),o=Fh(l,a,e-1/3)}return{red:Math.round(r*255),green:Math.round(n*255),blue:Math.round(o*255),alpha:s}}function rc(e,t){return i=>i>0?t:e}const Be=(e,t,i)=>e+(t-e)*i,Hh=(e,t,i)=>{const s=e*e,r=i*(t*t-s)+s;return r<0?0:Math.sqrt(r)},j5=[fd,cr,on],D5=e=>j5.find(t=>t.test(e));function h_(e){const t=D5(e);if(!t)return!1;let i=t.parse(e);return t===on&&(i=M5(i)),i}const u_=(e,t)=>{const i=h_(e),s=h_(t);if(!i||!s)return rc(e,t);const r={...i};return n=>(r.red=Hh(i.red,s.red,n),r.green=Hh(i.green,s.green,n),r.blue=Hh(i.blue,s.blue,n),r.alpha=Be(i.alpha,s.alpha,n),cr.transform(r))},pd=new Set(["none","hidden"]);function L5(e,t){return pd.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function R5(e,t){return i=>Be(e,t,i)}function Ep(e){return typeof e=="number"?R5:typeof e=="string"?bp(e)?rc:Xe.test(e)?u_:O5:Array.isArray(e)?fx:typeof e=="object"?Xe.test(e)?u_:A5:rc}function fx(e,t){const i=[...e],s=i.length,r=e.map((n,o)=>Ep(n)(n,t[o]));return n=>{for(let o=0;o<s;o++)i[o]=r[o](n);return i}}function A5(e,t){const i={...e,...t},s={};for(const r in i)e[r]!==void 0&&t[r]!==void 0&&(s[r]=Ep(e[r])(e[r],t[r]));return r=>{for(const n in s)i[n]=s[n](r);return i}}function B5(e,t){const i=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const n=t.types[r],o=e.indexes[n][s[n]],a=e.values[o]??0;i[r]=a,s[n]++}return i}const O5=(e,t)=>{const i=Ri.createTransformer(t),s=sa(e),r=sa(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?pd.has(e)&&!r.values.length||pd.has(t)&&!s.values.length?L5(e,t):ga(fx(B5(s,r),r.values),i):rc(e,t)};function px(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Be(e,t,i):Ep(e)(e,t)}const I5=e=>{const t=({timestamp:i})=>e(i);return{start:(i=!0)=>Ce.update(t,i),stop:()=>qs(t),now:()=>vt.isProcessing?vt.timestamp:Dt.now()}},mx=(e,t,i=10)=>{let s="";const r=Math.max(Math.round(t/i),2);for(let n=0;n<r;n++)s+=Math.round(e(n/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},nc=2e4;function Np(e){let t=0;const i=50;let s=e.next(t);for(;!s.done&&t<nc;)t+=i,s=e.next(t);return t>=nc?1/0:t}function $5(e,t=100,i){const s=i({...e,keyframes:[0,t]}),r=Math.min(Np(s),nc);return{type:"keyframes",ease:n=>s.next(r*n).value/t,duration:pi(r)}}const z5=5;function gx(e,t,i){const s=Math.max(t-z5,0);return Yy(i-e(s),t-s)}const ze={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vh=.001;function F5({duration:e=ze.duration,bounce:t=ze.bounce,velocity:i=ze.velocity,mass:s=ze.mass}){let r,n,o=1-t;o=Ji(ze.minDamping,ze.maxDamping,o),e=Ji(ze.minDuration,ze.maxDuration,pi(e)),o<1?(r=c=>{const d=c*o,f=d*e,p=d-i,m=md(c,o),_=Math.exp(-f);return Vh-p/m*_},n=c=>{const f=c*o*e,p=f*i+i,m=Math.pow(o,2)*Math.pow(c,2)*e,_=Math.exp(-f),v=md(Math.pow(c,2),o);return(-r(c)+Vh>0?-1:1)*((p-m)*_)/v}):(r=c=>{const d=Math.exp(-c*e),f=(c-i)*e+1;return-Vh+d*f},n=c=>{const d=Math.exp(-c*e),f=(i-c)*(e*e);return d*f});const a=5/e,l=V5(r,n,a);if(e=Li(e),isNaN(l))return{stiffness:ze.stiffness,damping:ze.damping,duration:e};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:o*2*Math.sqrt(s*c),duration:e}}}const H5=12;function V5(e,t,i){let s=i;for(let r=1;r<H5;r++)s=s-e(s)/t(s);return s}function md(e,t){return e*Math.sqrt(1-t*t)}const W5=["duration","bounce"],U5=["stiffness","damping","mass"];function d_(e,t){return t.some(i=>e[i]!==void 0)}function K5(e){let t={velocity:ze.velocity,stiffness:ze.stiffness,damping:ze.damping,mass:ze.mass,isResolvedFromDuration:!1,...e};if(!d_(e,U5)&&d_(e,W5))if(t.velocity=0,e.visualDuration){const i=e.visualDuration,s=2*Math.PI/(i*1.2),r=s*s,n=2*Ji(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:ze.mass,stiffness:r,damping:n}}else{const i=F5({...e,velocity:0});t={...t,...i,mass:ze.mass},t.isResolvedFromDuration=!0}return t}function oc(e=ze.visualDuration,t=ze.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=i;const n=i.keyframes[0],o=i.keyframes[i.keyframes.length-1],a={done:!1,value:n},{stiffness:l,damping:c,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=K5({...i,velocity:-pi(i.velocity||0)}),_=p||0,v=c/(2*Math.sqrt(l*d)),b=o-n,g=pi(Math.sqrt(l/d)),y=Math.abs(b)<5;s||(s=y?ze.restSpeed.granular:ze.restSpeed.default),r||(r=y?ze.restDelta.granular:ze.restDelta.default);let x;if(v<1){const k=md(g,v);x=T=>{const L=Math.exp(-v*g*T);return o-L*((_+v*g*b)/k*Math.sin(k*T)+b*Math.cos(k*T))}}else if(v===1)x=k=>o-Math.exp(-g*k)*(b+(_+g*b)*k);else{const k=g*Math.sqrt(v*v-1);x=T=>{const L=Math.exp(-v*g*T),P=Math.min(k*T,300);return o-L*((_+v*g*b)*Math.sinh(P)+k*b*Math.cosh(P))/k}}const C={calculatedDuration:m&&f||null,next:k=>{const T=x(k);if(m)a.done=k>=f;else{let L=k===0?_:0;v<1&&(L=k===0?Li(_):gx(x,k,T));const P=Math.abs(L)<=s,q=Math.abs(o-T)<=r;a.done=P&&q}return a.value=a.done?o:T,a},toString:()=>{const k=Math.min(Np(C),nc),T=mx(L=>C.next(k*L).value,k,30);return k+"ms "+T},toTransition:()=>{}};return C}oc.applyToOptions=e=>{const t=$5(e,100,oc);return e.ease=t.ease,e.duration=Li(t.duration),e.type="keyframes",e};function gd({keyframes:e,velocity:t=0,power:i=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:n=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=e[0],p={done:!1,value:f},m=P=>a!==void 0&&P<a||l!==void 0&&P>l,_=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let v=i*t;const b=f+v,g=o===void 0?b:o(b);g!==b&&(v=g-f);const y=P=>-v*Math.exp(-P/s),x=P=>g+y(P),C=P=>{const q=y(P),H=x(P);p.done=Math.abs(q)<=c,p.value=p.done?g:H};let k,T;const L=P=>{m(p.value)&&(k=P,T=oc({keyframes:[p.value,_(p.value)],velocity:gx(x,P,p.value),damping:r,stiffness:n,restDelta:c,restSpeed:d}))};return L(0),{calculatedDuration:null,next:P=>{let q=!1;return!T&&k===void 0&&(q=!0,C(P),L(P)),k!==void 0&&P>=k?T.next(P-k):(!q&&C(P),p)}}}function q5(e,t,i){const s=[],r=i||ps.mix||px,n=e.length-1;for(let o=0;o<n;o++){let a=r(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||gi:t;a=ga(l,a)}s.push(a)}return s}function Y5(e,t,{clamp:i=!0,ease:s,mixer:r}={}){const n=e.length;if(yp(n===t.length),n===1)return()=>t[0];if(n===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=q5(t,s,r),l=a.length,c=d=>{if(o&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const p=ta(e[f],e[f+1],d);return a[f](p)};return i?d=>c(Ji(e[0],e[n-1],d)):c}function G5(e,t){const i=e[e.length-1];for(let s=1;s<=t;s++){const r=ta(0,t,s);e.push(Be(i,1,r))}}function X5(e){const t=[0];return G5(t,e.length-1),t}function Z5(e,t){return e.map(i=>i*t)}function J5(e,t){return e.map(()=>t||sx).splice(0,e.length-1)}function Do({duration:e=300,keyframes:t,times:i,ease:s="easeInOut"}){const r=c5(s)?s.map(o_):o_(s),n={done:!1,value:t[0]},o=Z5(i&&i.length===t.length?i:X5(t),e),a=Y5(o,t,{ease:Array.isArray(r)?r:J5(t,r)});return{calculatedDuration:e,next:l=>(n.value=a(l),n.done=l>=e,n)}}const Q5=e=>e!==null;function Tp(e,{repeat:t,repeatType:i="loop"},s,r=1){const n=e.filter(Q5),a=r<0||t&&i!=="loop"&&t%2===1?0:n.length-1;return!a||s===void 0?n[a]:s}const ek={decay:gd,inertia:gd,tween:Do,keyframes:Do,spring:oc};function _x(e){typeof e.type=="string"&&(e.type=ek[e.type])}class Pp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,i){return this.finished.then(t,i)}}const tk=e=>e/100;class Mp extends Pp{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,r;const{motionValue:i}=this.options;i&&i.updatedAt!==Dt.now()&&this.tick(Dt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(s=this.options).onStop)==null||r.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;_x(t);const{type:i=Do,repeat:s=0,repeatDelay:r=0,repeatType:n,velocity:o=0}=t;let{keyframes:a}=t;const l=i||Do;l!==Do&&typeof a[0]!="number"&&(this.mixKeyframes=ga(tk,px(a[0],a[1])),a=[0,100]);const c=l({...t,keyframes:a});n==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Np(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=c}updateTime(t){const i=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(t,i=!1){const{generator:s,totalDuration:r,mixKeyframes:n,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:d,repeat:f,repeatType:p,repeatDelay:m,type:_,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),i?this.currentTime=t:this.updateTime(t);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let x=this.currentTime,C=s;if(f){const P=Math.min(this.currentTime,r)/a;let q=Math.floor(P),H=P%1;!H&&P>=1&&(H=1),H===1&&q--,q=Math.min(q,f+1),!!(q%2)&&(p==="reverse"?(H=1-H,m&&(H-=m/a)):p==="mirror"&&(C=o)),x=Ji(0,1,H)*a}const k=y?{done:!1,value:d[0]}:C.next(x);n&&(k.value=n(k.value));let{done:T}=k;!y&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return L&&_!==gd&&(k.value=Tp(d,this.options,b,this.speed)),v&&v(k.value),L&&this.finish(),k}then(t,i){return this.finished.then(t,i)}get duration(){return pi(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+pi(t)}get time(){return pi(this.currentTime)}set time(t){var i;t=Li(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(i=this.driver)==null||i.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Dt.now());const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=pi(this.currentTime))}play(){var r,n;if(this.isStopped)return;const{driver:t=I5,startTime:i}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(n=(r=this.options).onPlay)==null||n.call(r);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=i??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Dt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,i;this.notifyFinished(),this.teardown(),this.state="finished",(i=(t=this.options).onComplete)==null||i.call(t)}cancel(){var t,i;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(i=(t=this.options).onCancel)==null||i.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var i;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(i=this.driver)==null||i.stop(),t.observe(this)}}function ik(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const hr=e=>e*180/Math.PI,_d=e=>{const t=hr(Math.atan2(e[1],e[0]));return vd(t)},sk={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:_d,rotateZ:_d,skewX:e=>hr(Math.atan(e[1])),skewY:e=>hr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},vd=e=>(e=e%360,e<0&&(e+=360),e),f_=_d,p_=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),m_=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),rk={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:p_,scaleY:m_,scale:e=>(p_(e)+m_(e))/2,rotateX:e=>vd(hr(Math.atan2(e[6],e[5]))),rotateY:e=>vd(hr(Math.atan2(-e[2],e[0]))),rotateZ:f_,rotate:f_,skewX:e=>hr(Math.atan(e[4])),skewY:e=>hr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function yd(e){return e.includes("scale")?1:0}function xd(e,t){if(!e||e==="none")return yd(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(i)s=rk,r=i;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=sk,r=a}if(!r)return yd(t);const n=s[t],o=r[1].split(",").map(ok);return typeof n=="function"?n(o):o[n]}const nk=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return xd(i,t)};function ok(e){return parseFloat(e.trim())}const Ln=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rn=new Set(Ln),g_=e=>e===Dn||e===G,ak=new Set(["x","y","z"]),lk=Ln.filter(e=>!ak.has(e));function ck(e){const t=[];return lk.forEach(i=>{const s=e.getValue(i);s!==void 0&&(t.push([i,s.get()]),s.set(i.startsWith("scale")?1:0))}),t}const Rs={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>xd(t,"x"),y:(e,{transform:t})=>xd(t,"y")};Rs.translateX=Rs.x;Rs.translateY=Rs.y;const _r=new Set;let wd=!1,Sd=!1,bd=!1;function vx(){if(Sd){const e=Array.from(_r).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),i=new Map;t.forEach(s=>{const r=ck(s);r.length&&(i.set(s,r),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const r=i.get(s);r&&r.forEach(([n,o])=>{var a;(a=s.getValue(n))==null||a.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Sd=!1,wd=!1,_r.forEach(e=>e.complete(bd)),_r.clear()}function yx(){_r.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Sd=!0)})}function hk(){bd=!0,yx(),vx(),bd=!1}class jp{constructor(t,i,s,r,n,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=s,this.motionValue=r,this.element=n,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(_r.add(this),wd||(wd=!0,Ce.read(yx),Ce.resolveKeyframes(vx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:s,motionValue:r}=this;if(t[0]===null){const n=r==null?void 0:r.get(),o=t[t.length-1];if(n!==void 0)t[0]=n;else if(s&&i){const a=s.readValue(i,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),r&&n===void 0&&r.set(t[0])}ik(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),_r.delete(this)}cancel(){this.state==="scheduled"&&(_r.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uk=e=>e.startsWith("--");function dk(e,t,i){uk(t)?e.style.setProperty(t,i):e.style[t]=i}const fk={};function xx(e,t){const i=qy(e);return()=>fk[t]??i()}const pk=xx(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),wx=xx(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),go=([e,t,i,s])=>`cubic-bezier(${e}, ${t}, ${i}, ${s})`,__={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:go([0,.65,.55,1]),circOut:go([.55,0,1,.45]),backIn:go([.31,.01,.66,-.59]),backOut:go([.33,1.53,.69,.99])};function Sx(e,t){if(e)return typeof e=="function"?wx()?mx(e,t):"ease-out":rx(e)?go(e):Array.isArray(e)?e.map(i=>Sx(i,t)||__.easeOut):__[e]}function mk(e,t,i,{delay:s=0,duration:r=300,repeat:n=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[t]:i};l&&(d.offset=l);const f=Sx(a,r);Array.isArray(f)&&(d.easing=f);const p={delay:s,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:n+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),e.animate(d,p)}function bx(e){return typeof e=="function"&&"applyToOptions"in e}function gk({type:e,...t}){return bx(e)&&wx()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Cx extends Pp{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:i,name:s,keyframes:r,pseudoElement:n,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!n,this.allowFlatten=o,this.options=t,yp(typeof t.type!="string");const c=gk(t);this.animation=mk(i,s,r,c,n),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const d=Tp(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):dk(i,s,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,i;(i=(t=this.animation).finish)==null||i.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var i,s,r;const t=(i=this.options)==null?void 0:i.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((r=(s=this.animation).commitStyles)==null||r.call(s))}get duration(){var i,s;const t=((s=(i=this.animation.effect)==null?void 0:i.getComputedTiming)==null?void 0:s.call(i).duration)||0;return pi(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+pi(t)}get time(){return pi(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Li(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:i}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&pk()?(this.animation.timeline=t,gi):i(this)}}const kx={anticipate:ex,backInOut:Qy,circInOut:ix};function _k(e){return e in kx}function vk(e){typeof e.ease=="string"&&_k(e.ease)&&(e.ease=kx[e.ease])}const Wh=10;class yk extends Cx{constructor(t){vk(t),_x(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:i,onUpdate:s,onComplete:r,element:n,...o}=this.options;if(!i)return;if(t!==void 0){i.set(t);return}const a=new Mp({...o,autoplay:!1}),l=Math.max(Wh,Dt.now()-this.startTime),c=Ji(0,Wh,l-Wh);i.setWithVelocity(a.sample(Math.max(0,l-c)).value,a.sample(l).value,c),a.stop()}}const v_=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ri.test(e)||e==="0")&&!e.startsWith("url("));function xk(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function wk(e,t,i,s){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const n=e[e.length-1],o=v_(r,t),a=v_(n,t);return!o||!a?!1:xk(e)||(i==="spring"||bx(i))&&s}function Cd(e){e.duration=0,e.type="keyframes"}const Sk=new Set(["opacity","clipPath","filter","transform"]),bk=qy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ck(e){var d;const{motionValue:t,name:i,repeatDelay:s,repeatType:r,damping:n,type:o}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return bk()&&i&&Sk.has(i)&&(i!=="transform"||!c)&&!l&&!s&&r!=="mirror"&&n!==0&&o!=="inertia"}const kk=40;class Ek extends Pp{constructor({autoplay:t=!0,delay:i=0,type:s="keyframes",repeat:r=0,repeatDelay:n=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...f}){var _;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Dt.now();const p={autoplay:t,delay:i,type:s,repeat:r,repeatDelay:n,repeatType:o,name:l,motionValue:c,element:d,...f},m=(d==null?void 0:d.KeyframeResolver)||jp;this.keyframeResolver=new m(a,(v,b,g)=>this.onKeyframesResolved(v,b,p,!g),l,c,d),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(t,i,s,r){var b,g;this.keyframeResolver=void 0;const{name:n,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=s;this.resolvedAt=Dt.now(),wk(t,n,o,a)||((ps.instantAnimations||!l)&&(d==null||d(Tp(t,s,i))),t[0]=t[t.length-1],Cd(s),s.repeat=0);const p={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>kk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...s,keyframes:t},m=!c&&Ck(p),_=(g=(b=p.motionValue)==null?void 0:b.owner)==null?void 0:g.current,v=m?new yk({...p,element:_}):new Mp(p);v.finished.then(()=>{this.notifyFinished()}).catch(gi),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,i){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),hk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function Ex(e,t,i,s=0,r=1){const n=Array.from(e).sort((c,d)=>c.sortNodePosition(d)).indexOf(t),o=e.size,a=(o-1)*s;return typeof i=="function"?i(n,o):r===1?n*s:a-n*s}const Nk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Tk(e){const t=Nk.exec(e);if(!t)return[,];const[,i,s,r]=t;return[`--${i??s}`,r]}function Nx(e,t,i=1){const[s,r]=Tk(e);if(!s)return;const n=window.getComputedStyle(t).getPropertyValue(s);if(n){const o=n.trim();return Wy(o)?parseFloat(o):o}return bp(r)?Nx(r,t,i+1):r}const Pk={type:"spring",stiffness:500,damping:25,restSpeed:10},Mk=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),jk={type:"keyframes",duration:.8},Dk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Lk=(e,{keyframes:t})=>t.length>2?jk:Rn.has(e)?e.startsWith("scale")?Mk(t[1]):Pk:Dk,Rk=e=>e!==null;function Ak(e,{repeat:t,repeatType:i="loop"},s){const r=e.filter(Rk),n=t&&i!=="loop"&&t%2===1?0:r.length-1;return r[n]}function Tx(e,t){if(e!=null&&e.inherit&&t){const{inherit:i,...s}=e;return{...t,...s}}return e}function Dp(e,t){const i=(e==null?void 0:e[t])??(e==null?void 0:e.default)??e;return i!==e?Tx(i,e):i}function Bk({when:e,delay:t,delayChildren:i,staggerChildren:s,staggerDirection:r,repeat:n,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const Lp=(e,t,i,s={},r,n)=>o=>{const a=Dp(s,e)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c=c-Li(l);const d={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:p=>{t.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:n?void 0:r};Bk(a)||Object.assign(d,Lk(e,d)),d.duration&&(d.duration=Li(d.duration)),d.repeatDelay&&(d.repeatDelay=Li(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Cd(d),d.delay===0&&(f=!0)),(ps.instantAnimations||ps.skipAnimations||r!=null&&r.shouldSkipAnimations)&&(f=!0,Cd(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,f&&!n&&t.get()!==void 0){const p=Ak(d.keyframes,a);if(p!==void 0){Ce.update(()=>{d.onUpdate(p),d.onComplete()});return}}return a.isSync?new Mp(d):new Ek(d)};function y_(e){const t=[{},{}];return e==null||e.values.forEach((i,s)=>{t[0][s]=i.get(),t[1][s]=i.getVelocity()}),t}function Rp(e,t,i,s){if(typeof t=="function"){const[r,n]=y_(s);t=t(i!==void 0?i:e.custom,r,n)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,n]=y_(s);t=t(i!==void 0?i:e.custom,r,n)}return t}function yn(e,t,i){const s=e.getProps();return Rp(s,t,i!==void 0?i:s.custom,e)}const Px=new Set(["width","height","top","left","right","bottom",...Ln]),x_=30,Ok=e=>!isNaN(parseFloat(e));class Ik{constructor(t,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var n;const r=Dt.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((n=this.events.change)==null||n.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Dt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ok(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new xp);const s=this.events[t].add(i);return t==="change"?()=>{s(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,i,s){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Dt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>x_)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,x_);return Yy(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,i;(t=this.dependents)==null||t.clear(),(i=this.events.destroy)==null||i.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nn(e,t){return new Ik(e,t)}const kd=e=>Array.isArray(e);function $k(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,Nn(i))}function zk(e){return kd(e)?e[e.length-1]||0:e}function Fk(e,t){const i=yn(e,t);let{transitionEnd:s={},transition:r={},...n}=i||{};n={...n,...s};for(const o in n){const a=zk(n[o]);$k(e,o,a)}}const Nt=e=>!!(e&&e.getVelocity);function Hk(e){return!!(Nt(e)&&e.add)}function Ed(e,t){const i=e.getValue("willChange");if(Hk(i))return i.add(t);if(!i&&ps.WillChange){const s=new ps.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function Ap(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const Vk="framerAppearId",Mx="data-"+Ap(Vk);function jx(e){return e.props[Mx]}function Wk({protectedKeys:e,needsAnimating:t},i){const s=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,s}function Dx(e,t,{delay:i=0,transitionOverride:s,type:r}={}){let{transition:n,transitionEnd:o,...a}=t;const l=e.getDefaultTransition();n=n?Tx(n,l):l;const c=n==null?void 0:n.reduceMotion;s&&(n=s);const d=[],f=r&&e.animationState&&e.animationState.getState()[r];for(const p in a){const m=e.getValue(p,e.latestValues[p]??null),_=a[p];if(_===void 0||f&&Wk(f,p))continue;const v={delay:i,...Dp(n||{},p)},b=m.get();if(b!==void 0&&!m.isAnimating&&!Array.isArray(_)&&_===b&&!v.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const C=jx(e);if(C){const k=window.MotionHandoffAnimation(C,p,Ce);k!==null&&(v.startTime=k,g=!0)}}Ed(e,p);const y=c??e.shouldReduceMotion;m.start(Lp(p,m,_,y&&Px.has(p)?{type:!1}:v,e,g));const x=m.animation;x&&d.push(x)}if(o){const p=()=>Ce.update(()=>{o&&Fk(e,o)});d.length?Promise.all(d).then(p):p()}return d}function Nd(e,t,i={}){var l;const s=yn(e,t,i.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=s||{};i.transitionOverride&&(r=i.transitionOverride);const n=s?()=>Promise.all(Dx(e,s,i)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=r;return Uk(e,t,c,d,f,p,i)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,d]=a==="beforeChildren"?[n,o]:[o,n];return c().then(()=>d())}else return Promise.all([n(),o(i.delay)])}function Uk(e,t,i=0,s=0,r=0,n=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Nd(l,t,{...o,delay:i+(typeof s=="function"?0:s)+Ex(e.variantChildren,l,s,r,n)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Kk(e,t,i={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(n=>Nd(e,n,i));s=Promise.all(r)}else if(typeof t=="string")s=Nd(e,t,i);else{const r=typeof t=="function"?yn(e,t,i.custom):t;s=Promise.all(Dx(e,r,i))}return s.then(()=>{e.notify("AnimationComplete",t)})}const qk={test:e=>e==="auto",parse:e=>e},Lx=e=>t=>t.test(e),Rx=[Dn,G,Xi,ks,S5,w5,qk],w_=e=>Rx.find(Lx(e));function Yk(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Ky(e):!0}const Gk=new Set(["brightness","contrast","saturate","opacity"]);function Xk(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=i.match(Cp)||[];if(!s)return e;const r=i.replace(s,"");let n=Gk.has(t)?1:0;return s!==i&&(n*=100),t+"("+n+r+")"}const Zk=/\b([a-z-]*)\(.*?\)/gu,Td={...Ri,getAnimatableNone:e=>{const t=e.match(Zk);return t?t.map(Xk).join(" "):e}},Pd={...Ri,getAnimatableNone:e=>{const t=Ri.parse(e);return Ri.createTransformer(e)(t.map(s=>typeof s=="number"?0:typeof s=="object"?{...s,alpha:1}:s))}},S_={...Dn,transform:Math.round},Jk={rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:ks,skewX:ks,skewY:ks,distance:G,translateX:G,translateY:G,translateZ:G,x:G,y:G,z:G,perspective:G,transformPerspective:G,opacity:ia,originX:l_,originY:l_,originZ:G},Bp={borderWidth:G,borderTopWidth:G,borderRightWidth:G,borderBottomWidth:G,borderLeftWidth:G,borderRadius:G,borderTopLeftRadius:G,borderTopRightRadius:G,borderBottomRightRadius:G,borderBottomLeftRadius:G,width:G,maxWidth:G,height:G,maxHeight:G,top:G,right:G,bottom:G,left:G,inset:G,insetBlock:G,insetBlockStart:G,insetBlockEnd:G,insetInline:G,insetInlineStart:G,insetInlineEnd:G,padding:G,paddingTop:G,paddingRight:G,paddingBottom:G,paddingLeft:G,paddingBlock:G,paddingBlockStart:G,paddingBlockEnd:G,paddingInline:G,paddingInlineStart:G,paddingInlineEnd:G,margin:G,marginTop:G,marginRight:G,marginBottom:G,marginLeft:G,marginBlock:G,marginBlockStart:G,marginBlockEnd:G,marginInline:G,marginInlineStart:G,marginInlineEnd:G,fontSize:G,backgroundPositionX:G,backgroundPositionY:G,...Jk,zIndex:S_,fillOpacity:ia,strokeOpacity:ia,numOctaves:S_},Qk={...Bp,color:Xe,backgroundColor:Xe,outlineColor:Xe,fill:Xe,stroke:Xe,borderColor:Xe,borderTopColor:Xe,borderRightColor:Xe,borderBottomColor:Xe,borderLeftColor:Xe,filter:Td,WebkitFilter:Td,mask:Pd,WebkitMask:Pd},Ax=e=>Qk[e],e3=new Set([Td,Pd]);function Bx(e,t){let i=Ax(e);return e3.has(i)||(i=Ri),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const t3=new Set(["auto","none","0"]);function i3(e,t,i){let s=0,r;for(;s<e.length&&!r;){const n=e[s];typeof n=="string"&&!t3.has(n)&&sa(n).values.length&&(r=e[s]),s++}if(r&&i)for(const n of t)e[n]=Bx(i,r)}class s3 extends jp{constructor(t,i,s,r,n){super(t,i,s,r,n,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),bp(f))){const p=Nx(f,i.current);p!==void 0&&(t[d]=p),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Px.has(s)||t.length!==2)return;const[r,n]=t,o=w_(r),a=w_(n),l=a_(r),c=a_(n);if(l!==c&&Rs[s]){this.needsMeasurement=!0;return}if(o!==a)if(g_(o)&&g_(a))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else Rs[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,s=[];for(let r=0;r<t.length;r++)(t[r]===null||Yk(t[r]))&&s.push(r);s.length&&i3(t,s,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rs[s](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const r=i[i.length-1];r!==void 0&&t.getValue(s,r).jump(r,!1)}measureEndState(){var a;const{element:t,name:i,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(i);r&&r.jump(this.measuredOrigin,!1);const n=s.length-1,o=s[n];s[n]=Rs[i](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const r3=new Set(["opacity","clipPath","filter","transform"]);function Ox(e,t,i){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const r=(i==null?void 0:i[e])??s.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(s=>s!=null)}const Ix=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Md(e){return Uy(e)&&"offsetHeight"in e}const{schedule:Op}=nx(queueMicrotask,!1),Ni={x:!1,y:!1};function $x(){return Ni.x||Ni.y}function n3(e){return e==="x"||e==="y"?Ni[e]?null:(Ni[e]=!0,()=>{Ni[e]=!1}):Ni.x||Ni.y?null:(Ni.x=Ni.y=!0,()=>{Ni.x=Ni.y=!1})}function zx(e,t){const i=Ox(e),s=new AbortController,r={passive:!0,...t,signal:s.signal};return[i,r,()=>s.abort()]}function o3(e){return!(e.pointerType==="touch"||$x())}function a3(e,t,i={}){const[s,r,n]=zx(e,i);return s.forEach(o=>{let a=!1,l=!1,c;const d=()=>{o.removeEventListener("pointerleave",_)},f=b=>{c&&(c(b),c=void 0),d()},p=b=>{a=!1,window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),l&&(l=!1,f(b))},m=()=>{a=!0,window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",p,r)},_=b=>{if(b.pointerType!=="touch"){if(a){l=!0;return}f(b)}},v=b=>{if(!o3(b))return;l=!1;const g=t(o,b);typeof g=="function"&&(c=g,o.addEventListener("pointerleave",_,r))};o.addEventListener("pointerenter",v,r),o.addEventListener("pointerdown",m,r)}),n}const Fx=(e,t)=>t?e===t?!0:Fx(e,t.parentElement):!1,Ip=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,l3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function c3(e){return l3.has(e.tagName)||e.isContentEditable===!0}const h3=new Set(["INPUT","SELECT","TEXTAREA"]);function u3(e){return h3.has(e.tagName)||e.isContentEditable===!0}const xl=new WeakSet;function b_(e){return t=>{t.key==="Enter"&&e(t)}}function Uh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const d3=(e,t)=>{const i=e.currentTarget;if(!i)return;const s=b_(()=>{if(xl.has(i))return;Uh(i,"down");const r=b_(()=>{Uh(i,"up")}),n=()=>Uh(i,"cancel");i.addEventListener("keyup",r,t),i.addEventListener("blur",n,t)});i.addEventListener("keydown",s,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),t)};function C_(e){return Ip(e)&&!$x()}const k_=new WeakSet;function f3(e,t,i={}){const[s,r,n]=zx(e,i),o=a=>{const l=a.currentTarget;if(!C_(a)||k_.has(a))return;xl.add(l),i.stopPropagation&&k_.add(a);const c=t(l,a),d=(m,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),xl.has(l)&&xl.delete(l),C_(m)&&typeof c=="function"&&c(m,{success:_})},f=m=>{d(m,l===window||l===document||i.useGlobalTarget||Fx(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return s.forEach(a=>{(i.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),Md(a)&&(a.addEventListener("focus",c=>d3(c,r)),!c3(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),n}function $p(e){return Uy(e)&&"ownerSVGElement"in e}const wl=new WeakMap;let Es;const Hx=(e,t,i)=>(s,r)=>r&&r[0]?r[0][e+"Size"]:$p(s)&&"getBBox"in s?s.getBBox()[t]:s[i],p3=Hx("inline","width","offsetWidth"),m3=Hx("block","height","offsetHeight");function g3({target:e,borderBoxSize:t}){var i;(i=wl.get(e))==null||i.forEach(s=>{s(e,{get width(){return p3(e,t)},get height(){return m3(e,t)}})})}function _3(e){e.forEach(g3)}function v3(){typeof ResizeObserver>"u"||(Es=new ResizeObserver(_3))}function y3(e,t){Es||v3();const i=Ox(e);return i.forEach(s=>{let r=wl.get(s);r||(r=new Set,wl.set(s,r)),r.add(t),Es==null||Es.observe(s)}),()=>{i.forEach(s=>{const r=wl.get(s);r==null||r.delete(t),r!=null&&r.size||Es==null||Es.unobserve(s)})}}const Sl=new Set;let an;function x3(){an=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};Sl.forEach(t=>t(e))},window.addEventListener("resize",an)}function w3(e){return Sl.add(e),an||x3(),()=>{Sl.delete(e),!Sl.size&&typeof an=="function"&&(window.removeEventListener("resize",an),an=void 0)}}function E_(e,t){return typeof e=="function"?w3(e):y3(e,t)}function S3(e){return $p(e)&&e.tagName==="svg"}const b3=[...Rx,Xe,Ri],C3=e=>b3.find(Lx(e)),N_=()=>({translate:0,scale:1,origin:0,originPoint:0}),ln=()=>({x:N_(),y:N_()}),T_=()=>({min:0,max:0}),tt=()=>({x:T_(),y:T_()}),k3=new WeakMap;function Bc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ra(e){return typeof e=="string"||Array.isArray(e)}const zp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fp=["initial",...zp];function Oc(e){return Bc(e.animate)||Fp.some(t=>ra(e[t]))}function Vx(e){return!!(Oc(e)||e.variants)}function E3(e,t,i){for(const s in t){const r=t[s],n=i[s];if(Nt(r))e.addValue(s,r);else if(Nt(n))e.addValue(s,Nn(r,{owner:e}));else if(n!==r)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=e.getStaticValue(s);e.addValue(s,Nn(o!==void 0?o:r,{owner:e}))}}for(const s in i)t[s]===void 0&&e.removeValue(s);return t}const jd={current:null},Wx={current:!1},N3=typeof window<"u";function T3(){if(Wx.current=!0,!!N3)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>jd.current=e.matches;e.addEventListener("change",t),t()}else jd.current=!1}const P_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let ac={};function Ux(e){ac=e}function P3(){return ac}class M3{scrapeMotionValuesFromProps(t,i,s){return{}}constructor({parent:t,props:i,presenceContext:s,reducedMotionConfig:r,skipAnimations:n,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=jp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Dt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ce.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=i.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=i,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.skipAnimationsConfig=n,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Oc(i),this.isVariantNode=Vx(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(i,{},this);for(const m in p){const _=p[m];c[m]!==void 0&&Nt(_)&&_.set(c[m])}}mount(t){var i,s;if(this.hasBeenMounted)for(const r in this.initialValues)(i=this.values.get(r))==null||i.jump(this.initialValues[r]),this.latestValues[r]=this.initialValues[r];this.current=t,k3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Wx.current||T3(),this.shouldReduceMotion=jd.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),qs(this.notifyUpdate),qs(this.render),this.valueSubscriptions.forEach(i=>i()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const i in this.events)this.events[i].clear();for(const i in this.features){const s=this.features[i];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,i){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),i.accelerate&&r3.has(t)&&this.current instanceof HTMLElement){const{factory:o,keyframes:a,times:l,ease:c,duration:d}=i.accelerate,f=new Cx({element:this.current,name:t,keyframes:a,times:l,ease:c,duration:Li(d)}),p=o(f);this.valueSubscriptions.set(t,()=>{p(),f.cancel()});return}const s=Rn.has(t);s&&this.onBindTransform&&this.onBindTransform();const r=i.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ce.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;typeof window<"u"&&window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{r(),n&&n(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ac){const i=ac[t];if(!i)continue;const{isEnabled:s,Feature:r}=i;if(!this.features[t]&&r&&s(this.props)&&(this.features[t]=new r(this)),this.features[t]){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<P_.length;s++){const r=P_[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const n="on"+r,o=t[n];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=E3(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const s=this.values.get(t);i!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&i!==void 0&&(s=Nn(i===null?void 0:i,{owner:this}),this.addValue(t,s)),s}readValue(t,i){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Wy(s)||Ky(s))?s=parseFloat(s):!C3(s)&&Ri.test(i)&&(s=Bx(t,i)),this.setBaseTarget(t,Nt(s)?s.get():s)),Nt(s)?s.get():s}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var n;const{initial:i}=this.props;let s;if(typeof i=="string"||typeof i=="object"){const o=Rp(this.props,i,(n=this.presenceContext)==null?void 0:n.custom);o&&(s=o[t])}if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Nt(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new xp),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}scheduleRenderMicrotask(){Op.render(this.render)}}class Kx extends M3{constructor(){super(...arguments),this.KeyframeResolver=s3}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){const s=t.style;return s?s[i]:void 0}removeValueFromRenderState(t,{vars:i,style:s}){delete i[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Nt(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}class Zs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function qx({top:e,left:t,right:i,bottom:s}){return{x:{min:t,max:i},y:{min:e,max:s}}}function j3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function D3(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}function Kh(e){return e===void 0||e===1}function Dd({scale:e,scaleX:t,scaleY:i}){return!Kh(e)||!Kh(t)||!Kh(i)}function sr(e){return Dd(e)||Yx(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Yx(e){return M_(e.x)||M_(e.y)}function M_(e){return e&&e!=="0%"}function lc(e,t,i){const s=e-i,r=t*s;return i+r}function j_(e,t,i,s,r){return r!==void 0&&(e=lc(e,r,s)),lc(e,i,s)+t}function Ld(e,t=0,i=1,s,r){e.min=j_(e.min,t,i,s,r),e.max=j_(e.max,t,i,s,r)}function Gx(e,{x:t,y:i}){Ld(e.x,t.translate,t.scale,t.originPoint),Ld(e.y,i.translate,i.scale,i.originPoint)}const D_=.999999999999,L_=1.0000000000001;function L3(e,t,i,s=!1){const r=i.length;if(!r)return;t.x=t.y=1;let n,o;for(let a=0;a<r;a++){n=i[a],o=n.projectionDelta;const{visualElement:l}=n.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&n.options.layoutScroll&&n.scroll&&n!==n.root&&hn(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Gx(e,o)),s&&sr(n.latestValues)&&hn(e,n.latestValues))}t.x<L_&&t.x>D_&&(t.x=1),t.y<L_&&t.y>D_&&(t.y=1)}function cn(e,t){e.min=e.min+t,e.max=e.max+t}function R_(e,t,i,s,r=.5){const n=Be(e.min,e.max,r);Ld(e,t,i,n,s)}function hn(e,t){R_(e.x,t.x,t.scaleX,t.scale,t.originX),R_(e.y,t.y,t.scaleY,t.scale,t.originY)}function Xx(e,t){return qx(D3(e.getBoundingClientRect(),t))}function R3(e,t,i){const s=Xx(e,i),{scroll:r}=t;return r&&(cn(s.x,r.offset.x),cn(s.y,r.offset.y)),s}const A3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},B3=Ln.length;function O3(e,t,i){let s="",r=!0;for(let n=0;n<B3;n++){const o=Ln[n],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const c=parseFloat(a);l=o.startsWith("scale")?c===1:c===0}if(!l||i){const c=Ix(a,Bp[o]);if(!l){r=!1;const d=A3[o]||o;s+=`${d}(${c}) `}i&&(t[o]=c)}}return s=s.trim(),i?s=i(t,r?"":s):r&&(s="none"),s}function Hp(e,t,i){const{style:s,vars:r,transformOrigin:n}=e;let o=!1,a=!1;for(const l in t){const c=t[l];if(Rn.has(l)){o=!0;continue}else if(ax(l)){r[l]=c;continue}else{const d=Ix(c,Bp[l]);l.startsWith("origin")?(a=!0,n[l]=d):s[l]=d}}if(t.transform||(o||i?s.transform=O3(t,e.transform,i):s.transform&&(s.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=n;s.transformOrigin=`${l} ${c} ${d}`}}function Zx(e,{style:t,vars:i},s,r){const n=e.style;let o;for(o in t)n[o]=t[o];r==null||r.applyProjectionStyles(n,s);for(o in i)n.setProperty(o,i[o])}function A_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ro={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(G.test(e))e=parseFloat(e);else return e;const i=A_(e,t.target.x),s=A_(e,t.target.y);return`${i}% ${s}%`}},I3={correct:(e,{treeScale:t,projectionDelta:i})=>{const s=e,r=Ri.parse(e);if(r.length>5)return s;const n=Ri.createTransformer(e),o=typeof r[0]!="number"?1:0,a=i.x.scale*t.x,l=i.y.scale*t.y;r[0+o]/=a,r[1+o]/=l;const c=Be(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),n(r)}},Rd={borderRadius:{...ro,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ro,borderTopRightRadius:ro,borderBottomLeftRadius:ro,borderBottomRightRadius:ro,boxShadow:I3};function Jx(e,{layout:t,layoutId:i}){return Rn.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!Rd[e]||e==="opacity")}function Vp(e,t,i){var o;const s=e.style,r=t==null?void 0:t.style,n={};if(!s)return n;for(const a in s)(Nt(s[a])||r&&Nt(r[a])||Jx(a,e)||((o=i==null?void 0:i.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(n[a]=s[a]);return n}function $3(e){return window.getComputedStyle(e)}class z3 extends Kx{constructor(){super(...arguments),this.type="html",this.renderInstance=Zx}readValueFromInstance(t,i){var s;if(Rn.has(i))return(s=this.projection)!=null&&s.isProjecting?yd(i):nk(t,i);{const r=$3(t),n=(ax(i)?r.getPropertyValue(i):r[i])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:i}){return Xx(t,i)}build(t,i,s){Hp(t,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,i,s){return Vp(t,i,s)}}const F3={offset:"stroke-dashoffset",array:"stroke-dasharray"},H3={offset:"strokeDashoffset",array:"strokeDasharray"};function V3(e,t,i=1,s=0,r=!0){e.pathLength=1;const n=r?F3:H3;e[n.offset]=`${-s}`,e[n.array]=`${t} ${i}`}const W3=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Qx(e,{attrX:t,attrY:i,attrScale:s,pathLength:r,pathSpacing:n=1,pathOffset:o=0,...a},l,c,d){if(Hp(e,a,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p}=e;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox);for(const m of W3)f[m]!==void 0&&(p[m]=f[m],delete f[m]);t!==void 0&&(f.x=t),i!==void 0&&(f.y=i),s!==void 0&&(f.scale=s),r!==void 0&&V3(f,r,n,o,!1)}const ew=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function U3(e,t,i,s){Zx(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(ew.has(r)?r:Ap(r),t.attrs[r])}function iw(e,t,i){const s=Vp(e,t,i);for(const r in e)if(Nt(e[r])||Nt(t[r])){const n=Ln.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[n]=e[r]}return s}class K3 extends Kx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tt}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(Rn.has(i)){const s=Ax(i);return s&&s.default||0}return i=ew.has(i)?i:Ap(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,s){return iw(t,i,s)}build(t,i,s){Qx(t,i,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,i,s,r){U3(t,i,s,r)}mount(t){this.isSVGTag=tw(t.tagName),super.mount(t)}}const q3=Fp.length;function sw(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?sw(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<q3;i++){const s=Fp[i],r=e.props[s];(ra(r)||r===!1)&&(t[s]=r)}return t}function rw(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(t[s]!==e[s])return!1;return!0}const Y3=[...zp].reverse(),G3=zp.length;function X3(e){return t=>Promise.all(t.map(({animation:i,options:s})=>Kk(e,i,s)))}function Z3(e){let t=X3(e),i=B_(),s=!0;const r=l=>(c,d)=>{var p;const f=yn(e,d,l==="exit"?(p=e.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:m,transitionEnd:_,...v}=f;c={...c,...v,..._}}return c};function n(l){t=l(e)}function o(l){const{props:c}=e,d=sw(e.parent)||{},f=[],p=new Set;let m={},_=1/0;for(let b=0;b<G3;b++){const g=Y3[b],y=i[g],x=c[g]!==void 0?c[g]:d[g],C=ra(x),k=g===l?y.isActive:null;k===!1&&(_=b);let T=x===d[g]&&x!==c[g]&&C;if(T&&s&&e.manuallyAnimateOnMount&&(T=!1),y.protectedKeys={...m},!y.isActive&&k===null||!x&&!y.prevProp||Bc(x)||typeof x=="boolean")continue;if(g==="exit"&&y.isActive&&k!==!0){y.prevResolvedValues&&(m={...m,...y.prevResolvedValues});continue}const L=J3(y.prevProp,x);let P=L||g===l&&y.isActive&&!T&&C||b>_&&C,q=!1;const H=Array.isArray(x)?x:[x];let ee=H.reduce(r(g),{});k===!1&&(ee={});const{prevResolvedValues:R={}}=y,M={...R,...ee},z=W=>{P=!0,p.has(W)&&(q=!0,p.delete(W)),y.needsAnimating[W]=!0;const E=e.getValue(W);E&&(E.liveStyle=!1)};for(const W in M){const E=ee[W],B=R[W];if(m.hasOwnProperty(W))continue;let U=!1;kd(E)&&kd(B)?U=!rw(E,B):U=E!==B,U?E!=null?z(W):p.add(W):E!==void 0&&p.has(W)?z(W):y.protectedKeys[W]=!0}y.prevProp=x,y.prevResolvedValues=ee,y.isActive&&(m={...m,...ee}),s&&e.blockInitialAnimation&&(P=!1);const I=T&&L;P&&(!I||q)&&f.push(...H.map(W=>{const E={type:g};if(typeof W=="string"&&s&&!I&&e.manuallyAnimateOnMount&&e.parent){const{parent:B}=e,U=yn(B,W);if(B.enteringChildren&&U){const{delayChildren:Q}=U.transition||{};E.delay=Ex(B.enteringChildren,e,Q)}}return{animation:W,options:E}}))}if(p.size){const b={};if(typeof c.initial!="boolean"){const g=yn(e,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(b.transition=g.transition)}p.forEach(g=>{const y=e.getBaseTarget(g),x=e.getValue(g);x&&(x.liveStyle=!0),b[g]=y??null}),f.push({animation:b})}let v=!!f.length;return s&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(v=!1),s=!1,v?t(f):Promise.resolve()}function a(l,c){var f;if(i[l].isActive===c)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(p=>{var m;return(m=p.animationState)==null?void 0:m.setActive(l,c)}),i[l].isActive=c;const d=o(l);for(const p in i)i[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:n,getState:()=>i,reset:()=>{i=B_()}}}function J3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!rw(t,e):!1}function Qs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B_(){return{animate:Qs(!0),whileInView:Qs(),whileHover:Qs(),whileTap:Qs(),whileDrag:Qs(),whileFocus:Qs(),exit:Qs()}}function O_(e,t){e.min=t.min,e.max=t.max}function ki(e,t){O_(e.x,t.x),O_(e.y,t.y)}function I_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const nw=1e-4,Q3=1-nw,e4=1+nw,ow=.01,t4=0-ow,i4=0+ow;function Lt(e){return e.max-e.min}function s4(e,t,i){return Math.abs(e-t)<=i}function $_(e,t,i,s=.5){e.origin=s,e.originPoint=Be(t.min,t.max,e.origin),e.scale=Lt(i)/Lt(t),e.translate=Be(i.min,i.max,e.origin)-e.originPoint,(e.scale>=Q3&&e.scale<=e4||isNaN(e.scale))&&(e.scale=1),(e.translate>=t4&&e.translate<=i4||isNaN(e.translate))&&(e.translate=0)}function Lo(e,t,i,s){$_(e.x,t.x,i.x,s?s.originX:void 0),$_(e.y,t.y,i.y,s?s.originY:void 0)}function z_(e,t,i){e.min=i.min+t.min,e.max=e.min+Lt(t)}function r4(e,t,i){z_(e.x,t.x,i.x),z_(e.y,t.y,i.y)}function F_(e,t,i){e.min=t.min-i.min,e.max=e.min+Lt(t)}function cc(e,t,i){F_(e.x,t.x,i.x),F_(e.y,t.y,i.y)}function H_(e,t,i,s,r){return e-=t,e=lc(e,1/i,s),r!==void 0&&(e=lc(e,1/r,s)),e}function n4(e,t=0,i=1,s=.5,r,n=e,o=e){if(Xi.test(t)&&(t=parseFloat(t),t=Be(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Be(n.min,n.max,s);e===n&&(a-=t),e.min=H_(e.min,t,i,a,r),e.max=H_(e.max,t,i,a,r)}function V_(e,t,[i,s,r],n,o){n4(e,t[i],t[s],t[r],t.scale,n,o)}const o4=["x","scaleX","originX"],a4=["y","scaleY","originY"];function W_(e,t,i,s){V_(e.x,t,o4,i?i.x:void 0,s?s.x:void 0),V_(e.y,t,a4,i?i.y:void 0,s?s.y:void 0)}function U_(e){return e.translate===0&&e.scale===1}function aw(e){return U_(e.x)&&U_(e.y)}function K_(e,t){return e.min===t.min&&e.max===t.max}function l4(e,t){return K_(e.x,t.x)&&K_(e.y,t.y)}function q_(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function lw(e,t){return q_(e.x,t.x)&&q_(e.y,t.y)}function Y_(e){return Lt(e.x)/Lt(e.y)}function G_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Wi(e){return[e("x"),e("y")]}function c4(e,t,i){let s="";const r=e.x.translate/t.x,n=e.y.translate/t.y,o=(i==null?void 0:i.z)||0;if((r||n||o)&&(s=`translate3d(${r}px, ${n}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:_}=i;c&&(s=`perspective(${c}px) ${s}`),d&&(s+=`rotate(${d}deg) `),f&&(s+=`rotateX(${f}deg) `),p&&(s+=`rotateY(${p}deg) `),m&&(s+=`skewX(${m}deg) `),_&&(s+=`skewY(${_}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const cw=["TopLeft","TopRight","BottomLeft","BottomRight"],h4=cw.length,X_=e=>typeof e=="string"?parseFloat(e):e,Z_=e=>typeof e=="number"||G.test(e);function u4(e,t,i,s,r,n){r?(e.opacity=Be(0,i.opacity??1,d4(s)),e.opacityExit=Be(t.opacity??1,0,f4(s))):n&&(e.opacity=Be(t.opacity??1,i.opacity??1,s));for(let o=0;o<h4;o++){const a=`border${cw[o]}Radius`;let l=J_(t,a),c=J_(i,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Z_(l)===Z_(c)?(e[a]=Math.max(Be(X_(l),X_(c),s),0),(Xi.test(c)||Xi.test(l))&&(e[a]+="%")):e[a]=c}(t.rotate||i.rotate)&&(e.rotate=Be(t.rotate||0,i.rotate||0,s))}function J_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const d4=hw(0,.5,tx),f4=hw(.5,.95,gi);function hw(e,t,i){return s=>s<e?0:s>t?1:i(ta(e,t,s))}function p4(e,t,i){const s=Nt(e)?e:Nn(e);return s.start(Lp("",s,t,i)),s.animation}function na(e,t,i,s={passive:!0}){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i)}const m4=(e,t)=>e.depth-t.depth;class g4{constructor(){this.children=[],this.isDirty=!1}add(t){vp(this.children,t),this.isDirty=!0}remove(t){sc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m4),this.isDirty=!1,this.children.forEach(t)}}function _4(e,t){const i=Dt.now(),s=({timestamp:r})=>{const n=r-i;n>=t&&(qs(s),e(n-t))};return Ce.setup(s,!0),()=>qs(s)}function bl(e){return Nt(e)?e.get():e}class v4{constructor(){this.members=[]}add(t){vp(this.members,t);for(let i=this.members.length-1;i>=0;i--){const s=this.members[i];if(s===t||s===this.lead||s===this.prevLead)continue;const r=s.instance;r&&r.isConnected===!1&&s.isPresent!==!1&&!s.snapshot&&sc(this.members,s)}t.scheduleRender()}remove(t){if(sc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(r=>t===r);if(i===0)return!1;let s;for(let r=i;r>=0;r--){const n=this.members[r],o=n.instance;if(n.isPresent!==!1&&(!o||o.isConnected!==!1)){s=n;break}}return s?(this.promote(s),!0):!1}promote(t,i){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender();const r=s.options.layoutDependency,n=t.options.layoutDependency;if(!(r!==void 0&&n!==void 0&&r===n)){const l=s.instance;l&&l.isConnected===!1&&!s.snapshot||(t.resumeFrom=s,i&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:s}=t;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Cl={hasAnimatedSinceResize:!0,hasEverUpdated:!1},qh=["","X","Y","Z"],y4=1e3;let x4=0;function Yh(e,t,i,s){const{latestValues:r}=t;r[e]&&(i[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function uw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=jx(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:r,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",Ce,!(r||n))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&uw(s)}function dw({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=t==null?void 0:t()){this.id=x4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(b4),this.nodes.forEach(N4),this.nodes.forEach(T4),this.nodes.forEach(C4)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new g4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$p(o)&&!S3(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let d,f=0;const p=()=>this.root.updateBlockedByResize=!1;Ce.read(()=>{f=window.innerWidth}),e(o,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,d&&d(),d=_4(p,250),Cl.hasAnimatedSinceResize&&(Cl.hasAnimatedSinceResize=!1,this.nodes.forEach(t0)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||c.getDefaultTransition()||L4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=c.getProps(),g=!this.targetLayout||!lw(this.targetLayout,m),y=!f&&p;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...Dp(_,"layout"),onPlay:v,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,y)}else f||t0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Q_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(e0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(E4),this.nodes.forEach(w4),this.nodes.forEach(S4)):this.nodes.forEach(e0),this.clearAllSnapshots();const a=Dt.now();vt.delta=Ji(0,1e3/60,a-vt.timestamp),vt.timestamp=a,vt.isProcessing=!0,$h.update.process(vt),$h.preRender.process(vt),$h.render.process(vt),vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Op.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(k4),this.sharedNodes.forEach(M4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!aw(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||sr(this.latestValues)||d)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),R4(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return tt();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(A4))){const{scroll:d}=this.root;d&&(cn(a.x,d.offset.x),cn(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=tt();if(ki(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&ki(a,o),cn(a.x,f.offset.x),cn(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=tt();ki(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&hn(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),sr(d.latestValues)&&hn(l,d.latestValues)}return sr(this.latestValues)&&hn(l,this.latestValues),l}removeTransform(o){const a=tt();ki(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!sr(c.latestValues))continue;Dd(c.latestValues)&&c.updateSnapshot();const d=tt(),f=c.measurePageBox();ki(d,f),W_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return sr(this.latestValues)&&W_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=vt.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tt(),this.targetWithTransforms=tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),r4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ki(this.target,this.layout.layoutBox),Gx(this.target,this.targetDelta)):ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Dd(this.parent.latestValues)||Yx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tt(),this.relativeTargetOrigin=tt(),cc(this.relativeTargetOrigin,a,l),ki(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var _;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===vt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;ki(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;L3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=tt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(I_(this.prevProjectionDelta.x,this.projectionDelta.x),I_(this.prevProjectionDelta.y,this.projectionDelta.y)),Lo(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!G_(this.projectionDelta.x,this.prevProjectionDelta.x)||!G_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ln(),this.projectionDelta=ln(),this.projectionDeltaWithTransform=ln()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=ln();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=tt(),m=l?l.source:void 0,_=this.layout?this.layout.source:void 0,v=m!==_,b=this.getStack(),g=!b||b.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(D4));this.animationProgress=0;let x;this.mixTargetDelta=C=>{const k=C/1e3;i0(f.x,o.x,k),i0(f.y,o.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),j4(this.relativeTarget,this.relativeTargetOrigin,p,k),x&&l4(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=tt()),ki(x,this.relativeTarget)),v&&(this.animationValues=d,u4(d,c,this.latestValues,k,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Cl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nn(0)),this.motionValue.jump(0,!1),this.currentAnimation=p4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(y4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&fw(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tt();const f=Lt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Lt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ki(a,l),hn(a,d),Lo(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new v4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Yh("z",o,c,this.animationValues);for(let d=0;d<qh.length;d++)Yh(`rotate${qh[d]}`,o,c,this.animationValues),Yh(`skew${qh[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=bl(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=bl(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sr(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=c4(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),o.transform=f;const{x:p,y:m}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in Rd){if(d[_]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:g}=Rd[_],y=f==="none"?d[_]:v(d[_],c);if(b){const x=b.length;for(let C=0;C<x;C++)o[b[C]]=y}else g?this.options.visualElement.renderState.vars[_]=y:o[_]=y}this.options.layoutId&&(o.pointerEvents=c===this?bl(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Q_),this.root.sharedNodes.clear()}}}function w4(e){e.updateLayout()}function S4(e){var i;const t=((i=e.resumeFrom)==null?void 0:i.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:n}=e.options,o=t.source!==e.layout.source;n==="size"?Wi(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Lt(p);p.min=s[f].min,p.max=p.min+m}):fw(n,t.layoutBox,s)&&Wi(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Lt(s[f]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const a=ln();Lo(a,s,t.layoutBox);const l=ln();o?Lo(l,e.applyTransform(r,!0),t.measuredBox):Lo(l,s,t.layoutBox);const c=!aw(a);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const _=tt();cc(_,t.layoutBox,p.layoutBox);const v=tt();cc(v,s,m.layoutBox),lw(_,v)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=_,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function b4(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function C4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function k4(e){e.clearSnapshot()}function Q_(e){e.clearMeasurements()}function e0(e){e.isLayoutDirty=!1}function E4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function t0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function N4(e){e.resolveTargetDelta()}function T4(e){e.calcProjection()}function P4(e){e.resetSkewAndRotation()}function M4(e){e.removeLeadSnapshot()}function i0(e,t,i){e.translate=Be(t.translate,0,i),e.scale=Be(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function s0(e,t,i,s){e.min=Be(t.min,i.min,s),e.max=Be(t.max,i.max,s)}function j4(e,t,i,s){s0(e.x,t.x,i.x,s),s0(e.y,t.y,i.y,s)}function D4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const L4={duration:.45,ease:[.4,0,.1,1]},r0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),n0=r0("applewebkit/")&&!r0("chrome/")?Math.round:gi;function o0(e){e.min=n0(e.min),e.max=n0(e.max)}function R4(e){o0(e.x),o0(e.y)}function fw(e,t,i){return e==="position"||e==="preserve-aspect"&&!s4(Y_(t),Y_(i),.2)}function A4(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const B4=dw({attachResizeListener:(e,t)=>na(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Gh={current:void 0},pw=dw({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Gh.current){const e=new B4({});e.mount(window),e.setOptions({layoutScroll:!0}),Gh.current=e}return Gh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Wp=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function a0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function O4(...e){return t=>{let i=!1;const s=e.map(r=>{const n=a0(r,t);return!i&&typeof n=="function"&&(i=!0),n});if(i)return()=>{for(let r=0;r<s.length;r++){const n=s[r];typeof n=="function"?n():a0(e[r],null)}}}}function I4(...e){return S.useCallback(O4(...e),e)}class $4 extends S.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=i.offsetParent,r=Md(s)&&s.offsetWidth||0,n=Md(s)&&s.offsetHeight||0,o=this.props.sizeRef.current;o.height=i.offsetHeight||0,o.width=i.offsetWidth||0,o.top=i.offsetTop,o.left=i.offsetLeft,o.right=r-o.width-o.left,o.bottom=n-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function z4({children:e,isPresent:t,anchorX:i,anchorY:s,root:r,pop:n}){var p;const o=S.useId(),a=S.useRef(null),l=S.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=S.useContext(Wp),d=((p=e.props)==null?void 0:p.ref)??(e==null?void 0:e.ref),f=I4(a,d);return S.useInsertionEffect(()=>{const{width:m,height:_,top:v,left:b,right:g,bottom:y}=l.current;if(t||n===!1||!a.current||!m||!_)return;const x=i==="left"?`left: ${b}`:`right: ${g}`,C=s==="bottom"?`bottom: ${y}`:`top: ${v}`;a.current.dataset.motionPopId=o;const k=document.createElement("style");c&&(k.nonce=c);const T=r??document.head;return T.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${_}px !important;
            ${x}px !important;
            ${C}px !important;
          }
        `),()=>{T.contains(k)&&T.removeChild(k)}},[t]),h.jsx($4,{isPresent:t,childRef:a,sizeRef:l,pop:n,children:n===!1?e:S.cloneElement(e,{ref:f})})}const F4=({children:e,initial:t,isPresent:i,onExitComplete:s,custom:r,presenceAffectsLayout:n,mode:o,anchorX:a,anchorY:l,root:c})=>{const d=_p(H4),f=S.useId();let p=!0,m=S.useMemo(()=>(p=!1,{id:f,initial:t,isPresent:i,custom:r,onExitComplete:_=>{d.set(_,!0);for(const v of d.values())if(!v)return;s&&s()},register:_=>(d.set(_,!1),()=>d.delete(_))}),[i,d,s]);return n&&p&&(m={...m}),S.useMemo(()=>{d.forEach((_,v)=>d.set(v,!1))},[i]),S.useEffect(()=>{!i&&!d.size&&s&&s()},[i]),e=h.jsx(z4,{pop:o==="popLayout",isPresent:i,anchorX:a,anchorY:l,root:c,children:e}),h.jsx(Ac.Provider,{value:m,children:e})};function H4(){return new Map}function mw(e=!0){const t=S.useContext(Ac);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:r}=t,n=S.useId();S.useEffect(()=>{if(e)return r(n)},[e]);const o=S.useCallback(()=>e&&s&&s(n),[n,s,e]);return!i&&s?[!1,o]:[!0]}const Qa=e=>e.key||"";function l0(e){const t=[];return S.Children.forEach(e,i=>{S.isValidElement(i)&&t.push(i)}),t}const V4=({children:e,custom:t,initial:i=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:n="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:c})=>{const[d,f]=mw(o),p=S.useMemo(()=>l0(e),[e]),m=o&&!d?[]:p.map(Qa),_=S.useRef(!0),v=S.useRef(p),b=_p(()=>new Map),g=S.useRef(new Set),[y,x]=S.useState(p),[C,k]=S.useState(p);Vy(()=>{_.current=!1,v.current=p;for(let P=0;P<C.length;P++){const q=Qa(C[P]);m.includes(q)?(b.delete(q),g.current.delete(q)):b.get(q)!==!0&&b.set(q,!1)}},[C,m.length,m.join("-")]);const T=[];if(p!==y){let P=[...p];for(let q=0;q<C.length;q++){const H=C[q],ee=Qa(H);m.includes(ee)||(P.splice(q,0,H),T.push(H))}return n==="wait"&&T.length&&(P=T),k(l0(P)),x(p),null}const{forceRender:L}=S.useContext(gp);return h.jsx(h.Fragment,{children:C.map(P=>{const q=Qa(P),H=o&&!d?!1:p===C||m.includes(q),ee=()=>{if(g.current.has(q))return;if(g.current.add(q),b.has(q))b.set(q,!0);else return;let R=!0;b.forEach(M=>{M||(R=!1)}),R&&(L==null||L(),k(v.current),o&&(f==null||f()),s&&s())};return h.jsx(F4,{isPresent:H,initial:!_.current||i?void 0:!1,custom:t,presenceAffectsLayout:r,mode:n,root:c,onExitComplete:H?void 0:ee,anchorX:a,anchorY:l,children:P},q)})})},gw=S.createContext({strict:!1}),c0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let h0=!1;function W4(){if(h0)return;const e={};for(const t in c0)e[t]={isEnabled:i=>c0[t].some(s=>!!i[s])};Ux(e),h0=!0}function _w(){return W4(),P3()}function U4(e){const t=_w();for(const i in e)t[i]={...t[i],...e[i]};Ux(t)}const K4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function hc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||K4.has(e)}let vw=e=>!hc(e);function q4(e){typeof e=="function"&&(vw=t=>t.startsWith("on")?!hc(t):e(t))}try{q4(require("@emotion/is-prop-valid").default)}catch{}function Y4(e,t,i){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(vw(r)||i===!0&&hc(r)||!t&&!hc(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}const Ic=S.createContext({});function G4(e,t){if(Oc(e)){const{initial:i,animate:s}=e;return{initial:i===!1||ra(i)?i:void 0,animate:ra(s)?s:void 0}}return e.inherit!==!1?t:{}}function X4(e){const{initial:t,animate:i}=G4(e,S.useContext(Ic));return S.useMemo(()=>({initial:t,animate:i}),[u0(t),u0(i)])}function u0(e){return Array.isArray(e)?e.join(" "):e}const Up=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yw(e,t,i){for(const s in t)!Nt(t[s])&&!Jx(s,i)&&(e[s]=t[s])}function Z4({transformTemplate:e},t){return S.useMemo(()=>{const i=Up();return Hp(i,t,e),Object.assign({},i.vars,i.style)},[t])}function J4(e,t){const i=e.style||{},s={};return yw(s,i,e),Object.assign(s,Z4(e,t)),s}function Q4(e,t){const i={},s=J4(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i}const xw=()=>({...Up(),attrs:{}});function eE(e,t,i,s){const r=S.useMemo(()=>{const n=xw();return Qx(n,t,tw(s),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const n={};yw(n,e.style,e),r.style={...n,...r.style}}return r}const tE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kp(e){return typeof e!="string"||e.includes("-")?!1:!!(tE.indexOf(e)>-1||/[A-Z]/u.test(e))}function iE(e,t,i,{latestValues:s},r,n=!1,o){const l=(o??Kp(e)?eE:Q4)(t,s,r,e),c=Y4(t,typeof e=="string",n),d=e!==S.Fragment?{...c,...l,ref:i}:{},{children:f}=t,p=S.useMemo(()=>Nt(f)?f.get():f,[f]);return S.createElement(e,{...d,children:p})}function sE({scrapeMotionValuesFromProps:e,createRenderState:t},i,s,r){return{latestValues:rE(i,s,r,e),renderState:t()}}function rE(e,t,i,s){const r={},n=s(e,{});for(const p in n)r[p]=bl(n[p]);let{initial:o,animate:a}=e;const l=Oc(e),c=Vx(e);t&&c&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=i?i.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!Bc(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const _=Rp(e,p[m]);if(_){const{transitionEnd:v,transition:b,...g}=_;for(const y in g){let x=g[y];if(Array.isArray(x)){const C=d?x.length-1:0;x=x[C]}x!==null&&(r[y]=x)}for(const y in v)r[y]=v[y]}}}return r}const ww=e=>(t,i)=>{const s=S.useContext(Ic),r=S.useContext(Ac),n=()=>sE(e,t,s,r);return i?n():_p(n)},nE=ww({scrapeMotionValuesFromProps:Vp,createRenderState:Up}),oE=ww({scrapeMotionValuesFromProps:iw,createRenderState:xw}),aE=Symbol.for("motionComponentSymbol");function lE(e,t,i){const s=S.useRef(i);S.useInsertionEffect(()=>{s.current=i});const r=S.useRef(null);return S.useCallback(n=>{var a;n&&((a=e.onMount)==null||a.call(e,n)),t&&(n?t.mount(n):t.unmount());const o=s.current;if(typeof o=="function")if(n){const l=o(n);typeof l=="function"&&(r.current=l)}else r.current?(r.current(),r.current=null):o(n);else o&&(o.current=n)},[t])}const Sw=S.createContext({});function Kr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function cE(e,t,i,s,r,n){var x,C;const{visualElement:o}=S.useContext(Ic),a=S.useContext(gw),l=S.useContext(Ac),c=S.useContext(Wp),d=c.reducedMotion,f=c.skipAnimations,p=S.useRef(null),m=S.useRef(!1);s=s||a.renderer,!p.current&&s&&(p.current=s(e,{visualState:t,parent:o,props:i,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d,skipAnimations:f,isSVG:n}),m.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const _=p.current,v=S.useContext(Sw);_&&!_.projection&&r&&(_.type==="html"||_.type==="svg")&&hE(p.current,i,r,v);const b=S.useRef(!1);S.useInsertionEffect(()=>{_&&b.current&&_.update(i,l)});const g=i[Mx],y=S.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,g)));return Vy(()=>{m.current=!0,_&&(b.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),y.current&&_.animationState&&_.animationState.animateChanges())}),S.useEffect(()=>{_&&(!y.current&&_.animationState&&_.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)==null||k.call(window,g)}),y.current=!1),_.enteringChildren=void 0)}),_}function hE(e,t,i,s){const{layoutId:r,layout:n,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:bw(e.parent)),e.projection.setOptions({layoutId:r,layout:n,alwaysMeasureLayout:!!o||a&&Kr(a),visualElement:e,animationType:typeof n=="string"?n:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}function bw(e){if(e)return e.options.allowProjection!==!1?e.projection:bw(e.parent)}function Xh(e,{forwardMotionProps:t=!1,type:i}={},s,r){s&&U4(s);const n=i?i==="svg":Kp(e),o=n?oE:nE;function a(c,d){let f;const p={...S.useContext(Wp),...c,layoutId:uE(c)},{isStatic:m}=p,_=X4(c),v=o(c,m);if(!m&&Hy){dE();const b=fE(p);f=b.MeasureLayout,_.visualElement=cE(e,v,p,r,b.ProjectionNode,n)}return h.jsxs(Ic.Provider,{value:_,children:[f&&_.visualElement?h.jsx(f,{visualElement:_.visualElement,...p}):null,iE(e,c,lE(v,_.visualElement,d),v,m,t,n)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=S.forwardRef(a);return l[aE]=e,l}function uE({layoutId:e}){const t=S.useContext(gp).id;return t&&e!==void 0?t+"-"+e:e}function dE(e,t){S.useContext(gw).strict}function fE(e){const t=_w(),{drag:i,layout:s}=t;if(!i&&!s)return{};const r={...i,...s};return{MeasureLayout:i!=null&&i.isEnabled(e)||s!=null&&s.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function pE(e,t){if(typeof Proxy>"u")return Xh;const i=new Map,s=(n,o)=>Xh(n,o,e,t),r=(n,o)=>s(n,o);return new Proxy(r,{get:(n,o)=>o==="create"?s:(i.has(o)||i.set(o,Xh(o,void 0,e,t)),i.get(o))})}const mE=(e,t)=>t.isSVG??Kp(e)?new K3(t):new z3(t,{allowProjection:e!==S.Fragment});class gE extends Zs{constructor(t){super(t),t.animationState||(t.animationState=Z3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Bc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let _E=0;class vE extends Zs{constructor(){super(...arguments),this.id=_E++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t);i&&!t&&r.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const yE={animation:{Feature:gE},exit:{Feature:vE}};function ya(e){return{point:{x:e.pageX,y:e.pageY}}}const xE=e=>t=>Ip(t)&&e(t,ya(t));function Ro(e,t,i,s){return na(e,t,xE(i),s)}const Cw=({current:e})=>e?e.ownerDocument.defaultView:null,d0=(e,t)=>Math.abs(e-t);function wE(e,t){const i=d0(e.x,t.x),s=d0(e.y,t.y);return Math.sqrt(i**2+s**2)}const f0=new Set(["auto","scroll"]);class kw{constructor(t,i,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:n=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Jh(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,v=wE(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!v)return;const{point:b}=m,{timestamp:g}=vt;this.history.push({...b,timestamp:g});const{onStart:y,onMove:x}=this.handlers;_||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,_)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Zh(_,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(m,_)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Jh(m.type==="pointercancel"?this.lastMoveEventInfo:Zh(_,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,y),b&&b(m,y)},!Ip(t))return;this.dragSnapToOrigin=n,this.handlers=i,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=r||window;const l=ya(t),c=Zh(l,this.transformPagePoint),{point:d}=c,{timestamp:f}=vt;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=i;p&&p(t,Jh(c,this.history)),this.removeListeners=ga(Ro(this.contextWindow,"pointermove",this.handlePointerMove),Ro(this.contextWindow,"pointerup",this.handlePointerUp),Ro(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(t){let i=t.parentElement;for(;i;){const s=getComputedStyle(i);(f0.has(s.overflowX)||f0.has(s.overflowY))&&this.scrollPositions.set(i,{x:i.scrollLeft,y:i.scrollTop}),i=i.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const i=this.scrollPositions.get(t);if(!i)return;const s=t===window,r=s?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},n={x:r.x-i.x,y:r.y-i.y};n.x===0&&n.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=n.x,this.lastMoveEventInfo.point.y+=n.y):this.history.length>0&&(this.history[0].x-=n.x,this.history[0].y-=n.y),this.scrollPositions.set(t,r),Ce.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),qs(this.updatePoint)}}function Zh(e,t){return t?{point:t(e.point)}:e}function p0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Jh({point:e},t){return{point:e,delta:p0(e,Ew(t)),offset:p0(e,SE(t)),velocity:bE(t,.1)}}function SE(e){return e[0]}function Ew(e){return e[e.length-1]}function bE(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,s=null;const r=Ew(e);for(;i>=0&&(s=e[i],!(r.timestamp-s.timestamp>Li(t)));)i--;if(!s)return{x:0,y:0};s===e[0]&&e.length>2&&r.timestamp-s.timestamp>Li(t)*2&&(s=e[1]);const n=pi(r.timestamp-s.timestamp);if(n===0)return{x:0,y:0};const o={x:(r.x-s.x)/n,y:(r.y-s.y)/n};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function CE(e,{min:t,max:i},s){return t!==void 0&&e<t?e=s?Be(t,e,s.min):Math.max(e,t):i!==void 0&&e>i&&(e=s?Be(i,e,s.max):Math.min(e,i)),e}function m0(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function kE(e,{top:t,left:i,bottom:s,right:r}){return{x:m0(e.x,i,r),y:m0(e.y,t,s)}}function g0(e,t){let i=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,s]=[s,i]),{min:i,max:s}}function EE(e,t){return{x:g0(e.x,t.x),y:g0(e.y,t.y)}}function NE(e,t){let i=.5;const s=Lt(e),r=Lt(t);return r>s?i=ta(t.min,t.max-s,e.min):s>r&&(i=ta(e.min,e.max-r,t.min)),Ji(0,1,i)}function TE(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const Ad=.35;function PE(e=Ad){return e===!1?e=0:e===!0&&(e=Ad),{x:_0(e,"left","right"),y:_0(e,"top","bottom")}}function _0(e,t,i){return{min:v0(e,t),max:v0(e,i)}}function v0(e,t){return typeof e=="number"?e:e[t]||0}const ME=new WeakMap;class jE{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:i=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const n=f=>{i&&this.snapToCursor(ya(f).point),this.stopAnimation()},o=(f,p)=>{const{drag:m,dragPropagation:_,onDragStart:v}=this.getProps();if(m&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n3(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wi(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Xi.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const C=x.layout.layoutBox[g];C&&(y=Lt(C)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&Ce.update(()=>v(f,p),!1,!0),Ed(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:m,dragDirectionLock:_,onDirectionLock:v,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:g}=p;if(_&&this.currentDirection===null){this.currentDirection=LE(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,g),this.updateAxis("y",p.point,g),this.visualElement.render(),b&&Ce.update(()=>b(f,p),!1,!0)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:f}=this.getProps();(f||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new kw(t,{onSessionStart:n,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:Cw(this.visualElement),element:this.visualElement.current})}stop(t,i){const s=t||this.latestPointerEvent,r=i||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!r||!s)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ce.postRender(()=>a(s,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,i,s){const{drag:r}=this.getProps();if(!s||!el(t,r,this.currentDirection))return;const n=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=CE(o,this.constraints[t],this.elastic[t])),n.set(o)}resolveConstraints(){var n;const{dragConstraints:t,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)==null?void 0:n.layout,r=this.constraints;t&&Kr(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=kE(s.layoutBox,t):this.constraints=!1,this.elastic=PE(i),r!==this.constraints&&!Kr(t)&&s&&this.constraints&&!this.hasMutatedConstraints&&Wi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=TE(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Kr(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const n=R3(s,r.root,this.visualElement.getTransformPagePoint());let o=EE(r.layout.layoutBox,n);if(i){const a=i(j3(o));this.hasMutatedConstraints=!!a,a&&(o=qx(a))}return o}startAnimation(t){const{drag:i,dragMomentum:s,dragElastic:r,dragTransition:n,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Wi(d=>{if(!el(d,i,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,_={type:"inertia",velocity:s?t[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...n,...f};return this.startAxisValueAnimation(d,_)});return Promise.all(c).then(a)}startAxisValueAnimation(t,i){const s=this.getAxisMotionValue(t);return Ed(this.visualElement,t),s.start(Lp(t,s,0,i,this.visualElement,!1))}stopAnimation(){Wi(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),r=s[i];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Wi(i=>{const{drag:s}=this.getProps();if(!el(i,s,this.currentDirection))return;const{projection:r}=this.visualElement,n=this.getAxisMotionValue(i);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[i],l=n.get()||0;n.set(t[i]-Be(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!Kr(i)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Wi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=NE({min:l,max:l},this.constraints[o])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),Wi(o=>{if(!el(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Be(l,c,r[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;ME.set(this.visualElement,this);const t=this.visualElement.current,i=Ro(t,"pointerdown",c=>{const{drag:d,dragListener:f=!0}=this.getProps(),p=c.target,m=p!==t&&u3(p);d&&f&&!m&&this.start(c)});let s;const r=()=>{const{dragConstraints:c}=this.getProps();Kr(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),s||(s=DE(t,c.current,()=>this.scalePositionWithinConstraints())))},{projection:n}=this.visualElement,o=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Ce.read(r);const a=na(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Wi(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=c[f].translate,p.set(p.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),i(),o(),l&&l(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:n=!1,dragElastic:o=Ad,dragMomentum:a=!0}=t;return{...t,drag:i,dragDirectionLock:s,dragPropagation:r,dragConstraints:n,dragElastic:o,dragMomentum:a}}}function y0(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function DE(e,t,i){const s=E_(e,y0(i)),r=E_(t,y0(i));return()=>{s(),r()}}function el(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function LE(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class RE extends Zs{constructor(t){super(t),this.removeGroupControls=gi,this.removeListeners=gi,this.controls=new jE(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gi}update(){const{dragControls:t}=this.node.getProps(),{dragControls:i}=this.node.prevProps||{};t!==i&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Qh=e=>(t,i)=>{e&&Ce.update(()=>e(t,i),!1,!0)};class AE extends Zs{constructor(){super(...arguments),this.removePointerDownListener=gi}onPointerDown(t){this.session=new kw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Qh(t),onStart:Qh(i),onMove:Qh(s),onEnd:(n,o)=>{delete this.session,r&&Ce.postRender(()=>r(n,o))}}}mount(){this.removePointerDownListener=Ro(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let eu=!1;class BE extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s,layoutId:r}=this.props,{projection:n}=t;n&&(i.group&&i.group.add(n),s&&s.register&&r&&s.register(n),eu&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Cl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:s,drag:r,isPresent:n}=this.props,{projection:o}=s;return o&&(o.isPresent=n,t.layoutDependency!==i&&o.setOptions({...o.options,layoutDependency:i}),eu=!0,r||t.layoutDependency!==i||i===void 0||t.isPresent!==n?o.willUpdate():this.safeToRemove(),t.isPresent!==n&&(n?o.promote():o.relegate()||Ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Op.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:r}=t;eu=!0,r&&(r.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Nw(e){const[t,i]=mw(),s=S.useContext(gp);return h.jsx(BE,{...e,layoutGroup:s,switchLayoutGroup:S.useContext(Sw),isPresent:t,safeToRemove:i})}const OE={pan:{Feature:AE},drag:{Feature:RE,ProjectionNode:pw,MeasureLayout:Nw}};function x0(e,t,i){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",i==="Start");const r="onHover"+i,n=s[r];n&&Ce.postRender(()=>n(t,ya(t)))}class IE extends Zs{mount(){const{current:t}=this.node;t&&(this.unmount=a3(t,(i,s)=>(x0(this.node,s,"Start"),r=>x0(this.node,r,"End"))))}unmount(){}}class $E extends Zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ga(na(this.node.current,"focus",()=>this.onFocus()),na(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w0(e,t,i){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",i==="Start");const r="onTap"+(i==="End"?"":i),n=s[r];n&&Ce.postRender(()=>n(t,ya(t)))}class zE extends Zs{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:i,propagate:s}=this.node.props;this.unmount=f3(t,(r,n)=>(w0(this.node,n,"Start"),(o,{success:a})=>w0(this.node,o,a?"End":"Cancel")),{useGlobalTarget:i,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const Bd=new WeakMap,tu=new WeakMap,FE=e=>{const t=Bd.get(e.target);t&&t(e)},HE=e=>{e.forEach(FE)};function VE({root:e,...t}){const i=e||document;tu.has(i)||tu.set(i,{});const s=tu.get(i),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(HE,{root:e,...t})),s[r]}function WE(e,t,i){const s=VE(t);return Bd.set(e,i),s.observe(e),()=>{Bd.delete(e),s.unobserve(e)}}const UE={some:0,all:1};class KE extends Zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:s,amount:r="some",once:n}=t,o={root:i?i.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:UE[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,n&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return WE(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(qE(t,i))&&this.startObserver()}unmount(){}}function qE({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const YE={inView:{Feature:KE},tap:{Feature:zE},focus:{Feature:$E},hover:{Feature:IE}},GE={layout:{ProjectionNode:pw,MeasureLayout:Nw}},XE={...yE,...YE,...OE,...GE},oa=pE(XE,mE);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=(...e)=>e.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase());/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=e=>{const t=JE(e);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:r="",children:n,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...QE,width:t,height:t,stroke:e,strokeWidth:s?Number(i)*24/Number(t):i,className:Tw("lucide",r),...!n&&!eN(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(e,t)=>{const i=S.forwardRef(({className:s,...r},n)=>S.createElement(tN,{ref:n,iconNode:t,className:Tw(`lucide-${ZE(S0(e))}`,`lucide-${e}`,s),...r}));return i.displayName=S0(e),i};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],sN=ce("arrow-down",iN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],nN=ce("arrow-up",rN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],iu=ce("bot",oN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],un=ce("brain",aN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Pw=ce("chevron-down",lN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Mw=ce("chevron-left",cN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qp=ce("chevron-right",hN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ts=ce("circle-check",uN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],fN=ce("circle-dot",dN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],su=ce("circle",pN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],kl=ce("clipboard-list",mN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_N=ce("copy",gN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ur=ce("cpu",vN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],xN=ce("external-link",yN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],SN=ce("file-plus",wN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M15 2h-4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"14sh0y"}],["path",{d:"M16.706 2.706A2.4 2.4 0 0 0 15 2v5a1 1 0 0 0 1 1h5a2.4 2.4 0 0 0-.706-1.706z",key:"1970lx"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],b0=ce("files",bN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],kN=ce("folder-plus",CN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M15 6a9 9 0 0 0-9 9V3",key:"1cii5b"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}]],ru=ce("git-branch",EN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],TN=ce("git-commit-horizontal",NN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],C0=ce("info",PN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],jN=ce("layout-dashboard",MN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],LN=ce("maximize-2",DN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],k0=ce("menu",RN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Od=ce("message-square",AN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ON=ce("minimize-2",BN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],E0=ce("package",IN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zN=ce("pen",$N);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],jw=ce("pin",FN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nu=ce("play",HN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ou=ce("plus",VN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],is=ce("rotate-cw",WN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],N0=ce("scroll-text",UN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Hr=ce("search",KN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YN=ce("settings",qN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Ao=ce("terminal",GN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],dr=ce("trash-2",XN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vr=ce("triangle-alert",ZN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aa=ce("x",JN);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ui=ce("zap",QN);var Dw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},T0=pr.createContext&&pr.createContext(Dw),eT=["attr","size","title"];function tT(e,t){if(e==null)return{};var i=iT(e,t),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function iT(e,t){if(e==null)return{};var i={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function uc(){return uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},uc.apply(this,arguments)}function P0(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),i.push.apply(i,s)}return i}function dc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?P0(Object(i),!0).forEach(function(s){sT(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P0(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function sT(e,t,i){return t=rT(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rT(e){var t=nT(e,"string");return typeof t=="symbol"?t:t+""}function nT(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lw(e){return e&&e.map((t,i)=>pr.createElement(t.tag,dc({key:i},t.attr),Lw(t.child)))}function Kt(e){return t=>pr.createElement(oT,uc({attr:dc({},e.attr)},t),Lw(e.child))}function oT(e){var t=i=>{var{attr:s,size:r,title:n}=e,o=tT(e,eT),a=r||i.size||"1em",l;return i.className&&(l=i.className),e.className&&(l=(l?l+" ":"")+e.className),pr.createElement("svg",uc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,s,o,{className:l,style:dc(dc({color:e.color||i.color},i.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),n&&pr.createElement("title",null,n),e.children)};return T0!==void 0?pr.createElement(T0.Consumer,null,i=>t(i)):t(Dw)}function aT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"},child:[]}]})(e)}function lT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187"},child:[]}]})(e)}function cT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"},child:[]}]})(e)}function hT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"},child:[]}]})(e)}function uT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.27 19.385H1.73A1.73 1.73 0 010 17.655V6.345a1.73 1.73 0 011.73-1.73h20.54A1.73 1.73 0 0124 6.345v11.308a1.73 1.73 0 01-1.73 1.731zM5.769 15.923v-4.5l2.308 2.885 2.307-2.885v4.5h2.308V8.078h-2.308l-2.307 2.885-2.308-2.885H3.46v7.847zM21.232 12h-2.309V8.077h-2.307V12h-2.308l3.461 4.039z"},child:[]}]})(e)}function dT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"},child:[]}]})(e)}function fT(e){return Kt({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"},child:[]}]})(e)}function pT(e){return Kt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"},child:[]}]})(e)}function mT(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 1h-13l-.5.5v3l.5.5H2v8.5l.5.5h11l.5-.5V5h.5l.5-.5v-3l-.5-.5zm-1 3H2V2h12v2h-.5zM3 13V5h10v8H3zm8-6H5v1h6V7z"},child:[]}]})(e)}function gT(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2 2h6v3.5l.5.5H12v1h1V4.8l-.15-.36-3.28-3.3L9.22 1H1.5l-.5.5v13l.5.5H5v-1H2V2zm7 0l3 3H9V2zm5.5 6h-8l-.5.5v6l.5.5h8l.5-.5v-6l-.5-.5zM14 9v4l-1.63-1.6h-.71l-1.16 1.17-2.13-2.13h-.71L7 11.1V9h7zm-2.8 4.27l.81-.81L13.55 14h-1.62l-.73-.73zM7 14v-1.49l1-1L10.52 14H7zm5.5-3.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"},child:[]}]})(e)}function _T(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.71 4.29l-3-3L10 1H4L3 2v12l1 1h9l1-1V5l-.29-.71zM13 14H4V2h5v4h4v8zm-3-9V2l3 3h-3z"},child:[]}]})(e)}function Rw(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1.5 14h11l.48-.37 2.63-7-.48-.63H14V3.5l-.5-.5H7.71l-.86-.85L6.5 2h-5l-.5.5v11l.5.5zM2 3h4.29l.86.85.35.15H13v2H8.5l-.35.15-.86.85H3.5l-.47.34-1 3.08L2 3zm10.13 10H2.19l1.67-5H7.5l.35-.15.86-.85h5.79l-2.37 6z"},child:[]}]})(e)}function Aw(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14.5 3H7.71l-.85-.85L6.51 2h-5l-.5.5v11l.5.5h13l.5-.5v-10L14.5 3zm-.51 8.49V13h-12V7h4.49l.35-.15.86-.86H14v1.5l-.01 4zm0-6.49h-6.5l-.35.15-.86.86H2v-3h4.29l.85.85.36.15H14l-.01.99z"},child:[]}]})(e)}function vT(e){return Kt({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2.984V2h-.09c-.313 0-.616.062-.909.185a2.33 2.33 0 0 0-.775.53 2.23 2.23 0 0 0-.493.753v.001a3.542 3.542 0 0 0-.198.83v.002a6.08 6.08 0 0 0-.024.863c.012.29.018.58.018.869 0 .203-.04.393-.117.572v.001a1.504 1.504 0 0 1-.765.787 1.376 1.376 0 0 1-.558.115H2v.984h.09c.195 0 .38.04.556.121l.001.001c.178.078.329.184.455.318l.002.002c.13.13.233.285.307.465l.001.002c.078.18.117.368.117.566 0 .29-.006.58-.018.869-.012.296-.004.585.024.87v.001c.033.283.099.558.197.824v.001c.106.273.271.524.494.753.223.23.482.407.775.53.293.123.596.185.91.185H6v-.984h-.09c-.2 0-.387-.038-.563-.115a1.613 1.613 0 0 1-.457-.32 1.659 1.659 0 0 1-.309-.467c-.074-.18-.11-.37-.11-.573 0-.228.003-.453.011-.672.008-.228.008-.45 0-.665a4.639 4.639 0 0 0-.055-.64 2.682 2.682 0 0 0-.168-.609A2.284 2.284 0 0 0 3.522 8a2.284 2.284 0 0 0 .738-.955c.08-.192.135-.393.168-.602.033-.21.051-.423.055-.64.008-.22.008-.442 0-.666-.008-.224-.012-.45-.012-.678a1.47 1.47 0 0 1 .877-1.354 1.33 1.33 0 0 1 .563-.121H6zm4 10.032V14h.09c.313 0 .616-.062.909-.185.293-.123.552-.3.775-.53.223-.23.388-.48.493-.753v-.001c.1-.266.165-.543.198-.83v-.002c.028-.28.036-.567.024-.863-.012-.29-.018-.58-.018-.869 0-.203.04-.393.117-.572v-.001a1.502 1.502 0 0 1 .765-.787 1.38 1.38 0 0 1 .558-.115H14v-.984h-.09c-.196 0-.381-.04-.557-.121l-.001-.001a1.376 1.376 0 0 1-.455-.318l-.002-.002a1.415 1.415 0 0 1-.307-.465v-.002a1.405 1.405 0 0 1-.118-.566c0-.29.006-.58.018-.869a6.174 6.174 0 0 0-.024-.87v-.001a3.537 3.537 0 0 0-.197-.824v-.001a2.23 2.23 0 0 0-.494-.753 2.331 2.331 0 0 0-.775-.53 2.325 2.325 0 0 0-.91-.185H10v.984h.09c.2 0 .387.038.562.115.174.082.326.188.457.32.127.134.23.29.309.467.074.18.11.37.11.573 0 .228-.003.452-.011.672-.008.228-.008.45 0 .665.004.222.022.435.055.64.033.214.089.416.168.609a2.285 2.285 0 0 0 .738.955 2.285 2.285 0 0 0-.738.955 2.689 2.689 0 0 0-.168.602c-.033.21-.051.423-.055.64a9.15 9.15 0 0 0 0 .666c.008.224.012.45.012.678a1.471 1.471 0 0 1-.877 1.354 1.33 1.33 0 0 1-.563.121H10z"},child:[]}]})(e)}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var Bw=Object.defineProperty,yT=Object.getOwnPropertyDescriptor,xT=(e,t)=>{for(var i in t)Bw(e,i,{get:t[i],enumerable:!0})},Ve=(e,t,i,s)=>{for(var r=s>1?void 0:s?yT(t,i):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(r=(s?o(t,i,r):o(r))||r);return s&&r&&Bw(t,i,r),r},K=(e,t)=>(i,s)=>t(i,s,e),M0="Terminal input",Id={get:()=>M0,set:e=>M0=e},j0="Too much output to announce, navigate to rows manually to read",$d={get:()=>j0,set:e=>j0=e};function wT(e){return e.replace(/\r?\n/g,"\r")}function ST(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function bT(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function CT(e,t,i,s){if(e.stopPropagation(),e.clipboardData){let r=e.clipboardData.getData("text/plain");Ow(r,t,i,s)}}function Ow(e,t,i,s){e=wT(e),e=ST(e,i.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),i.triggerDataEvent(e,!0),t.value=""}function Iw(e,t,i){let s=i.getBoundingClientRect(),r=e.clientX-s.left-10,n=e.clientY-s.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${r}px`,t.style.top=`${n}px`,t.style.zIndex="1000",t.focus()}function D0(e,t,i,s,r){Iw(e,t,i),r&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}function Ps(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function $c(e,t=0,i=e.length){let s="";for(let r=t;r<i;++r){let n=e[r];n>65535?(n-=65536,s+=String.fromCharCode((n>>10)+55296)+String.fromCharCode(n%1024+56320)):s+=String.fromCharCode(n)}return s}var kT=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let i=e.length;if(!i)return 0;let s=0,r=0;if(this._interim){let n=e.charCodeAt(r++);56320<=n&&n<=57343?t[s++]=(this._interim-55296)*1024+n-56320+65536:(t[s++]=this._interim,t[s++]=n),this._interim=0}for(let n=r;n<i;++n){let o=e.charCodeAt(n);if(55296<=o&&o<=56319){if(++n>=i)return this._interim=o,s;let a=e.charCodeAt(n);56320<=a&&a<=57343?t[s++]=(o-55296)*1024+a-56320+65536:(t[s++]=o,t[s++]=a);continue}o!==65279&&(t[s++]=o)}return s}},ET=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let i=e.length;if(!i)return 0;let s=0,r,n,o,a,l=0,c=0;if(this.interim[0]){let p=!1,m=this.interim[0];m&=(m&224)===192?31:(m&240)===224?15:7;let _=0,v;for(;(v=this.interim[++_]&63)&&_<4;)m<<=6,m|=v;let b=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,g=b-_;for(;c<g;){if(c>=i)return 0;if(v=e[c++],(v&192)!==128){c--,p=!0;break}else this.interim[_++]=v,m<<=6,m|=v&63}p||(b===2?m<128?c--:t[s++]=m:b===3?m<2048||m>=55296&&m<=57343||m===65279||(t[s++]=m):m<65536||m>1114111||(t[s++]=m)),this.interim.fill(0)}let d=i-4,f=c;for(;f<i;){for(;f<d&&!((r=e[f])&128)&&!((n=e[f+1])&128)&&!((o=e[f+2])&128)&&!((a=e[f+3])&128);)t[s++]=r,t[s++]=n,t[s++]=o,t[s++]=a,f+=4;if(r=e[f++],r<128)t[s++]=r;else if((r&224)===192){if(f>=i)return this.interim[0]=r,s;if(n=e[f++],(n&192)!==128){f--;continue}if(l=(r&31)<<6|n&63,l<128){f--;continue}t[s++]=l}else if((r&240)===224){if(f>=i)return this.interim[0]=r,s;if(n=e[f++],(n&192)!==128){f--;continue}if(f>=i)return this.interim[0]=r,this.interim[1]=n,s;if(o=e[f++],(o&192)!==128){f--;continue}if(l=(r&15)<<12|(n&63)<<6|o&63,l<2048||l>=55296&&l<=57343||l===65279)continue;t[s++]=l}else if((r&248)===240){if(f>=i)return this.interim[0]=r,s;if(n=e[f++],(n&192)!==128){f--;continue}if(f>=i)return this.interim[0]=r,this.interim[1]=n,s;if(o=e[f++],(o&192)!==128){f--;continue}if(f>=i)return this.interim[0]=r,this.interim[1]=n,this.interim[2]=o,s;if(a=e[f++],(a&192)!==128){f--;continue}if(l=(r&7)<<18|(n&63)<<12|(o&63)<<6|a&63,l<65536||l>1114111)continue;t[s++]=l}}return s}},$w="",As=" ",xa=class zw{constructor(){this.fg=0,this.bg=0,this.extended=new fc}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new zw;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},fc=class Fw{constructor(t=0,i=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new Fw(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},_i=class Hw extends xa{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new fc,this.combinedData=""}static fromCharData(t){let i=new Hw;return i.setFromCharData(t),i}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Ps(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let i=!1;if(t[1].length>2)i=!0;else if(t[1].length===2){let s=t[1].charCodeAt(0);if(55296<=s&&s<=56319){let r=t[1].charCodeAt(1);56320<=r&&r<=57343?this.content=(s-55296)*1024+r-56320+65536|t[2]<<22:i=!0}else i=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;i&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},L0="di$target",zd="di$dependencies",au=new Map;function NT(e){return e[zd]||[]}function ft(e){if(au.has(e))return au.get(e);let t=function(i,s,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");TT(t,i,r)};return t._id=e,au.set(e,t),t}function TT(e,t,i){t[L0]===t?t[zd].push({id:e,index:i}):(t[zd]=[{id:e,index:i}],t[L0]=t)}var Ot=ft("BufferService"),Vw=ft("CoreMouseService"),Tr=ft("CoreService"),PT=ft("CharsetService"),Yp=ft("InstantiationService"),Ww=ft("LogService"),It=ft("OptionsService"),Uw=ft("OscLinkService"),MT=ft("UnicodeService"),wa=ft("DecorationService"),Fd=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var d;let i=this._bufferService.buffer.lines.get(e-1);if(!i){t(void 0);return}let s=[],r=this._optionsService.rawOptions.linkHandler,n=new _i,o=i.getTrimmedLength(),a=-1,l=-1,c=!1;for(let f=0;f<o;f++)if(!(l===-1&&!i.hasContent(f))){if(i.loadCell(f,n),n.hasExtendedAttrs()&&n.extended.urlId)if(l===-1){l=f,a=n.extended.urlId;continue}else c=n.extended.urlId!==a;else l!==-1&&(c=!0);if(c||l!==-1&&f===o-1){let p=(d=this._oscLinkService.getLinkData(a))==null?void 0:d.uri;if(p){let m={start:{x:l+1,y:e},end:{x:f+(!c&&f===o-1?1:0),y:e}},_=!1;if(!(r!=null&&r.allowNonHttpProtocols))try{let v=new URL(p);["http:","https:"].includes(v.protocol)||(_=!0)}catch{_=!0}_||s.push({text:p,range:m,activate:(v,b)=>r?r.activate(v,b,m):jT(v,b),hover:(v,b)=>{var g;return(g=r==null?void 0:r.hover)==null?void 0:g.call(r,v,b,m)},leave:(v,b)=>{var g;return(g=r==null?void 0:r.leave)==null?void 0:g.call(r,v,b,m)}})}c=!1,n.hasExtendedAttrs()&&n.extended.urlId?(l=f,a=n.extended.urlId):(l=-1,a=-1)}}t(s)}};Fd=Ve([K(0,Ot),K(1,It),K(2,Uw)],Fd);function jT(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var zc=ft("CharSizeService"),gs=ft("CoreBrowserService"),Gp=ft("MouseService"),_s=ft("RenderService"),DT=ft("SelectionService"),Kw=ft("CharacterJoinerService"),An=ft("ThemeService"),qw=ft("LinkProviderService"),LT=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?R0.isErrorNoTelemetry(e)?new R0(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},RT=new LT;function El(e){AT(e)||RT.onUnexpectedError(e)}var Hd="Canceled";function AT(e){return e instanceof BT?!0:e instanceof Error&&e.name===Hd&&e.message===Hd}var BT=class extends Error{constructor(){super(Hd),this.name=this.message}};function OT(e){return new Error(`Illegal argument: ${e}`)}var R0=class Vd extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Vd)return t;let i=new Vd;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Wd=class Yw extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,Yw.prototype)}};function Xt(e,t=0){return e[e.length-(1+t)]}var IT;(e=>{function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function s(n){return n>0}e.isGreaterThan=s;function r(n){return n===0}e.isNeitherLessOrGreaterThan=r,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(IT||(IT={}));function $T(e,t){let i=this,s=!1,r;return function(){return s||(s=!0,t||(r=e.apply(i,arguments))),r}}var Gw;(e=>{function t(C){return C&&typeof C=="object"&&typeof C[Symbol.iterator]=="function"}e.is=t;let i=Object.freeze([]);function s(){return i}e.empty=s;function*r(C){yield C}e.single=r;function n(C){return t(C)?C:r(C)}e.wrap=n;function o(C){return C||i}e.from=o;function*a(C){for(let k=C.length-1;k>=0;k--)yield C[k]}e.reverse=a;function l(C){return!C||C[Symbol.iterator]().next().done===!0}e.isEmpty=l;function c(C){return C[Symbol.iterator]().next().value}e.first=c;function d(C,k){let T=0;for(let L of C)if(k(L,T++))return!0;return!1}e.some=d;function f(C,k){for(let T of C)if(k(T))return T}e.find=f;function*p(C,k){for(let T of C)k(T)&&(yield T)}e.filter=p;function*m(C,k){let T=0;for(let L of C)yield k(L,T++)}e.map=m;function*_(C,k){let T=0;for(let L of C)yield*k(L,T++)}e.flatMap=_;function*v(...C){for(let k of C)yield*k}e.concat=v;function b(C,k,T){let L=T;for(let P of C)L=k(L,P);return L}e.reduce=b;function*g(C,k,T=C.length){for(k<0&&(k+=C.length),T<0?T+=C.length:T>C.length&&(T=C.length);k<T;k++)yield C[k]}e.slice=g;function y(C,k=Number.POSITIVE_INFINITY){let T=[];if(k===0)return[T,C];let L=C[Symbol.iterator]();for(let P=0;P<k;P++){let q=L.next();if(q.done)return[T,e.empty()];T.push(q.value)}return[T,{[Symbol.iterator](){return L}}]}e.consume=y;async function x(C){let k=[];for await(let T of C)k.push(T);return Promise.resolve(k)}e.asyncToArray=x})(Gw||(Gw={}));function Cr(e){if(Gw.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(s){t.push(s)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function zT(...e){return Me(()=>Cr(e))}function Me(e){return{dispose:$T(()=>{e()})}}var Xw=class Zw{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Cr(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Zw.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};Xw.DISABLE_DISPOSED_WARNING=!1;var Ws=Xw,le=class{constructor(){this._store=new Ws,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};le.None=Object.freeze({dispose(){}});var Tn=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},ls=typeof window=="object"?window:globalThis,Ud=class Kd{constructor(t){this.element=t,this.next=Kd.Undefined,this.prev=Kd.Undefined}};Ud.Undefined=new Ud(void 0);var Le=Ud,A0=class{constructor(){this._first=Le.Undefined,this._last=Le.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Le.Undefined}clear(){let e=this._first;for(;e!==Le.Undefined;){let t=e.next;e.prev=Le.Undefined,e.next=Le.Undefined,e=t}this._first=Le.Undefined,this._last=Le.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Le(e);if(this._first===Le.Undefined)this._first=i,this._last=i;else if(t){let r=this._last;this._last=i,i.prev=r,r.next=i}else{let r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Le.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Le.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Le.Undefined&&e.next!==Le.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Le.Undefined&&e.next===Le.Undefined?(this._first=Le.Undefined,this._last=Le.Undefined):e.next===Le.Undefined?(this._last=this._last.prev,this._last.next=Le.Undefined):e.prev===Le.Undefined&&(this._first=this._first.next,this._first.prev=Le.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Le.Undefined;)yield e.element,e=e.next}},FT=globalThis.performance&&typeof globalThis.performance.now=="function",HT=class Jw{static create(t){return new Jw(t)}constructor(t){this._now=FT&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},xt;(e=>{e.None=()=>le.None;function t(R,M){return f(R,()=>{},0,void 0,!0,void 0,M)}e.defer=t;function i(R){return(M,z=null,I)=>{let V=!1,W;return W=R(E=>{if(!V)return W?W.dispose():V=!0,M.call(z,E)},null,I),V&&W.dispose(),W}}e.once=i;function s(R,M,z){return c((I,V=null,W)=>R(E=>I.call(V,M(E)),null,W),z)}e.map=s;function r(R,M,z){return c((I,V=null,W)=>R(E=>{M(E),I.call(V,E)},null,W),z)}e.forEach=r;function n(R,M,z){return c((I,V=null,W)=>R(E=>M(E)&&I.call(V,E),null,W),z)}e.filter=n;function o(R){return R}e.signal=o;function a(...R){return(M,z=null,I)=>{let V=zT(...R.map(W=>W(E=>M.call(z,E))));return d(V,I)}}e.any=a;function l(R,M,z,I){let V=z;return s(R,W=>(V=M(V,W),V),I)}e.reduce=l;function c(R,M){let z,I={onWillAddFirstListener(){z=R(V.fire,V)},onDidRemoveLastListener(){z==null||z.dispose()}},V=new O(I);return M==null||M.add(V),V.event}function d(R,M){return M instanceof Array?M.push(R):M&&M.add(R),R}function f(R,M,z=100,I=!1,V=!1,W,E){let B,U,Q,oe=0,je,xe={leakWarningThreshold:W,onWillAddFirstListener(){B=R(_e=>{oe++,U=M(U,_e),I&&!Q&&(Ye.fire(U),U=void 0),je=()=>{let De=U;U=void 0,Q=void 0,(!I||oe>1)&&Ye.fire(De),oe=0},typeof z=="number"?(clearTimeout(Q),Q=setTimeout(je,z)):Q===void 0&&(Q=0,queueMicrotask(je))})},onWillRemoveListener(){V&&oe>0&&(je==null||je())},onDidRemoveLastListener(){je=void 0,B.dispose()}},Ye=new O(xe);return E==null||E.add(Ye),Ye.event}e.debounce=f;function p(R,M=0,z){return e.debounce(R,(I,V)=>I?(I.push(V),I):[V],M,void 0,!0,void 0,z)}e.accumulate=p;function m(R,M=(I,V)=>I===V,z){let I=!0,V;return n(R,W=>{let E=I||!M(W,V);return I=!1,V=W,E},z)}e.latch=m;function _(R,M,z){return[e.filter(R,M,z),e.filter(R,I=>!M(I),z)]}e.split=_;function v(R,M=!1,z=[],I){let V=z.slice(),W=R(U=>{V?V.push(U):B.fire(U)});I&&I.add(W);let E=()=>{V==null||V.forEach(U=>B.fire(U)),V=null},B=new O({onWillAddFirstListener(){W||(W=R(U=>B.fire(U)),I&&I.add(W))},onDidAddFirstListener(){V&&(M?setTimeout(E):E())},onDidRemoveLastListener(){W&&W.dispose(),W=null}});return I&&I.add(B),B.event}e.buffer=v;function b(R,M){return(z,I,V)=>{let W=M(new y);return R(function(E){let B=W.evaluate(E);B!==g&&z.call(I,B)},void 0,V)}}e.chain=b;let g=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(M){return this.steps.push(M),this}forEach(M){return this.steps.push(z=>(M(z),z)),this}filter(M){return this.steps.push(z=>M(z)?z:g),this}reduce(M,z){let I=z;return this.steps.push(V=>(I=M(I,V),I)),this}latch(M=(z,I)=>z===I){let z=!0,I;return this.steps.push(V=>{let W=z||!M(V,I);return z=!1,I=V,W?V:g}),this}evaluate(M){for(let z of this.steps)if(M=z(M),M===g)break;return M}}function x(R,M,z=I=>I){let I=(...B)=>E.fire(z(...B)),V=()=>R.on(M,I),W=()=>R.removeListener(M,I),E=new O({onWillAddFirstListener:V,onDidRemoveLastListener:W});return E.event}e.fromNodeEventEmitter=x;function C(R,M,z=I=>I){let I=(...B)=>E.fire(z(...B)),V=()=>R.addEventListener(M,I),W=()=>R.removeEventListener(M,I),E=new O({onWillAddFirstListener:V,onDidRemoveLastListener:W});return E.event}e.fromDOMEventEmitter=C;function k(R){return new Promise(M=>i(R)(M))}e.toPromise=k;function T(R){let M=new O;return R.then(z=>{M.fire(z)},()=>{M.fire(void 0)}).finally(()=>{M.dispose()}),M.event}e.fromPromise=T;function L(R,M){return R(z=>M.fire(z))}e.forward=L;function P(R,M,z){return M(z),R(I=>M(I))}e.runAndSubscribe=P;class q{constructor(M,z){this._observable=M,this._counter=0,this._hasChanged=!1;let I={onWillAddFirstListener:()=>{M.addObserver(this)},onDidRemoveLastListener:()=>{M.removeObserver(this)}};this.emitter=new O(I),z&&z.add(this.emitter)}beginUpdate(M){this._counter++}handlePossibleChange(M){}handleChange(M,z){this._hasChanged=!0}endUpdate(M){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(R,M){return new q(R,M).emitter.event}e.fromObservable=H;function ee(R){return(M,z,I)=>{let V=0,W=!1,E={beginUpdate(){V++},endUpdate(){V--,V===0&&(R.reportChanges(),W&&(W=!1,M.call(z)))},handlePossibleChange(){},handleChange(){W=!0}};R.addObserver(E),R.reportChanges();let B={dispose(){R.removeObserver(E)}};return I instanceof Ws?I.add(B):Array.isArray(I)&&I.push(B),B}}e.fromObservableLight=ee})(xt||(xt={}));var qd=class Yd{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Yd._idPool++}`,Yd.all.add(this)}start(t){this._stopWatch=new HT,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};qd.all=new Set,qd._idPool=0;var VT=qd,WT=-1,Qw=class eS{constructor(t,i,s=(eS._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=i,this.name=s,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,i){let s=this.threshold;if(s<=0||i<s)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);let l=new qT(a,n);this._errorHandler(l)}return()=>{let n=this._stacks.get(t.value)||0;this._stacks.set(t.value,n-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,i=0;for(let[s,r]of this._stacks)(!t||i<r)&&(t=[s,r],i=r);return t}};Qw._idPool=1;var UT=Qw,KT=class tS{constructor(t){this.value=t}static create(){let t=new Error;return new tS(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},qT=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},YT=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},GT=0,lu=class{constructor(e){this.value=e,this.id=GT++}},XT=2,ZT,O=class{constructor(t){var i,s,r,n;this._size=0,this._options=t,this._leakageMon=(i=this._options)!=null&&i.leakWarningThreshold?new UT((t==null?void 0:t.onListenerError)??El,((s=this._options)==null?void 0:s.leakWarningThreshold)??WT):void 0,this._perfMon=(r=this._options)!=null&&r._profName?new VT(this._options._profName):void 0,this._deliveryQueue=(n=this._options)==null?void 0:n.deliveryQueue}dispose(){var t,i,s,r;this._disposed||(this._disposed=!0,((t=this._deliveryQueue)==null?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(s=(i=this._options)==null?void 0:i.onDidRemoveLastListener)==null||s.call(i),(r=this._leakageMon)==null||r.dispose())}get event(){return this._event??(this._event=(t,i,s)=>{var a,l,c,d,f;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let p=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(p);let m=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],_=new YT(`${p}. HINT: Stack shows most frequent listener (${m[1]}-times)`,m[0]);return(((a=this._options)==null?void 0:a.onListenerError)||El)(_),le.None}if(this._disposed)return le.None;i&&(t=t.bind(i));let r=new lu(t),n;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(r.stack=KT.create(),n=this._leakageMon.check(r.stack,this._size+1)),this._listeners?this._listeners instanceof lu?(this._deliveryQueue??(this._deliveryQueue=new JT),this._listeners=[this._listeners,r]):this._listeners.push(r):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=r,(f=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||f.call(d,this)),this._size++;let o=Me(()=>{n==null||n(),this._removeListener(r)});return s instanceof Ws?s.add(o):Array.isArray(s)&&s.push(o),o}),this._event}_removeListener(t){var n,o,a,l;if((o=(n=this._options)==null?void 0:n.onWillRemoveListener)==null||o.call(n,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}let i=this._listeners,s=i.indexOf(t);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[s]=void 0;let r=this._deliveryQueue.current===this;if(this._size*XT<=i.length){let c=0;for(let d=0;d<i.length;d++)i[d]?i[c++]=i[d]:r&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=c}}_deliver(t,i){var r;if(!t)return;let s=((r=this._options)==null?void 0:r.onListenerError)||El;if(!s){t.value(i);return}try{t.value(i)}catch(n){s(n)}}_deliverQueue(t){let i=t.current._listeners;for(;t.i<t.end;)this._deliver(i[t.i++],t.value);t.reset()}fire(t){var i,s,r,n;if((i=this._deliveryQueue)!=null&&i.current&&(this._deliverQueue(this._deliveryQueue),(s=this._perfMon)==null||s.stop()),(r=this._perfMon)==null||r.start(this._size),this._listeners)if(this._listeners instanceof lu)this._deliver(this._listeners,t);else{let o=this._deliveryQueue;o.enqueue(this,t,this._listeners.length),this._deliverQueue(o)}(n=this._perfMon)==null||n.stop()}hasListeners(){return this._size>0}},JT=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Gd=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new O,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new O,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,i){if(this.getZoomLevel(i)===t)return;let s=this.getWindowId(i);this.mapWindowIdToZoomLevel.set(s,t),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,i){this.mapWindowIdToZoomFactor.set(this.getWindowId(i),t)}setFullscreen(t,i){if(this.isFullscreen(i)===t)return;let s=this.getWindowId(i);this.mapWindowIdToFullScreen.set(s,t),this._onDidChangeFullscreen.fire(s)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};Gd.INSTANCE=new Gd;var Xp=Gd;function QT(e,t,i){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",i)}Xp.INSTANCE.onDidChangeZoomLevel;function e6(e){return Xp.INSTANCE.getZoomFactor(e)}Xp.INSTANCE.onDidChangeFullscreen;var Bn=typeof navigator=="object"?navigator.userAgent:"",Xd=Bn.indexOf("Firefox")>=0,t6=Bn.indexOf("AppleWebKit")>=0,Zp=Bn.indexOf("Chrome")>=0,i6=!Zp&&Bn.indexOf("Safari")>=0;Bn.indexOf("Electron/")>=0;Bn.indexOf("Android")>=0;var cu=!1;if(typeof ls.matchMedia=="function"){let e=ls.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=ls.matchMedia("(display-mode: fullscreen)");cu=e.matches,QT(ls,e,({matches:i})=>{cu&&t.matches||(cu=i)})}var dn="en",Zd=!1,Jd=!1,Nl=!1,iS=!1,tl,Tl=dn,B0=dn,s6,Ei,vr=globalThis,yt,Ev;typeof vr.vscode<"u"&&typeof vr.vscode.process<"u"?yt=vr.vscode.process:typeof process<"u"&&typeof((Ev=process==null?void 0:process.versions)==null?void 0:Ev.node)=="string"&&(yt=process);var Nv,r6=typeof((Nv=yt==null?void 0:yt.versions)==null?void 0:Nv.electron)=="string",n6=r6&&(yt==null?void 0:yt.type)==="renderer",Tv;if(typeof yt=="object"){Zd=yt.platform==="win32",Jd=yt.platform==="darwin",Nl=yt.platform==="linux",Nl&&yt.env.SNAP&&yt.env.SNAP_REVISION,yt.env.CI||yt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,tl=dn,Tl=dn;let e=yt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);tl=t.userLocale,B0=t.osLocale,Tl=t.resolvedLanguage||dn,s6=(Tv=t.languagePack)==null?void 0:Tv.translationsConfigFile}catch{}iS=!0}else typeof navigator=="object"&&!n6?(Ei=navigator.userAgent,Zd=Ei.indexOf("Windows")>=0,Jd=Ei.indexOf("Macintosh")>=0,(Ei.indexOf("Macintosh")>=0||Ei.indexOf("iPad")>=0||Ei.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Nl=Ei.indexOf("Linux")>=0,(Ei==null?void 0:Ei.indexOf("Mobi"))>=0,Tl=globalThis._VSCODE_NLS_LANGUAGE||dn,tl=navigator.language.toLowerCase(),B0=tl):console.error("Unable to resolve platform.");var sS=Zd,Zi=Jd,o6=Nl,O0=iS,Qi=Ei,Ss=Tl,a6;(e=>{function t(){return Ss}e.value=t;function i(){return Ss.length===2?Ss==="en":Ss.length>=3?Ss[0]==="e"&&Ss[1]==="n"&&Ss[2]==="-":!1}e.isDefaultVariant=i;function s(){return Ss==="en"}e.isDefault=s})(a6||(a6={}));var l6=typeof vr.postMessage=="function"&&!vr.importScripts;(()=>{if(l6){let e=[];vr.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let s=0,r=e.length;s<r;s++){let n=e[s];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(s,1),n.callback();return}}});let t=0;return i=>{let s=++t;e.push({id:s,callback:i}),vr.postMessage({vscodeScheduleAsyncWork:s},"*")}}return e=>setTimeout(e)})();var c6=!!(Qi&&Qi.indexOf("Chrome")>=0);Qi&&Qi.indexOf("Firefox")>=0;!c6&&Qi&&Qi.indexOf("Safari")>=0;Qi&&Qi.indexOf("Edg/")>=0;Qi&&Qi.indexOf("Android")>=0;var Wr=typeof navigator=="object"?navigator:{};O0||document.queryCommandSupported&&document.queryCommandSupported("copy")||Wr&&Wr.clipboard&&Wr.clipboard.writeText,O0||Wr&&Wr.clipboard&&Wr.clipboard.readText;var Jp=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},hu=new Jp,I0=new Jp,$0=new Jp,h6=new Array(230),rS;(e=>{function t(a){return hu.keyCodeToStr(a)}e.toString=t;function i(a){return hu.strToKeyCode(a)}e.fromString=i;function s(a){return I0.keyCodeToStr(a)}e.toUserSettingsUS=s;function r(a){return $0.keyCodeToStr(a)}e.toUserSettingsGeneral=r;function n(a){return I0.strToKeyCode(a)||$0.strToKeyCode(a)}e.fromUserSettings=n;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return hu.keyCodeToStr(a)}e.toElectronAccelerator=o})(rS||(rS={}));var u6=class nS{constructor(t,i,s,r,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=s,this.metaKey=r,this.keyCode=n}equals(t){return t instanceof nS&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",s=this.altKey?"1":"0",r=this.metaKey?"1":"0";return`K${t}${i}${s}${r}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new d6([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},d6=class{constructor(e){if(e.length===0)throw OT("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function f6(e){if(e.charCode){let i=String.fromCharCode(e.charCode).toUpperCase();return rS.fromString(i)}let t=e.keyCode;if(t===3)return 7;if(Xd)switch(t){case 59:return 85;case 60:if(o6)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Zi)return 57;break}else if(t6&&(Zi&&t===93||!Zi&&t===92))return 57;return h6[t]||0}var p6=Zi?256:2048,m6=512,g6=1024,_6=Zi?2048:256,z0=class{constructor(e){var i;this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=f6(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=p6),this.altKey&&(t|=m6),this.shiftKey&&(t|=g6),this.metaKey&&(t|=_6),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new u6(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},F0=new WeakMap;function v6(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if(t.origin!=="null"&&i.origin!=="null"&&t.origin!==i.origin)return null}catch{return null}return e.parent}var y6=class{static getSameOriginWindowChain(e){let t=F0.get(e);if(!t){t=[],F0.set(e,t);let i=e,s;do s=v6(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0,r=this.getSameOriginWindowChain(e);for(let n of r){let o=n.window.deref();if(i+=(o==null?void 0:o.scrollY)??0,s+=(o==null?void 0:o.scrollX)??0,o===t||!n.iframeElement)break;let a=n.iframeElement.getBoundingClientRect();i+=a.top,s+=a.left}return{top:i,left:s}}},il=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=y6.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},H0=class{constructor(e,t=0,i=0){var r;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(Zp){let n=navigator.userAgent.match(/Chrome\/(\d+)/);s=(n?parseInt(n[1]):123)<=122}if(e){let n=e,o=e,a=((r=e.view)==null?void 0:r.devicePixelRatio)||1;if(typeof n.wheelDeltaY<"u")s?this.deltaY=n.wheelDeltaY/(120*a):this.deltaY=n.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Xd&&!Zi?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof n.wheelDeltaX<"u")i6&&sS?this.deltaX=-(n.wheelDeltaX/120):s?this.deltaX=n.wheelDeltaX/(120*a):this.deltaX=n.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Xd&&!Zi?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},oS=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),x6;(e=>{function t(i){return i===e.None||i===e.Cancelled||i instanceof w6?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:xt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:oS})})(x6||(x6={}));var w6=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?oS:(this._emitter||(this._emitter=new O),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Qp=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Wd("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Wd("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},S6=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Wd("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=i.setInterval(()=>{e()},t);this.disposable=Me(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},b6;(e=>{async function t(s){let r,n=await Promise.all(s.map(o=>o.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return n}e.settled=t;function i(s){return new Promise(async(r,n)=>{try{await s(r,n)}catch(o){n(o)}})}e.withAsyncBody=i})(b6||(b6={}));var V0=class ci{static fromArray(t){return new ci(i=>{i.emitMany(t)})}static fromPromise(t){return new ci(async i=>{i.emitMany(await t)})}static fromPromises(t){return new ci(async i=>{await Promise.all(t.map(async s=>i.emitOne(await s)))})}static merge(t){return new ci(async i=>{await Promise.all(t.map(async s=>{for await(let r of s)i.emitOne(r)}))})}constructor(t,i){this._state=0,this._results=[],this._error=null,this._onReturn=i,this._onStateChanged=new O,queueMicrotask(async()=>{let s={emitOne:r=>this.emitOne(r),emitMany:r=>this.emitMany(r),reject:r=>this.reject(r)};try{await Promise.resolve(t(s)),this.resolve()}catch(r){this.reject(r)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await xt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var i;return(i=this._onReturn)==null||i.call(this),{done:!0,value:void 0}}}}static map(t,i){return new ci(async s=>{for await(let r of t)s.emitOne(i(r))})}map(t){return ci.map(this,t)}static filter(t,i){return new ci(async s=>{for await(let r of t)i(r)&&s.emitOne(r)})}filter(t){return ci.filter(this,t)}static coalesce(t){return ci.filter(t,i=>!!i)}coalesce(){return ci.coalesce(this)}static async toPromise(t){let i=[];for await(let s of t)i.push(s);return i}toPromise(){return ci.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};V0.EMPTY=V0.fromArray([]);var{getWindow:qi,getWindowId:C6,onDidRegisterWindow:k6}=function(){let e=new Map,t={window:ls,disposables:new Ws};e.set(ls.vscodeWindowId,t);let i=new O,s=new O,r=new O;function n(o,a){return(typeof o=="number"?e.get(o):void 0)??(a?t:void 0)}return{onDidRegisterWindow:i.event,onWillUnregisterWindow:r.event,onDidUnregisterWindow:s.event,registerWindow(o){if(e.has(o.vscodeWindowId))return le.None;let a=new Ws,l={window:o,disposables:a.add(new Ws)};return e.set(o.vscodeWindowId,l),a.add(Me(()=>{e.delete(o.vscodeWindowId),s.fire(o)})),a.add(ie(o,at.BEFORE_UNLOAD,()=>{r.fire(o)})),i.fire(l),a},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return e.has(o)},getWindowById:n,getWindow(o){var c;let a=o;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;let l=o;return l!=null&&l.view?l.view.window:ls},getDocument(o){return qi(o).document}}}(),E6=class{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function ie(e,t,i,s){return new E6(e,t,i,s)}var W0=function(e,t,i,s){return ie(e,t,i,s)},em,N6=class extends S6{constructor(e){super(),this.defaultTarget=e&&qi(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}},U0=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){El(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,i=new Map,s=new Map,r=n=>{i.set(n,!1);let o=e.get(n)??[];for(t.set(n,o),e.set(n,[]),s.set(n,!0);o.length>0;)o.sort(U0.sort),o.shift().execute();s.set(n,!1)};em=(n,o,a=0)=>{let l=C6(n),c=new U0(o,a),d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),i.get(l)||(i.set(l,!0),n.requestAnimationFrame(()=>r(l))),c}})();function T6(e){let t=e.getBoundingClientRect(),i=qi(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}var at={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},P6=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=zt(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=zt(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=zt(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=zt(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=zt(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=zt(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=zt(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=zt(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=zt(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=zt(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=zt(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=zt(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=zt(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=zt(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function zt(e){return typeof e=="number"?`${e}px`:e}function Bo(e){return new P6(e)}var aS=class{constructor(){this._hooks=new Ws,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let n=e;try{e.setPointerCapture(t),this._hooks.add(Me(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{n=qi(e)}this._hooks.add(ie(n,at.POINTER_MOVE,o=>{if(o.buttons!==i){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(ie(n,at.POINTER_UP,o=>this.stopMonitoring(!0)))}};function M6(e,t,i){let s=null,r=null;if(typeof i.value=="function"?(s="value",r=i.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(s="get",r=i.get),!r)throw new Error("not supported");let n=`$memoize$${t}`;i[s]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,o)}),this[n]}}var Hi;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Hi||(Hi={}));var _o=class kt extends le{constructor(){super(),this.dispatched=!1,this.targets=new A0,this.ignoreTargets=new A0,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(xt.runAndSubscribe(k6,({window:t,disposables:i})=>{i.add(ie(t.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),i.add(ie(t.document,"touchend",s=>this.onTouchEnd(t,s))),i.add(ie(t.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:ls,disposables:this._store}))}static addTarget(t){if(!kt.isTouchDevice())return le.None;kt.INSTANCE||(kt.INSTANCE=new kt);let i=kt.INSTANCE.targets.push(t);return Me(i)}static ignoreTarget(t){if(!kt.isTouchDevice())return le.None;kt.INSTANCE||(kt.INSTANCE=new kt);let i=kt.INSTANCE.ignoreTargets.push(t);return Me(i)}static isTouchDevice(){return"ontouchstart"in ls||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,r=t.targetTouches.length;s<r;s++){let n=t.targetTouches.item(s);this.activeTouches[n.identifier]={id:n.identifier,initialTarget:n.target,initialTimeStamp:i,initialPageX:n.pageX,initialPageY:n.pageY,rollingTimestamps:[i],rollingPageX:[n.pageX],rollingPageY:[n.pageY]};let o=this.newGestureEvent(Hi.Start,n.target);o.pageX=n.pageX,o.pageY=n.pageY,this.dispatchEvent(o)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,i){let s=Date.now(),r=Object.keys(this.activeTouches).length;for(let n=0,o=i.changedTouches.length;n<o;n++){let a=i.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<kt.HOLD_DELAY&&Math.abs(l.initialPageX-Xt(l.rollingPageX))<30&&Math.abs(l.initialPageY-Xt(l.rollingPageY))<30){let d=this.newGestureEvent(Hi.Tap,l.initialTarget);d.pageX=Xt(l.rollingPageX),d.pageY=Xt(l.rollingPageY),this.dispatchEvent(d)}else if(c>=kt.HOLD_DELAY&&Math.abs(l.initialPageX-Xt(l.rollingPageX))<30&&Math.abs(l.initialPageY-Xt(l.rollingPageY))<30){let d=this.newGestureEvent(Hi.Contextmenu,l.initialTarget);d.pageX=Xt(l.rollingPageX),d.pageY=Xt(l.rollingPageY),this.dispatchEvent(d)}else if(r===1){let d=Xt(l.rollingPageX),f=Xt(l.rollingPageY),p=Xt(l.rollingTimestamps)-l.rollingTimestamps[0],m=d-l.rollingPageX[0],_=f-l.rollingPageY[0],v=[...this.targets].filter(b=>l.initialTarget instanceof Node&&b.contains(l.initialTarget));this.inertia(t,v,s,Math.abs(m)/p,m>0?1:-1,d,Math.abs(_)/p,_>0?1:-1,f)}this.dispatchEvent(this.newGestureEvent(Hi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,i){let s=document.createEvent("CustomEvent");return s.initEvent(t,!1,!0),s.initialTarget=i,s.tapCount=0,s}dispatchEvent(t){if(t.type===Hi.Tap){let i=new Date().getTime(),s=0;i-this._lastSetTapCountTime>kt.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=i,t.tapCount=s}else(t.type===Hi.Change||t.type===Hi.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(t.initialTarget))return;let i=[];for(let s of this.targets)if(s.contains(t.initialTarget)){let r=0,n=t.initialTarget;for(;n&&n!==s;)r++,n=n.parentElement;i.push([r,s])}i.sort((s,r)=>s[0]-r[0]);for(let[s,r]of i)r.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,s,r,n,o,a,l,c){this.handle=em(t,()=>{let d=Date.now(),f=d-s,p=0,m=0,_=!0;r+=kt.SCROLL_FRICTION*f,a+=kt.SCROLL_FRICTION*f,r>0&&(_=!1,p=n*r*f),a>0&&(_=!1,m=l*a*f);let v=this.newGestureEvent(Hi.Change);v.translationX=p,v.translationY=m,i.forEach(b=>b.dispatchEvent(v)),_||this.inertia(t,i,d,r,n,o+p,a,l,c+m)})}onTouchMove(t){let i=Date.now();for(let s=0,r=t.changedTouches.length;s<r;s++){let n=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(n.identifier))){console.warn("end of an UNKNOWN touch",n);continue}let o=this.activeTouches[n.identifier],a=this.newGestureEvent(Hi.Change,o.initialTarget);a.translationX=n.pageX-Xt(o.rollingPageX),a.translationY=n.pageY-Xt(o.rollingPageY),a.pageX=n.pageX,a.pageY=n.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(n.pageX),o.rollingPageY.push(n.pageY),o.rollingTimestamps.push(i)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};_o.SCROLL_FRICTION=-.005,_o.HOLD_DELAY=700,_o.CLEAR_TAP_COUNT_TIME=400,Ve([M6],_o,"isTouchDevice",1);var j6=_o,tm=class extends le{onclick(e,t){this._register(ie(e,at.CLICK,i=>t(new il(qi(e),i))))}onmousedown(e,t){this._register(ie(e,at.MOUSE_DOWN,i=>t(new il(qi(e),i))))}onmouseover(e,t){this._register(ie(e,at.MOUSE_OVER,i=>t(new il(qi(e),i))))}onmouseleave(e,t){this._register(ie(e,at.MOUSE_LEAVE,i=>t(new il(qi(e),i))))}onkeydown(e,t){this._register(ie(e,at.KEY_DOWN,i=>t(new z0(i))))}onkeyup(e,t){this._register(ie(e,at.KEY_UP,i=>t(new z0(i))))}oninput(e,t){this._register(ie(e,at.INPUT,t))}onblur(e,t){this._register(ie(e,at.BLUR,t))}onfocus(e,t){this._register(ie(e,at.FOCUS,t))}onchange(e,t){this._register(ie(e,at.CHANGE,t))}ignoreGesture(e){return j6.ignoreTarget(e)}},K0=11,D6=class extends tm{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=K0+"px",this.domNode.style.height=K0+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new aS),this._register(W0(this.bgDomNode,at.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(W0(this.domNode,at.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new N6),this._pointerdownScheduleRepeatTimer=this._register(new Qp)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,qi(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},L6=class Qd{constructor(t,i,s,r,n,o,a){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,s=s|0,r=r|0,n=n|0,o=o|0,a=a|0),this.rawScrollLeft=r,this.rawScrollTop=a,i<0&&(i=0),r+i>s&&(r=s-i),r<0&&(r=0),n<0&&(n=0),a+n>o&&(a=o-n),a<0&&(a=0),this.width=i,this.scrollWidth=s,this.scrollLeft=r,this.height=n,this.scrollHeight=o,this.scrollTop=a}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new Qd(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new Qd(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){let s=this.width!==t.width,r=this.scrollWidth!==t.scrollWidth,n=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,a=this.scrollHeight!==t.scrollHeight,l=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:r,scrollLeftChanged:n,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}},R6=class extends le{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new L6(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;let i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new Y0(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let i=this._state.withScrollPosition(e);this._smoothScrolling=Y0.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},q0=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function uu(e,t){let i=t-e;return function(s){return e+i*O6(s)}}function A6(e,t,i){return function(s){return s<i?e(s/i):t((s-i)/(1-i))}}var Y0=class ef{constructor(t,i,s,r){this.from=t,this.to=i,this.duration=r,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,s){if(Math.abs(t-i)>2.5*s){let r,n;return t<i?(r=t+.75*s,n=i-.75*s):(r=t-.75*s,n=i+.75*s),A6(uu(t,r),uu(n,i),.33)}return uu(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let i=(t-this.startTime)/this.duration;if(i<1){let s=this.scrollLeft(i),r=this.scrollTop(i);return new q0(s,r,!1)}return new q0(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,s){return ef.start(t,i,s)}static start(t,i,s){s=s+10;let r=Date.now()-10;return new ef(t,i,r,s)}};function B6(e){return Math.pow(e,3)}function O6(e){return 1-B6(1-e)}var I6=class extends le{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Qp)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},$6=140,lS=class extends tm{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new I6(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new aS),this._shouldRender=!0,this.domNode=Bo(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ie(this.domNode.domNode,at.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new D6(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=Bo(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ie(this.slider.domNode,at.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);i<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{let r=T6(this.domNode.domNode);t=e.pageX-r.left,i=e.pageY-r.top}let s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{let n=this._sliderOrthogonalPointerPosition(r),o=Math.abs(n-i);if(sS&&o>$6){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let a=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(a))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},cS=class tf{constructor(t,i,s,r,n,o){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(t),this._visibleSize=r,this._scrollSize=n,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new tf(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let i=Math.round(t);return this._visibleSize!==i?(this._visibleSize=i,this._refreshComputedValues(),!0):!1}setScrollSize(t){let i=Math.round(t);return this._scrollSize!==i?(this._scrollSize=i,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let i=Math.round(t);return this._scrollPosition!==i?(this._scrollPosition=i,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,i,s,r,n){let o=Math.max(0,s-t),a=Math.max(0,o-2*i),l=r>0&&r>s;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(20,Math.floor(s*a/r))),d=(a-c)/(r-s),f=n*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){let t=tf._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize,s=this._scrollPosition;return i<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let i=this._computedSliderPosition+t;return Math.round(i/this._computedSliderRatio)}},z6=class extends lS{constructor(e,t,i){let s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new cS(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},F6=class extends lS{constructor(e,t,i){let s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new cS(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},H6=500,G0=50,V6=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},sf=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,i=0,s=1,r=this._rear;do{let n=r===this._front?t:Math.pow(2,-s);if(t-=n,i+=this._memory[r].score*n,r===this._front)break;r=(this._capacity+r-1)%this._capacity,s++}while(!0);return i<=.5}acceptStandardWheelEvent(t){if(Zp){let i=qi(t.browserEvent),s=e6(i);this.accept(Date.now(),t.deltaX*s,t.deltaY*s)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,i,s){let r=null,n=new V6(t,i,s);this._front===-1&&this._rear===-1?(this._memory[0]=n,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n),n.score=this._computeScore(n,r)}_computeScore(t,i){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(s+=.25),i){let r=Math.abs(t.deltaX),n=Math.abs(t.deltaY),o=Math.abs(i.deltaX),a=Math.abs(i.deltaY),l=Math.max(Math.min(r,o),1),c=Math.max(Math.min(n,a),1),d=Math.max(r,o),f=Math.max(n,a);d%l===0&&f%c===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};sf.INSTANCE=new sf;var W6=sf,U6=class extends tm{constructor(e,t,i){super(),this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new O),this.onWillScroll=this._onWillScroll.event,this._options=q6(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new F6(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new z6(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Bo(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Bo(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Bo(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new Qp),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Cr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Zi&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new H0(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Cr(this._mouseWheelToDispose),e)){let t=i=>{this._onMouseWheel(new H0(i))};this._mouseWheelToDispose.push(ie(this._listenOnDomNode,at.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){var r;if((r=e.browserEvent)!=null&&r.defaultPrevented)return;let t=W6.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let n=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+n===0?o=n=0:Math.abs(n)>=Math.abs(o)?o=0:n=0),this._options.flipAxes&&([n,o]=[o,n]);let a=!Zi&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=n,n=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,n=n*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),c={};if(n){let d=G0*n,f=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(c,f)}if(o){let d=G0*o,f=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(c,f)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",r=t?" top":"",n=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${n}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),H6)}},K6=class extends U6{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function q6(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Zi&&(t.className+=" mac"),t}var rf=class extends le{constructor(e,t,i,s,r,n,o,a){super(),this._bufferService=i,this._optionsService=o,this._renderService=a,this._onRequestScrollLines=this._register(new O),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let l=this._register(new R6({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:c=>em(s.window,c)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{l.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new K6(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},l)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(r.onProtocolChange(c=>{this._scrollableElement.updateOptions({handleMouseWheel:!(c&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(xt.runAndSubscribe(n.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=n.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Me(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(Me(()=>this._styleElement.remove())),this._register(xt.runAndSubscribe(n.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${n.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${n.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${n.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(c=>this._handleScroll(c)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),i=t-this._bufferService.buffer.ydisp;i!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(i)),this._isHandlingScroll=!1}};rf=Ve([K(2,Ot),K(3,gs),K(4,Vw),K(5,An),K(6,It),K(7,_s)],rf);var nf=class extends le{constructor(e,t,i,s,r){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(n=>this._removeDecoration(n))),this._register(Me(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var s;let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",((s=e==null?void 0:e.options)==null?void 0:s.layer)==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;let i=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=i?`${i*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=i?`${i*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var t;(t=this._decorationElements.get(e))==null||t.remove(),this._decorationElements.delete(e),e.dispose()}};nf=Ve([K(1,Ot),K(2,gs),K(3,wa),K(4,_s)],nf);var Y6=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},zi={full:0,left:0,center:0,right:0},bs={full:0,left:0,center:0,right:0},no={full:0,left:0,center:0,right:0},pc=class extends le{constructor(e,t,i,s,r,n,o,a){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=r,this._optionsService=n,this._themeService=o,this._coreBrowserService=a,this._colorZoneStore=new Y6,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(c=this._viewportElement.parentElement)==null||c.insertBefore(this._canvas,this._viewportElement),this._register(Me(()=>{var d;return(d=this._canvas)==null?void 0:d.remove()}));let l=this._canvas.getContext("2d");if(l)this._ctx=l;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);bs.full=this._canvas.width,bs.left=e,bs.center=t,bs.right=e,this._refreshDrawHeightConstants(),no.full=1,no.left=1,no.center=1+bs.left,no.right=1+bs.left+bs.center}_refreshDrawHeightConstants(){zi.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);zi.left=t,zi.center=t,zi.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*zi.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*zi.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*zi.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*zi.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(no[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-zi[e.position||"full"]/2),bs[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+zi[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};pc=Ve([K(2,Ot),K(3,wa),K(4,_s),K(5,It),K(6,An),K(7,gs)],pc);var j;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(j||(j={}));var Pl;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Pl||(Pl={}));var hS;(e=>e.ST=`${j.ESC}\\`)(hS||(hS={}));var of=class{constructor(e,t,i,s,r,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let i;t.start+=this._dataAlreadySent.length,this._isComposing?i=this._textarea.value.substring(t.start,this._compositionPosition.start):i=this._textarea.value.substring(t.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${j.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let n=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(n.width,1)+"px",this._textarea.style.height=Math.max(n.height,1)+"px",this._textarea.style.lineHeight=n.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};of=Ve([K(2,Ot),K(3,It),K(4,Tr),K(5,_s)],of);var ct=0,ht=0,ut=0,Fe=0,X0={css:"#00000000",rgba:0},Ze;(e=>{function t(r,n,o,a){return a!==void 0?`#${er(r)}${er(n)}${er(o)}${er(a)}`:`#${er(r)}${er(n)}${er(o)}`}e.toCss=t;function i(r,n,o,a=255){return(r<<24|n<<16|o<<8|a)>>>0}e.toRgba=i;function s(r,n,o,a){return{css:e.toCss(r,n,o,a),rgba:e.toRgba(r,n,o,a)}}e.toColor=s})(Ze||(Ze={}));var Ee;(e=>{function t(l,c){if(Fe=(c.rgba&255)/255,Fe===1)return{css:c.css,rgba:c.rgba};let d=c.rgba>>24&255,f=c.rgba>>16&255,p=c.rgba>>8&255,m=l.rgba>>24&255,_=l.rgba>>16&255,v=l.rgba>>8&255;ct=m+Math.round((d-m)*Fe),ht=_+Math.round((f-_)*Fe),ut=v+Math.round((p-v)*Fe);let b=Ze.toCss(ct,ht,ut),g=Ze.toRgba(ct,ht,ut);return{css:b,rgba:g}}e.blend=t;function i(l){return(l.rgba&255)===255}e.isOpaque=i;function s(l,c,d){let f=Ml.ensureContrastRatio(l.rgba,c.rgba,d);if(f)return Ze.toColor(f>>24&255,f>>16&255,f>>8&255)}e.ensureContrastRatio=s;function r(l){let c=(l.rgba|255)>>>0;return[ct,ht,ut]=Ml.toChannels(c),{css:Ze.toCss(ct,ht,ut),rgba:c}}e.opaque=r;function n(l,c){return Fe=Math.round(c*255),[ct,ht,ut]=Ml.toChannels(l.rgba),{css:Ze.toCss(ct,ht,ut,Fe),rgba:Ze.toRgba(ct,ht,ut,Fe)}}e.opacity=n;function o(l,c){return Fe=l.rgba&255,n(l,Fe*c/255)}e.multiplyOpacity=o;function a(l){return[l.rgba>>24&255,l.rgba>>16&255,l.rgba>>8&255]}e.toColorRGB=a})(Ee||(Ee={}));var Re;(e=>{let t,i;try{let r=document.createElement("canvas");r.width=1,r.height=1;let n=r.getContext("2d",{willReadFrequently:!0});n&&(t=n,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}catch{}function s(r){if(r.match(/#[\da-f]{3,8}/i))switch(r.length){case 4:return ct=parseInt(r.slice(1,2).repeat(2),16),ht=parseInt(r.slice(2,3).repeat(2),16),ut=parseInt(r.slice(3,4).repeat(2),16),Ze.toColor(ct,ht,ut);case 5:return ct=parseInt(r.slice(1,2).repeat(2),16),ht=parseInt(r.slice(2,3).repeat(2),16),ut=parseInt(r.slice(3,4).repeat(2),16),Fe=parseInt(r.slice(4,5).repeat(2),16),Ze.toColor(ct,ht,ut,Fe);case 7:return{css:r,rgba:(parseInt(r.slice(1),16)<<8|255)>>>0};case 9:return{css:r,rgba:parseInt(r.slice(1),16)>>>0}}let n=r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(n)return ct=parseInt(n[1]),ht=parseInt(n[2]),ut=parseInt(n[3]),Fe=Math.round((n[5]===void 0?1:parseFloat(n[5]))*255),Ze.toColor(ct,ht,ut,Fe);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=r,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[ct,ht,ut,Fe]=t.getImageData(0,0,1,1).data,Fe!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Ze.toRgba(ct,ht,ut,Fe),css:r}}e.toColor=s})(Re||(Re={}));var Mt;(e=>{function t(s){return i(s>>16&255,s>>8&255,s&255)}e.relativeLuminance=t;function i(s,r,n){let o=s/255,a=r/255,l=n/255,c=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),d=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),f=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4);return c*.2126+d*.7152+f*.0722}e.relativeLuminance2=i})(Mt||(Mt={}));var Ml;(e=>{function t(o,a){if(Fe=(a&255)/255,Fe===1)return a;let l=a>>24&255,c=a>>16&255,d=a>>8&255,f=o>>24&255,p=o>>16&255,m=o>>8&255;return ct=f+Math.round((l-f)*Fe),ht=p+Math.round((c-p)*Fe),ut=m+Math.round((d-m)*Fe),Ze.toRgba(ct,ht,ut)}e.blend=t;function i(o,a,l){let c=Mt.relativeLuminance(o>>8),d=Mt.relativeLuminance(a>>8);if(ss(c,d)<l){if(d<c){let m=s(o,a,l),_=ss(c,Mt.relativeLuminance(m>>8));if(_<l){let v=r(o,a,l),b=ss(c,Mt.relativeLuminance(v>>8));return _>b?m:v}return m}let f=r(o,a,l),p=ss(c,Mt.relativeLuminance(f>>8));if(p<l){let m=s(o,a,l),_=ss(c,Mt.relativeLuminance(m>>8));return p>_?f:m}return f}}e.ensureContrastRatio=i;function s(o,a,l){let c=o>>24&255,d=o>>16&255,f=o>>8&255,p=a>>24&255,m=a>>16&255,_=a>>8&255,v=ss(Mt.relativeLuminance2(p,m,_),Mt.relativeLuminance2(c,d,f));for(;v<l&&(p>0||m>0||_>0);)p-=Math.max(0,Math.ceil(p*.1)),m-=Math.max(0,Math.ceil(m*.1)),_-=Math.max(0,Math.ceil(_*.1)),v=ss(Mt.relativeLuminance2(p,m,_),Mt.relativeLuminance2(c,d,f));return(p<<24|m<<16|_<<8|255)>>>0}e.reduceLuminance=s;function r(o,a,l){let c=o>>24&255,d=o>>16&255,f=o>>8&255,p=a>>24&255,m=a>>16&255,_=a>>8&255,v=ss(Mt.relativeLuminance2(p,m,_),Mt.relativeLuminance2(c,d,f));for(;v<l&&(p<255||m<255||_<255);)p=Math.min(255,p+Math.ceil((255-p)*.1)),m=Math.min(255,m+Math.ceil((255-m)*.1)),_=Math.min(255,_+Math.ceil((255-_)*.1)),v=ss(Mt.relativeLuminance2(p,m,_),Mt.relativeLuminance2(c,d,f));return(p<<24|m<<16|_<<8|255)>>>0}e.increaseLuminance=r;function n(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}e.toChannels=n})(Ml||(Ml={}));function er(e){let t=e.toString(16);return t.length<2?"0"+t:t}function ss(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var G6=class extends xa{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},mc=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _i}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let i=[],s=t.translateToString(!0),r=0,n=0,o=0,a=t.getFg(0),l=t.getBg(0);for(let c=0;c<t.getTrimmedLength();c++)if(t.loadCell(c,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==a||this._workCell.bg!==l){if(c-r>1){let d=this._getJoinedRanges(s,o,n,t,r);for(let f=0;f<d.length;f++)i.push(d[f])}r=c,o=n,a=this._workCell.fg,l=this._workCell.bg}n+=this._workCell.getChars().length||As.length}if(this._bufferService.cols-r>1){let c=this._getJoinedRanges(s,o,n,t,r);for(let d=0;d<c.length;d++)i.push(c[d])}return i}_getJoinedRanges(e,t,i,s,r){let n=e.substring(t,i),o=[];try{o=this._characterJoiners[0].handler(n)}catch(a){console.error(a)}for(let a=1;a<this._characterJoiners.length;a++)try{let l=this._characterJoiners[a].handler(n);for(let c=0;c<l.length;c++)mc._mergeRanges(o,l[c])}catch(l){console.error(l)}return this._stringRangesToCellRanges(o,s,r),o}_stringRangesToCellRanges(e,t,i){let s=0,r=!1,n=0,o=e[s];if(o){for(let a=i;a<this._bufferService.cols;a++){let l=t.getWidth(a),c=t.getString(a).length||As.length;if(l!==0){if(!r&&o[0]<=n&&(o[0]=a,r=!0),o[1]<=n){if(o[1]=a,o=e[++s],!o)break;o[0]<=n?(o[0]=a,r=!0):r=!1}n+=c}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){let r=e[s];if(i){if(t[1]<=r[0])return e[s-1][1]=t[1],e;if(t[1]<=r[1])return e[s-1][1]=Math.max(t[1],r[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=r[0])return e.splice(s,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0);continue}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};mc=Ve([K(0,Ot)],mc);function X6(e){return 57508<=e&&e<=57558}function Z6(e){return 9472<=e&&e<=9631}function J6(e){return X6(e)||Z6(e)}function Q6(){return{css:{canvas:sl(),cell:sl()},device:{canvas:sl(),cell:sl(),char:{width:0,height:0,left:0,top:0}}}}function sl(){return{width:0,height:0}}var af=class{constructor(e,t,i,s,r,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=r,this._decorationService=n,this._themeService=o,this._workCell=new _i,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,r,n,o,a,l,c,d){let f=[],p=this._characterJoinerService.getJoinedCharacters(t),m=this._themeService.colors,_=e.getNoBgTrimmedLength();i&&_<n+1&&(_=n+1);let v,b=0,g="",y=0,x=0,C=0,k=0,T=!1,L=0,P=!1,q=0,H=0,ee=[],R=c!==-1&&d!==-1;for(let M=0;M<_;M++){e.loadCell(M,this._workCell);let z=this._workCell.getWidth();if(z===0)continue;let I=!1,V=M>=H,W=M,E=this._workCell;if(p.length>0&&M===p[0][0]&&V){let fe=p.shift(),ys=this._isCellInSelection(fe[0],t);for(y=fe[0]+1;y<fe[1];y++)V&&(V=ys===this._isCellInSelection(y,t));V&&(V=!i||n<fe[0]||n>=fe[1]),V?(I=!0,E=new G6(this._workCell,e.translateToString(!0,fe[0],fe[1]),fe[1]-fe[0]),W=fe[1]-1,z=E.getWidth()):H=fe[1]}let B=this._isCellInSelection(M,t),U=i&&M===n,Q=R&&M>=c&&M<=d,oe=!1;this._decorationService.forEachDecorationAtCell(M,t,void 0,fe=>{oe=!0});let je=E.getChars()||As;if(je===" "&&(E.isUnderline()||E.isOverline())&&(je=""),q=z*a-l.get(je,E.isBold(),E.isItalic()),!v)v=this._document.createElement("span");else if(b&&(B&&P||!B&&!P&&E.bg===x)&&(B&&P&&m.selectionForeground||E.fg===C)&&E.extended.ext===k&&Q===T&&q===L&&!U&&!I&&!oe&&V){E.isInvisible()?g+=As:g+=je,b++;continue}else b&&(v.textContent=g),v=this._document.createElement("span"),b=0,g="";if(x=E.bg,C=E.fg,k=E.extended.ext,T=Q,L=q,P=B,I&&n>=M&&n<=W&&(n=M),!this._coreService.isCursorHidden&&U&&this._coreService.isCursorInitialized){if(ee.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&ee.push("xterm-cursor-blink"),ee.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":ee.push("xterm-cursor-outline");break;case"block":ee.push("xterm-cursor-block");break;case"bar":ee.push("xterm-cursor-bar");break;case"underline":ee.push("xterm-cursor-underline");break}}if(E.isBold()&&ee.push("xterm-bold"),E.isItalic()&&ee.push("xterm-italic"),E.isDim()&&ee.push("xterm-dim"),E.isInvisible()?g=As:g=E.getChars()||As,E.isUnderline()&&(ee.push(`xterm-underline-${E.extended.underlineStyle}`),g===" "&&(g=""),!E.isUnderlineColorDefault()))if(E.isUnderlineColorRGB())v.style.textDecorationColor=`rgb(${xa.toColorRGB(E.getUnderlineColor()).join(",")})`;else{let fe=E.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&E.isBold()&&fe<8&&(fe+=8),v.style.textDecorationColor=m.ansi[fe].css}E.isOverline()&&(ee.push("xterm-overline"),g===" "&&(g="")),E.isStrikethrough()&&ee.push("xterm-strikethrough"),Q&&(v.style.textDecoration="underline");let xe=E.getFgColor(),Ye=E.getFgColorMode(),_e=E.getBgColor(),De=E.getBgColorMode(),ri=!!E.isInverse();if(ri){let fe=xe;xe=_e,_e=fe;let ys=Ye;Ye=De,De=ys}let qt,vs,Yt=!1;this._decorationService.forEachDecorationAtCell(M,t,void 0,fe=>{fe.options.layer!=="top"&&Yt||(fe.backgroundColorRGB&&(De=50331648,_e=fe.backgroundColorRGB.rgba>>8&16777215,qt=fe.backgroundColorRGB),fe.foregroundColorRGB&&(Ye=50331648,xe=fe.foregroundColorRGB.rgba>>8&16777215,vs=fe.foregroundColorRGB),Yt=fe.options.layer==="top")}),!Yt&&B&&(qt=this._coreBrowserService.isFocused?m.selectionBackgroundOpaque:m.selectionInactiveBackgroundOpaque,_e=qt.rgba>>8&16777215,De=50331648,Yt=!0,m.selectionForeground&&(Ye=50331648,xe=m.selectionForeground.rgba>>8&16777215,vs=m.selectionForeground)),Yt&&ee.push("xterm-decoration-top");let pt;switch(De){case 16777216:case 33554432:pt=m.ansi[_e],ee.push(`xterm-bg-${_e}`);break;case 50331648:pt=Ze.toColor(_e>>16,_e>>8&255,_e&255),this._addStyle(v,`background-color:#${Z0((_e>>>0).toString(16),"0",6)}`);break;case 0:default:ri?(pt=m.foreground,ee.push("xterm-bg-257")):pt=m.background}switch(qt||E.isDim()&&(qt=Ee.multiplyOpacity(pt,.5)),Ye){case 16777216:case 33554432:E.isBold()&&xe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(xe+=8),this._applyMinimumContrast(v,pt,m.ansi[xe],E,qt,void 0)||ee.push(`xterm-fg-${xe}`);break;case 50331648:let fe=Ze.toColor(xe>>16&255,xe>>8&255,xe&255);this._applyMinimumContrast(v,pt,fe,E,qt,vs)||this._addStyle(v,`color:#${Z0(xe.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(v,pt,m.foreground,E,qt,vs)||ri&&ee.push("xterm-fg-257")}ee.length&&(v.className=ee.join(" "),ee.length=0),!U&&!I&&!oe&&V?b++:v.textContent=g,q!==this.defaultSpacing&&(v.style.letterSpacing=`${q}px`),f.push(v),M=W}return v&&b&&(v.textContent=g),f}_applyMinimumContrast(e,t,i,s,r,n){if(this._optionsService.rawOptions.minimumContrastRatio===1||J6(s.getCode()))return!1;let o=this._getContrastCache(s),a;if(!r&&!n&&(a=o.getColor(t.rgba,i.rgba)),a===void 0){let l=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);a=Ee.ensureContrastRatio(r||t,n||i,l),o.setColor((r||t).rgba,(n||i).rgba,a??null)}return a?(this._addStyle(e,`color:${a.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let i=this._selectionStart,s=this._selectionEnd;return!i||!s?!1:this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0]}};af=Ve([K(1,Kw),K(2,It),K(3,gs),K(4,Tr),K(5,wa),K(6,An)],af);function Z0(e,t,i){for(;e.length<i;)e=t+e;return e}var eP=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let i=e.createElement("span");i.classList.add("xterm-char-measure-element");let s=e.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let r=e.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";let n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold",n.style.fontStyle="italic",this._measureElements=[i,s,r,n],this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(n),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&e.length===1&&(s=e.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let o=this._measure(e,0);return o>0&&(this._flat[s]=o),o}let r=e;t&&(r+="B"),i&&(r+="I");let n=this._holey.get(r);if(n===void 0){let o=0;t&&(o|=1),i&&(o|=2),n=this._measure(e,o),n>0&&this._holey.set(r,n)}return n}_measure(e,t){let i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}},tP=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,s=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1]){this.clear();return}let r=e.buffers.active.ydisp,n=t[1]-r,o=i[1]-r,a=Math.max(n,0),l=Math.min(o,e.rows-1);if(a>=e.rows||l<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=l,this.startCol=t[0],this.endCol=i[0]}isCellSelected(e,t,i){return this.hasSelection?(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol):!1}};function iP(){return new tP}var du="xterm-dom-renderer-owner-",li="xterm-rows",rl="xterm-fg-",J0="xterm-bg-",oo="xterm-focus",nl="xterm-selection",sP=1,lf=class extends le{constructor(e,t,i,s,r,n,o,a,l,c,d,f,p,m){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=s,this._viewportElement=r,this._helperContainer=n,this._linkifier2=o,this._charSizeService=l,this._optionsService=c,this._bufferService=d,this._coreService=f,this._coreBrowserService=p,this._themeService=m,this._terminalClass=sP++,this._rowElements=[],this._selectionRenderModel=iP(),this.onRequestRedraw=this._register(new O).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(li),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(nl),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Q6(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(_=>this._injectCss(_))),this._injectCss(this._themeService.colors),this._rowFactory=a.createInstance(af,document),this._element.classList.add(du+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(_=>this._handleLinkHover(_))),this._register(this._linkifier2.onHideLinkUnderline(_=>this._handleLinkLeave(_))),this._register(Me(()=>{this._element.classList.remove(du+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new eP(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${li} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${li} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${li} .xterm-dim { color: ${Ee.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let i=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${r} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${li}.${oo} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${li}.${oo} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${li}.${oo} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${li} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${li} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${li} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${li} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${li} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${nl} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${nl} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${nl} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[n,o]of e.ansi.entries())t+=`${this._terminalSelector} .${rl}${n} { color: ${o.css}; }${this._terminalSelector} .${rl}${n}.xterm-dim { color: ${Ee.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${J0}${n} { background-color: ${o.css}; }`;t+=`${this._terminalSelector} .${rl}257 { color: ${Ee.opaque(e.background).css}; }${this._terminalSelector} .${rl}257.xterm-dim { color: ${Ee.multiplyOpacity(Ee.opaque(e.background),.5).css}; }${this._terminalSelector} .${J0}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(oo),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(oo),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,i),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,n=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,a=this._document.createDocumentFragment();if(i){let l=e[0]>t[0];a.appendChild(this._createSelectionElement(n,l?t[0]:e[0],l?e[0]:t[0],o-n+1))}else{let l=s===n?e[0]:0,c=n===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,l,c));let d=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,d)),n!==o){let f=r===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,f))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,s=1){let r=this._document.createElement("div"),n=t*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(i-t);return n+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-n),r.style.height=`${s*this.dimensions.css.cell.height}px`,r.style.top=`${e*this.dimensions.css.cell.height}px`,r.style.left=`${n}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let i=this._bufferService.buffer,s=i.ybase+i.y,r=Math.min(i.x,this._bufferService.cols-1),n=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){let c=l+i.ydisp,d=this._rowElements[l],f=i.lines.get(c);if(!d||!f)break;d.replaceChildren(...this._rowFactory.createRow(f,c,c===s,o,a,r,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${du}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,r,n){i<0&&(e=0),s<0&&(t=0);let o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);let a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,r-1),d=this._optionsService.rawOptions.cursorBlink,f=this._optionsService.rawOptions.cursorStyle,p=this._optionsService.rawOptions.cursorInactiveStyle;for(let m=i;m<=s;++m){let _=m+a.ydisp,v=this._rowElements[m],b=a.lines.get(_);if(!v||!b)break;v.replaceChildren(...this._rowFactory.createRow(b,_,_===l,f,p,c,d,this.dimensions.css.cell.width,this._widthCache,n?m===i?e:0:-1,n?(m===s?t:r)-1:-1))}}};lf=Ve([K(7,Yp),K(8,zc),K(9,It),K(10,Ot),K(11,Tr),K(12,gs),K(13,An)],lf);var cf=class extends le{constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this._register(new O),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new nP(this._optionsService))}catch{this._measureStrategy=this._register(new rP(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};cf=Ve([K(2,It)],cf);var uS=class extends le{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},rP=class extends uS{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},nP=class extends uS{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},oP=class extends le{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new aP(this._window)),this._onDprChange=this._register(new O),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new O),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(xt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(ie(this._textarea,"focus",()=>this._isFocused=!0)),this._register(ie(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},aP=class extends le{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Tn),this._onDprChange=this._register(new O),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Me(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=ie(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},lP=class extends le{constructor(){super(),this.linkProviders=[],this._register(Me(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function im(e,t,i){let s=i.getBoundingClientRect(),r=e.getComputedStyle(i),n=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[t.clientX-s.left-n,t.clientY-s.top-o]}function cP(e,t,i,s,r,n,o,a,l){if(!n)return;let c=im(e,t,i);if(c)return c[0]=Math.ceil((c[0]+(l?o/2:0))/o),c[1]=Math.ceil(c[1]/a),c[0]=Math.min(Math.max(c[0],1),s+(l?1:0)),c[1]=Math.min(Math.max(c[1],1),r),c}var hf=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,r){return cP(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(e,t){let i=im(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};hf=Ve([K(0,_s),K(1,zc)],hf);var hP=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},dS={};xT(dS,{getSafariVersion:()=>dP,isChromeOS:()=>gS,isFirefox:()=>fS,isIpad:()=>fP,isIphone:()=>pP,isLegacyEdge:()=>uP,isLinux:()=>sm,isMac:()=>gc,isNode:()=>Fc,isSafari:()=>pS,isWindows:()=>mS});var Fc=typeof process<"u"&&"title"in process,Sa=Fc?"node":navigator.userAgent,ba=Fc?"node":navigator.platform,fS=Sa.includes("Firefox"),uP=Sa.includes("Edge"),pS=/^((?!chrome|android).)*safari/i.test(Sa);function dP(){if(!pS)return 0;let e=Sa.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var gc=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(ba),fP=ba==="iPad",pP=ba==="iPhone",mS=["Windows","Win16","Win32","WinCE"].includes(ba),sm=ba.indexOf("Linux")>=0,gS=/\bCrOS\b/.test(Sa),_S=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),i=Math.max(t,i),r=e.timeRemaining(),i*1.5>r){s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),this._start();return}s=r}this.clear()}},mP=class extends _S{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},gP=class extends _S{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},_c=!Fc&&"requestIdleCallback"in window?gP:mP,_P=class{constructor(){this._queue=new _c}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},uf=class extends le{constructor(e,t,i,s,r,n,o,a,l){super(),this._rowCount=e,this._optionsService=i,this._charSizeService=s,this._coreService=r,this._coreBrowserService=a,this._renderer=this._register(new Tn),this._pausedResizeTask=new _P,this._observerDisposable=this._register(new Tn),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new O),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new O),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new O),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new O),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new hP((c,d)=>this._renderRows(c,d),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new vP(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Me(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>{var c;return(c=this._renderer.value)==null?void 0:c.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(n.onDecorationRegistered(()=>this._fullRefresh())),this._register(n.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(l.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(c=>this._registerIntersectionObserver(c,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let i=new e.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});i.observe(t),this._observerDisposable.value=Me(()=>i.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let s=this._syncOutputHandler.flush();s&&(e=Math.min(e,s.start),t=Math.max(t,s.end)),i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var i;return(i=this._renderer.value)==null?void 0:i.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,i){var s;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,(s=this._renderer.value)==null||s.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};uf=Ve([K(2,It),K(3,zc),K(4,Tr),K(5,wa),K(6,Ot),K(7,gs),K(8,An)],uf);var vP=class{constructor(e,t,i){this._coreBrowserService=e,this._coreService=t,this._onTimeout=i,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function yP(e,t,i,s){let r=i.buffer.x,n=i.buffer.y;if(!i.buffer.hasScrollback)return SP(r,n,e,t,i,s)+Hc(n,t,i,s)+bP(r,n,e,t,i,s);let o;if(n===t)return o=r>e?"D":"C",ca(Math.abs(r-e),la(o,s));o=n>t?"D":"C";let a=Math.abs(n-t),l=wP(n>t?e:r,i)+(a-1)*i.cols+1+xP(n>t?r:e);return ca(l,la(o,s))}function xP(e,t){return e-1}function wP(e,t){return t.cols-e}function SP(e,t,i,s,r,n){return Hc(t,s,r,n).length===0?"":ca(yS(e,t,e,t-kr(t,r),!1,r).length,la("D",n))}function Hc(e,t,i,s){let r=e-kr(e,i),n=t-kr(t,i),o=Math.abs(r-n)-CP(e,t,i);return ca(o,la(vS(e,t),s))}function bP(e,t,i,s,r,n){let o;Hc(t,s,r,n).length>0?o=s-kr(s,r):o=t;let a=s,l=kP(e,t,i,s,r,n);return ca(yS(e,o,i,a,l==="C",r).length,la(l,n))}function CP(e,t,i){var o;let s=0,r=e-kr(e,i),n=t-kr(t,i);for(let a=0;a<Math.abs(r-n);a++){let l=vS(e,t)==="A"?-1:1;(o=i.buffer.lines.get(r+l*a))!=null&&o.isWrapped&&s++}return s}function kr(e,t){let i=0,s=t.buffer.lines.get(e),r=s==null?void 0:s.isWrapped;for(;r&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),r=s==null?void 0:s.isWrapped;return i}function kP(e,t,i,s,r,n){let o;return Hc(i,s,r,n).length>0?o=s-kr(s,r):o=t,e<i&&o<=s||e>=i&&o<s?"C":"D"}function vS(e,t){return e>t?"A":"B"}function yS(e,t,i,s,r,n){let o=e,a=t,l="";for(;(o!==i||a!==s)&&a>=0&&a<n.buffer.lines.length;)o+=r?1:-1,r&&o>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!r&&o<0&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,o)}function la(e,t){let i=t?"O":"[";return j.ESC+i+e}function ca(e,t){e=Math.floor(e);let i="";for(let s=0;s<e;s++)i+=t;return i}var EP=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function Q0(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var fu=50,NP=15,TP=50,PP=500,MP="",jP=new RegExp(MP,"g"),df=class extends le{constructor(e,t,i,s,r,n,o,a,l){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=r,this._mouseService=n,this._optionsService=o,this._renderService=a,this._coreBrowserService=l,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _i,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new O),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new O),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new O),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new O),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=c=>this._handleMouseMove(c),this._mouseUpListener=c=>this._handleMouseUp(c),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(c=>this._handleTrim(c)),this._register(this._bufferService.buffers.onBufferActivate(c=>this._handleBufferActivate(c))),this.enable(),this._model=new EP(this._bufferService),this._activeSelectionMode=0,this._register(Me(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(c=>{c.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let i=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let r=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){let a=i.translateBufferLineToString(o,!0,r,n);s.push(a)}}else{let r=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],r));for(let n=e[1]+1;n<=t[1]-1;n++){let o=i.lines.get(n),a=i.translateBufferLineToString(n,!0);o!=null&&o.isWrapped?s[s.length-1]+=a:s.push(a)}if(e[1]!==t[1]){let n=i.lines.get(t[1]),o=i.translateBufferLineToString(t[1],!0,0,t[0]);n&&n.isWrapped?s[s.length-1]+=o:s.push(o)}}return s.map(r=>r.replace(jP," ")).join(mS?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),sm&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!i||!s||!t?!1:this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){let i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!i||!s?!1:this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var r,n;let i=(n=(r=this._linkifier.currentLink)==null?void 0:r.link)==null?void 0:n.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=Q0(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(e);return s?(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=im(this._coreBrowserService.window,e,this._screenElement)[1],i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-fu),fu),t/=fu,t/Math.abs(t)+Math.round(t*(NP-1)))}shouldForceSelection(e){return gc?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),TP)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(gc&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){let s=i.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<PP&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let i=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(i&&i[0]!==void 0&&i[1]!==void 0){let s=yP(i[0]-1,i[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!i){this._oldHasSelection&&this._fireOnSelectionChange(e,t,i);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){let r=e.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?i--:r>1&&t!==s&&(i+=r-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;let r=this._bufferService.buffer,n=r.lines.get(e[1]);if(!n)return;let o=r.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(n,e[0]),l=a,c=e[0]-a,d=0,f=0,p=0,m=0;if(o.charAt(a)===" "){for(;a>0&&o.charAt(a-1)===" ";)a--;for(;l<o.length&&o.charAt(l+1)===" ";)l++}else{let b=e[0],g=e[0];n.getWidth(b)===0&&(d++,b--),n.getWidth(g)===2&&(f++,g++);let y=n.getString(g).length;for(y>1&&(m+=y-1,l+=y-1);b>0&&a>0&&!this._isCharWordSeparator(n.loadCell(b-1,this._workCell));){n.loadCell(b-1,this._workCell);let x=this._workCell.getChars().length;this._workCell.getWidth()===0?(d++,b--):x>1&&(p+=x-1,a-=x-1),a--,b--}for(;g<n.length&&l+1<o.length&&!this._isCharWordSeparator(n.loadCell(g+1,this._workCell));){n.loadCell(g+1,this._workCell);let x=this._workCell.getChars().length;this._workCell.getWidth()===2?(f++,g++):x>1&&(m+=x-1,l+=x-1),l++,g++}}l++;let _=a+c-d+p,v=Math.min(this._bufferService.cols,l-a+d+f-p-m);if(!(!t&&o.slice(a,l).trim()==="")){if(i&&_===0&&n.getCodePoint(0)!==32){let b=r.lines.get(e[1]-1);if(b&&n.isWrapped&&b.getCodePoint(this._bufferService.cols-1)!==32){let g=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(g){let y=this._bufferService.cols-g.start;_-=y,v+=y}}}if(s&&_+v===this._bufferService.cols&&n.getCodePoint(this._bufferService.cols-1)!==32){let b=r.lines.get(e[1]+1);if(b!=null&&b.isWrapped&&b.getCodePoint(0)!==32){let g=this._getWordAt([0,e[1]+1],!1,!1,!0);g&&(v+=g.length)}}return{start:_,length:v}}}_selectWordAt(e,t){let i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=Q0(i,this._bufferService.cols)}};df=Ve([K(3,Ot),K(4,Tr),K(5,Gp),K(6,It),K(7,_s),K(8,gs)],df);var ev=class{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},tv=class{constructor(){this._color=new ev,this._css=new ev}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},Qe=Object.freeze((()=>{let e=[Re.toColor("#2e3436"),Re.toColor("#cc0000"),Re.toColor("#4e9a06"),Re.toColor("#c4a000"),Re.toColor("#3465a4"),Re.toColor("#75507b"),Re.toColor("#06989a"),Re.toColor("#d3d7cf"),Re.toColor("#555753"),Re.toColor("#ef2929"),Re.toColor("#8ae234"),Re.toColor("#fce94f"),Re.toColor("#729fcf"),Re.toColor("#ad7fa8"),Re.toColor("#34e2e2"),Re.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){let s=t[i/36%6|0],r=t[i/6%6|0],n=t[i%6];e.push({css:Ze.toCss(s,r,n),rgba:Ze.toRgba(s,r,n)})}for(let i=0;i<24;i++){let s=8+i*10;e.push({css:Ze.toCss(s,s,s),rgba:Ze.toRgba(s,s,s)})}return e})()),rr=Re.toColor("#ffffff"),vo=Re.toColor("#000000"),iv=Re.toColor("#ffffff"),sv=vo,ao={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},DP=rr,ff=class extends le{constructor(e){super(),this._optionsService=e,this._contrastCache=new tv,this._halfContrastCache=new tv,this._onChangeColors=this._register(new O),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:rr,background:vo,cursor:iv,cursorAccent:sv,selectionForeground:void 0,selectionBackgroundTransparent:ao,selectionBackgroundOpaque:Ee.blend(vo,ao),selectionInactiveBackgroundTransparent:ao,selectionInactiveBackgroundOpaque:Ee.blend(vo,ao),scrollbarSliderBackground:Ee.opacity(rr,.2),scrollbarSliderHoverBackground:Ee.opacity(rr,.4),scrollbarSliderActiveBackground:Ee.opacity(rr,.5),overviewRulerBorder:rr,ansi:Qe.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=ye(e.foreground,rr),t.background=ye(e.background,vo),t.cursor=Ee.blend(t.background,ye(e.cursor,iv)),t.cursorAccent=Ee.blend(t.background,ye(e.cursorAccent,sv)),t.selectionBackgroundTransparent=ye(e.selectionBackground,ao),t.selectionBackgroundOpaque=Ee.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=ye(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Ee.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?ye(e.selectionForeground,X0):void 0,t.selectionForeground===X0&&(t.selectionForeground=void 0),Ee.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Ee.opacity(t.selectionBackgroundTransparent,.3)),Ee.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Ee.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=ye(e.scrollbarSliderBackground,Ee.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=ye(e.scrollbarSliderHoverBackground,Ee.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=ye(e.scrollbarSliderActiveBackground,Ee.opacity(t.foreground,.5)),t.overviewRulerBorder=ye(e.overviewRulerBorder,DP),t.ansi=Qe.slice(),t.ansi[0]=ye(e.black,Qe[0]),t.ansi[1]=ye(e.red,Qe[1]),t.ansi[2]=ye(e.green,Qe[2]),t.ansi[3]=ye(e.yellow,Qe[3]),t.ansi[4]=ye(e.blue,Qe[4]),t.ansi[5]=ye(e.magenta,Qe[5]),t.ansi[6]=ye(e.cyan,Qe[6]),t.ansi[7]=ye(e.white,Qe[7]),t.ansi[8]=ye(e.brightBlack,Qe[8]),t.ansi[9]=ye(e.brightRed,Qe[9]),t.ansi[10]=ye(e.brightGreen,Qe[10]),t.ansi[11]=ye(e.brightYellow,Qe[11]),t.ansi[12]=ye(e.brightBlue,Qe[12]),t.ansi[13]=ye(e.brightMagenta,Qe[13]),t.ansi[14]=ye(e.brightCyan,Qe[14]),t.ansi[15]=ye(e.brightWhite,Qe[15]),e.extendedAnsi){let i=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let s=0;s<i;s++)t.ansi[s+16]=ye(e.extendedAnsi[s],Qe[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};ff=Ve([K(0,It)],ff);function ye(e,t){if(e!==void 0)try{return Re.toColor(e)}catch{}return t}var LP=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(let[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},RP=class{constructor(){this._services=new LP,this._services.set(Yp,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let i=NT(e).sort((n,o)=>n.index-o.index),s=[];for(let n of i){let o=this._services.get(n.id);if(!o)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${n.id._id}.`);s.push(o)}let r=i.length>0?i[0].index:t.length;if(t.length!==r)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);return new e(...t,...s)}},AP={trace:0,debug:1,info:2,warn:3,error:4,off:5},BP="xterm.js: ",pf=class extends le{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=AP[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":BP)+t,...i)}trace(e,...t){var i;this._logLevel<=0&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,e,t)}debug(e,...t){var i;this._logLevel<=1&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,e,t)}info(e,...t){var i;this._logLevel<=2&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,e,t)}warn(e,...t){var i;this._logLevel<=3&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,e,t)}error(e,...t){var i;this._logLevel<=4&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,e,t)}};pf=Ve([K(0,It)],pf);var rv=class extends le{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new O),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new O),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new O),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let s=e;s<this._length-t;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let s=this._length-1;s>=e;s--)this._array[this._getCyclicIndex(s+i.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<i.length;s++)this._array[this._getCyclicIndex(e+s)]=i[s];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){let s=this._length+i.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let r=t-1;r>=0;r--)this.set(e+r+i,this.get(e+r));let s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},ae=3,Ge=Object.freeze(new xa),ol=0,pu=2,yo=class xS{constructor(t,i,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*ae);let r=i||_i.fromCharData([0,$w,1,0]);for(let n=0;n<t;++n)this.setCell(n,r);this.length=t}get(t){let i=this._data[t*ae+0],s=i&2097151;return[this._data[t*ae+1],i&2097152?this._combined[t]:s?Ps(s):"",i>>22,i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):s]}set(t,i){this._data[t*ae+1]=i[0],i[1].length>1?(this._combined[t]=i[1],this._data[t*ae+0]=t|2097152|i[2]<<22):this._data[t*ae+0]=i[1].charCodeAt(0)|i[2]<<22}getWidth(t){return this._data[t*ae+0]>>22}hasWidth(t){return this._data[t*ae+0]&12582912}getFg(t){return this._data[t*ae+1]}getBg(t){return this._data[t*ae+2]}hasContent(t){return this._data[t*ae+0]&4194303}getCodePoint(t){let i=this._data[t*ae+0];return i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):i&2097151}isCombined(t){return this._data[t*ae+0]&2097152}getString(t){let i=this._data[t*ae+0];return i&2097152?this._combined[t]:i&2097151?Ps(i&2097151):""}isProtected(t){return this._data[t*ae+2]&536870912}loadCell(t,i){return ol=t*ae,i.content=this._data[ol+0],i.fg=this._data[ol+1],i.bg=this._data[ol+2],i.content&2097152&&(i.combinedData=this._combined[t]),i.bg&268435456&&(i.extended=this._extendedAttrs[t]),i}setCell(t,i){i.content&2097152&&(this._combined[t]=i.combinedData),i.bg&268435456&&(this._extendedAttrs[t]=i.extended),this._data[t*ae+0]=i.content,this._data[t*ae+1]=i.fg,this._data[t*ae+2]=i.bg}setCellFromCodepoint(t,i,s,r){r.bg&268435456&&(this._extendedAttrs[t]=r.extended),this._data[t*ae+0]=i|s<<22,this._data[t*ae+1]=r.fg,this._data[t*ae+2]=r.bg}addCodepointToCell(t,i,s){let r=this._data[t*ae+0];r&2097152?this._combined[t]+=Ps(i):r&2097151?(this._combined[t]=Ps(r&2097151)+Ps(i),r&=-2097152,r|=2097152):r=i|1<<22,s&&(r&=-12582913,r|=s<<22),this._data[t*ae+0]=r}insertCells(t,i,s){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length-t){let r=new _i;for(let n=this.length-t-i-1;n>=0;--n)this.setCell(t+i+n,this.loadCell(t+n,r));for(let n=0;n<i;++n)this.setCell(t+n,s)}else for(let r=t;r<this.length;++r)this.setCell(r,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(t,i,s){if(t%=this.length,i<this.length-t){let r=new _i;for(let n=0;n<this.length-t-i;++n)this.setCell(t+n,this.loadCell(t+i+n,r));for(let n=this.length-i;n<this.length;++n)this.setCell(n,s)}else for(let r=t;r<this.length;++r)this.setCell(r,s);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,s)}replaceCells(t,i,s,r=!1){if(r){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodepoint(i,0,1,s);t<i&&t<this.length;)this.isProtected(t)||this.setCell(t,s),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i,0,1,s);t<i&&t<this.length;)this.setCell(t++,s)}resize(t,i){if(t===this.length)return this._data.length*4*pu<this._data.buffer.byteLength;let s=t*ae;if(t>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let r=new Uint32Array(s);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,i)}else{this._data=this._data.subarray(0,s);let r=Object.keys(this._combined);for(let o=0;o<r.length;o++){let a=parseInt(r[o],10);a>=t&&delete this._combined[a]}let n=Object.keys(this._extendedAttrs);for(let o=0;o<n.length;o++){let a=parseInt(n[o],10);a>=t&&delete this._extendedAttrs[a]}}return this.length=t,s*4*pu<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*pu<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,i=!1){if(i){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,t);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let i in t._combined)this._combined[i]=t._combined[i];this._extendedAttrs={};for(let i in t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped}clone(){let t=new xS(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let i in this._combined)t._combined[i]=this._combined[i];for(let i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*ae+0]&4194303)return t+(this._data[t*ae+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*ae+0]&4194303||this._data[t*ae+2]&50331648)return t+(this._data[t*ae+0]>>22);return 0}copyCellsFrom(t,i,s,r,n){let o=t._data;if(n)for(let l=r-1;l>=0;l--){for(let c=0;c<ae;c++)this._data[(s+l)*ae+c]=o[(i+l)*ae+c];o[(i+l)*ae+2]&268435456&&(this._extendedAttrs[s+l]=t._extendedAttrs[i+l])}else for(let l=0;l<r;l++){for(let c=0;c<ae;c++)this._data[(s+l)*ae+c]=o[(i+l)*ae+c];o[(i+l)*ae+2]&268435456&&(this._extendedAttrs[s+l]=t._extendedAttrs[i+l])}let a=Object.keys(t._combined);for(let l=0;l<a.length;l++){let c=parseInt(a[l],10);c>=i&&(this._combined[c-i+s]=t._combined[c])}}translateToString(t,i,s,r){i=i??0,s=s??this.length,t&&(s=Math.min(s,this.getTrimmedLength())),r&&(r.length=0);let n="";for(;i<s;){let o=this._data[i*ae+0],a=o&2097151,l=o&2097152?this._combined[i]:a?Ps(a):As;if(n+=l,r)for(let c=0;c<l.length;++c)r.push(i);i+=o>>22||1}return r&&r.push(i),n}};function OP(e,t,i,s,r,n){let o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;let d=[e.get(a)];for(;l<e.length&&c.isWrapped;)d.push(c),c=e.get(++l);if(!n&&s>=a&&s<l){a+=d.length-1;continue}let f=0,p=ha(d,f,t),m=1,_=0;for(;m<d.length;){let b=ha(d,m,t),g=b-_,y=i-p,x=Math.min(g,y);d[f].copyCellsFrom(d[m],_,p,x,!1),p+=x,p===i&&(f++,p=0),_+=x,_===b&&(m++,_=0),p===0&&f!==0&&d[f-1].getWidth(i-1)===2&&(d[f].copyCellsFrom(d[f-1],i-1,p++,1,!1),d[f-1].setCell(i-1,r))}d[f].replaceCells(p,i,r);let v=0;for(let b=d.length-1;b>0&&(b>f||d[b].getTrimmedLength()===0);b--)v++;v>0&&(o.push(a+d.length-v),o.push(v)),a+=d.length-1}return o}function IP(e,t){let i=[],s=0,r=t[s],n=0;for(let o=0;o<e.length;o++)if(r===o){let a=t[++s];e.onDeleteEmitter.fire({index:o-n,amount:a}),o+=a-1,n+=a,r=t[++s]}else i.push(o);return{layout:i,countRemoved:n}}function $P(e,t){let i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let s=0;s<i.length;s++)e.set(s,i[s]);e.length=t.length}function zP(e,t,i){let s=[],r=e.map((l,c)=>ha(e,c,t)).reduce((l,c)=>l+c),n=0,o=0,a=0;for(;a<r;){if(r-a<i){s.push(r-a);break}n+=i;let l=ha(e,o,t);n>l&&(n-=l,o++);let c=e[o].getWidth(n-1)===2;c&&n--;let d=c?i-1:i;s.push(d),a+=d}return s}function ha(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();let s=!e[t].hasContent(i-1)&&e[t].getWidth(i-1)===1,r=e[t+1].getWidth(0)===2;return s&&r?i-1:i}var wS=class SS{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=SS._nextId++,this._onDispose=this.register(new O),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Cr(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};wS._nextId=1;var FP=wS,rt={},nr=rt.B;rt[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};rt.A={"#":""};rt.B=void 0;rt[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};rt.C=rt[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};rt.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};rt.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};rt.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};rt.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};rt.E=rt[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};rt.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};rt.H=rt[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};rt["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var nv=4294967295,ov=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Ge.clone(),this.savedCharset=nr,this.markers=[],this._nullCell=_i.fromCharData([0,$w,1,0]),this._whitespaceCell=_i.fromCharData([0,As,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new _c,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new rv(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new fc),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new fc),this._whitespaceCell}getBlankLine(e,t){return new yo(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>nv?nv:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=Ge);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new rv(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let i=this.getNullCell(Ge),s=0,r=this._getCorrectBufferLength(t);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<e)for(let o=0;o<this.lines.length;o++)s+=+this.lines.get(o).resize(e,i);let n=0;if(this._rows<t)for(let o=this._rows;o<t;o++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new yo(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new yo(e,i)));else for(let o=this._rows;o>t;o--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){let o=this.lines.length-r;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=r}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let n=0;n<this.lines.length;n++)s+=+this.lines.get(n).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,s=OP(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(Ge),i);if(s.length>0){let r=IP(this.lines,s);$P(this.lines,r.layout),this._reflowLargerAdjustViewport(e,t,r.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){let s=this.getNullCell(Ge),r=i;for(;r-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new yo(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(Ge),r=[],n=0;for(let o=this.lines.length-1;o>=0;o--){let a=this.lines.get(o);if(!a||!a.isWrapped&&a.getTrimmedLength()<=e)continue;let l=[a];for(;a.isWrapped&&o>0;)a=this.lines.get(--o),l.unshift(a);if(!i){let x=this.ybase+this.y;if(x>=o&&x<o+l.length)continue}let c=l[l.length-1].getTrimmedLength(),d=zP(l,this._cols,e),f=d.length-l.length,p;this.ybase===0&&this.y!==this.lines.length-1?p=Math.max(0,this.y-this.lines.maxLength+f):p=Math.max(0,this.lines.length-this.lines.maxLength+f);let m=[];for(let x=0;x<f;x++){let C=this.getBlankLine(Ge,!0);m.push(C)}m.length>0&&(r.push({start:o+l.length+n,newLines:m}),n+=m.length),l.push(...m);let _=d.length-1,v=d[_];v===0&&(_--,v=d[_]);let b=l.length-f-1,g=c;for(;b>=0;){let x=Math.min(g,v);if(l[_]===void 0)break;if(l[_].copyCellsFrom(l[b],g-x,v-x,x,!0),v-=x,v===0&&(_--,v=d[_]),g-=x,g===0){b--;let C=Math.max(b,0);g=ha(l,C,this._cols)}}for(let x=0;x<l.length;x++)d[x]<e&&l[x].setCell(d[x],s);let y=f-p;for(;y-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+n)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(r.length>0){let o=[],a=[];for(let v=0;v<this.lines.length;v++)a.push(this.lines.get(v));let l=this.lines.length,c=l-1,d=0,f=r[d];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+n);let p=0;for(let v=Math.min(this.lines.maxLength-1,l+n-1);v>=0;v--)if(f&&f.start>c+p){for(let b=f.newLines.length-1;b>=0;b--)this.lines.set(v--,f.newLines[b]);v++,o.push({index:c+1,amount:f.newLines.length}),p+=f.newLines.length,f=r[++d]}else this.lines.set(v,a[c--]);let m=0;for(let v=o.length-1;v>=0;v--)o[v].index+=m,this.lines.onInsertEmitter.fire(o[v]),m+=o[v].amount;let _=Math.max(0,l+n-this.lines.maxLength);_>0&&this.lines.onTrimEmitter.fire(_)}}translateBufferLineToString(e,t,i=0,s){let r=this.lines.get(e);return r?r.translateToString(t,i,s):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new FP(e);return this.markers.push(t),t.register(this.lines.onTrim(i=>{t.line-=i,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(i=>{t.line>=i.index&&(t.line+=i.amount)})),t.register(this.lines.onDelete(i=>{t.line>=i.index&&t.line<i.index+i.amount&&t.dispose(),t.line>i.index&&(t.line-=i.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},HP=class extends le{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new O),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new ov(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new ov(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},bS=2,CS=1,mf=class extends le{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new O),this.onResize=this._onResize.event,this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,bS),this.rows=Math.max(e.rawOptions.rows||0,CS),this.buffers=this._register(new HP(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let i=this.cols!==e,s=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:i,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let i=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==e.fg||s.getBg(0)!==e.bg)&&(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;let r=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(i.scrollTop===0){let o=i.lines.isFull;n===i.lines.length-1?o?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(n+1,0,s.clone()),o?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{let o=n-r+1;i.lines.shiftElements(r+1,o-1,-1),i.lines.set(n,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t){let i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);let s=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),s!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};mf=Ve([K(0,It)],mf);var Ur={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:gc,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},VP=["normal","bold","100","200","300","400","500","600","700","800","900"],WP=class extends le{constructor(e){super(),this._onOptionChange=this._register(new O),this.onOptionChange=this._onOptionChange.event;let t={...Ur};for(let i in e)if(i in t)try{let s=e[i];t[i]=this._sanitizeAndValidateOption(i,s)}catch(s){console.error(s)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(Me(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{e.indexOf(i)!==-1&&t()})}_setupOptions(){let e=i=>{if(!(i in Ur))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},t=(i,s)=>{if(!(i in Ur))throw new Error(`No option with key "${i}"`);s=this._sanitizeAndValidateOption(i,s),this.rawOptions[i]!==s&&(this.rawOptions[i]=s,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let s={get:e.bind(this,i),set:t.bind(this,i)};Object.defineProperty(this.options,i,s)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=Ur[e]),!UP(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=Ur[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=VP.includes(t)?t:Ur[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function UP(e){return e==="block"||e==="underline"||e==="bar"}function xo(e,t=5){if(typeof e!="object")return e;let i=Array.isArray(e)?[]:{};for(let s in e)i[s]=t<=1?e[s]:e[s]&&xo(e[s],t-1);return i}var av=Object.freeze({insertMode:!1}),lv=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),gf=class extends le{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new O),this.onData=this._onData.event,this._onUserInput=this._register(new O),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new O),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new O),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=xo(av),this.decPrivateModes=xo(lv)}reset(){this.modes=xo(av),this.decPrivateModes=xo(lv)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(s=>s.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};gf=Ve([K(0,Ot),K(1,Ww),K(2,It)],gf);var cv={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function mu(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(i|=64,i|=e.action):(i|=e.button&3,e.button&4&&(i|=64),e.button&8&&(i|=128),e.action===32?i|=32:e.action===0&&!t&&(i|=3)),i}var gu=String.fromCharCode,hv={DEFAULT:e=>{let t=[mu(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${gu(t[0])}${gu(t[1])}${gu(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${mu(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${mu(e,!0)};${e.x};${e.y}${t}`}},_f=class extends le{constructor(e,t,i){super(),this._bufferService=e,this._coreService=t,this._optionsService=i,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new O),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(cv))this.addProtocol(s,cv[s]);for(let s of Object.keys(hv))this.addEncoding(s,hv[s]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,i){if(e.deltaY===0||e.shiftKey||t===void 0||i===void 0)return 0;let s=t/i,r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=s+0,Math.abs(e.deltaY)<50&&(r*=.3),this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};_f=Ve([K(0,Ot),K(1,Tr),K(2,It)],_f);var _u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],KP=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],et;function qP(e,t){let i=0,s=t.length-1,r;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=i;)if(r=i+s>>1,e>t[r][1])i=r+1;else if(e<t[r][0])s=r-1;else return!0;return!1}var YP=class{constructor(){if(this.version="6",!et){et=new Uint8Array(65536),et.fill(1),et[0]=0,et.fill(0,1,32),et.fill(0,127,160),et.fill(2,4352,4448),et[9001]=2,et[9002]=2,et.fill(2,11904,42192),et[12351]=1,et.fill(2,44032,55204),et.fill(2,63744,64256),et.fill(2,65040,65050),et.fill(2,65072,65136),et.fill(2,65280,65377),et.fill(2,65504,65511);for(let e=0;e<_u.length;++e)et.fill(0,_u[e][0],_u[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?et[e]:qP(e,KP)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),s=i===0&&t!==0;if(s){let r=fr.extractWidth(t);r===0?s=!1:r>i&&(i=r)}return fr.createPropertyValue(0,i,s)}},fr=class jl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new O,this.onChange=this._onChange.event;let t=new YP;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,i,s=!1){return(t&16777215)<<3|(i&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let i=0,s=0,r=t.length;for(let n=0;n<r;++n){let o=t.charCodeAt(n);if(55296<=o&&o<=56319){if(++n>=r)return i+this.wcwidth(o);let c=t.charCodeAt(n);56320<=c&&c<=57343?o=(o-55296)*1024+c-56320+65536:i+=this.wcwidth(c)}let a=this.charProperties(o,s),l=jl.extractWidth(a);jl.extractShouldJoin(a)&&(l-=jl.extractWidth(s)),i+=l,s=a}return i}charProperties(t,i){return this._activeProvider.charProperties(t,i)}},GP=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function uv(e){var s;let t=(s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:s.get(e.cols-1),i=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);i&&t&&(i.isWrapped=t[3]!==0&&t[3]!==32)}var lo=2147483647,XP=256,kS=class vf{constructor(t=32,i=32){if(this.maxLength=t,this.maxSubParamsLength=i,i>XP)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let i=new vf;if(!t.length)return i;for(let s=Array.isArray(t[0])?1:0;s<t.length;++s){let r=t[s];if(Array.isArray(r))for(let n=0;n<r.length;++n)i.addSubParam(r[n]);else i.addParam(r)}return i}clone(){let t=new vf(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let i=0;i<this.length;++i){t.push(this.params[i]);let s=this._subParamsIdx[i]>>8,r=this._subParamsIdx[i]&255;r-s>0&&t.push(Array.prototype.slice.call(this._subParams,s,r))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>lo?lo:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>lo?lo:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let i=this._subParamsIdx[t]>>8,s=this._subParamsIdx[t]&255;return s-i>0?this._subParams.subarray(i,s):null}getSubParamsAll(){let t={};for(let i=0;i<this.length;++i){let s=this._subParamsIdx[i]>>8,r=this._subParamsIdx[i]&255;r-s>0&&(t[i]=this._subParams.slice(s,r))}return t}addDigit(t){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,r=s[i-1];s[i-1]=~r?Math.min(r*10+t,lo):t}},co=[],ZP=class{constructor(){this._state=0,this._active=co,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let s=i.indexOf(t);s!==-1&&i.splice(s,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=co}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=co,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||co,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,i){if(!this._active.length)this._handlerFb(this._id,"PUT",$c(e,t,i));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i)}start(){this.reset(),this._state=1}put(e,t,i){if(this._state!==3){if(this._state===1)for(;t<i;){let s=e[t++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&i===!1){for(;s>=0&&(i=this._active[s].end(e),i!==!0);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}this._active=co,this._id=-1,this._state=0}}},Zt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=$c(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(i=>(this._data="",this._hitLimit=!1,i));return this._data="",this._hitLimit=!1,t}},ho=[],JP=class{constructor(){this._handlers=Object.create(null),this._active=ho,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=ho}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let s=i.indexOf(t);s!==-1&&i.splice(s,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=ho,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||ho,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t)}put(e,t,i){if(!this._active.length)this._handlerFb(this._ident,"PUT",$c(e,t,i));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&i===!1){for(;s>=0&&(i=this._active[s].unhook(e),i!==!0);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}this._active=ho,this._ident=0}},wo=new kS;wo.addParam(0);var dv=class{constructor(e){this._handler=e,this._data="",this._params=wo,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():wo,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=$c(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(i=>(this._params=wo,this._data="",this._hitLimit=!1,i));return this._params=wo,this._data="",this._hitLimit=!1,t}},QP=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|s}},hi=160,e8=function(){let e=new QP(4095),t=Array.apply(null,Array(256)).map((a,l)=>l),i=(a,l)=>t.slice(a,l),s=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));let n=i(0,14),o;e.setDefault(1,0),e.addMany(s,0,2,0);for(o in n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(hi,0,2,0),e.add(hi,8,5,8),e.add(hi,6,0,6),e.add(hi,11,0,11),e.add(hi,13,13,13),e}(),t8=class extends le{constructor(e=e8){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new kS,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,i,s)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Me(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new ZP),this._dcsParser=this._register(new JP),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let r=0;r<e.intermediates.length;++r){let n=e.intermediates.charCodeAt(r);if(32>n||n>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=n}}if(e.final.length!==1)throw new Error("final must be a single byte");let s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let i=this._identifier(e,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);let s=this._escHandlers[i];return s.push(t),{dispose:()=>{let r=s.indexOf(t);r!==-1&&s.splice(r,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let i=this._identifier(e);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);let s=this._csiHandlers[i];return s.push(t),{dispose:()=>{let r=s.indexOf(t);r!==-1&&s.splice(r,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(e,t,i){let s=0,r=0,n=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,n=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let a=this._parseStack.handlers,l=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&l>-1){for(;l>=0&&(o=a[l](this._params),o!==!0);l--)if(o instanceof Promise)return this._parseStack.handlerPos=l,o}this._parseStack.handlers=[];break;case 4:if(i===!1&&l>-1){for(;l>=0&&(o=a[l](),o!==!0);l--)if(o instanceof Promise)return this._parseStack.handlerPos=l,o}this._parseStack.handlers=[];break;case 6:if(s=e[this._parseStack.chunkPos],o=this._dcsParser.unhook(s!==24&&s!==26,i),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=e[this._parseStack.chunkPos],o=this._oscParser.end(s!==24&&s!==26,i),o)return o;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,n=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let a=n;a<t;++a){switch(s=e[a],r=this._transitions.table[this.currentState<<8|(s<160?s:hi)],r>>4){case 2:for(let p=a+1;;++p){if(p>=t||(s=e[p])<32||s>126&&s<hi){this._printHandler(e,a,p),a=p-1;break}if(++p>=t||(s=e[p])<32||s>126&&s<hi){this._printHandler(e,a,p),a=p-1;break}if(++p>=t||(s=e[p])<32||s>126&&s<hi){this._printHandler(e,a,p),a=p-1;break}if(++p>=t||(s=e[p])<32||s>126&&s<hi){this._printHandler(e,a,p),a=p-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:a,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let l=this._csiHandlers[this._collect<<8|s],c=l?l.length-1:-1;for(;c>=0&&(o=l[c](this._params),o!==!0);c--)if(o instanceof Promise)return this._preserveStack(3,l,c,r,a),o;c<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++a<t&&(s=e[a])>47&&s<60);a--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let d=this._escHandlers[this._collect<<8|s],f=d?d.length-1:-1;for(;f>=0&&(o=d[f](),o!==!0);f--)if(o instanceof Promise)return this._preserveStack(4,d,f,r,a),o;f<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let p=a+1;;++p)if(p>=t||(s=e[p])===24||s===26||s===27||s>127&&s<hi){this._dcsParser.put(e,a,p),a=p-1;break}break;case 14:if(o=this._dcsParser.unhook(s!==24&&s!==26),o)return this._preserveStack(6,[],0,r,a),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let p=a+1;;p++)if(p>=t||(s=e[p])<32||s>127&&s<hi){this._oscParser.put(e,a,p),a=p-1;break}break;case 6:if(o=this._oscParser.end(s!==24&&s!==26),o)return this._preserveStack(5,[],0,r,a),o;s===27&&(r|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=r&15}}},i8=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,s8=/^[\da-f]+$/;function fv(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let i=i8.exec(t);if(i){let s=i[1]?15:i[4]?255:i[7]?4095:65535;return[Math.round(parseInt(i[1]||i[4]||i[7]||i[10],16)/s*255),Math.round(parseInt(i[2]||i[5]||i[8]||i[11],16)/s*255),Math.round(parseInt(i[3]||i[6]||i[9]||i[12],16)/s*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),s8.exec(t)&&[3,6,9,12].includes(t.length))){let i=t.length/3,s=[0,0,0];for(let r=0;r<3;++r){let n=parseInt(t.slice(i*r,i*r+i),16);s[r]=i===1?n<<4:i===2?n:i===3?n>>4:n>>8}return s}}function vu(e,t){let i=e.toString(16),s=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function r8(e,t=16){let[i,s,r]=e;return`rgb:${vu(i,t)}/${vu(s,t)}/${vu(r,t)}`}var n8={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Cs=131072,pv=10;function mv(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var gv=5e3,_v=0,o8=class extends le{constructor(e,t,i,s,r,n,o,a,l=new t8){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=r,this._oscLinkService=n,this._coreMouseService=o,this._unicodeService=a,this._parser=l,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new kT,this._utf8Decoder=new ET,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Ge.clone(),this._eraseAttrDataInternal=Ge.clone(),this._onRequestBell=this._register(new O),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new O),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new O),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new O),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new O),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new O),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new O),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new O),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new O),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new O),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new O),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new O),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new yf(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(c=>this._activeBuffer=c.activeBuffer)),this._parser.setCsiHandlerFallback((c,d)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(c),params:d.toArray()})}),this._parser.setEscHandlerFallback(c=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(c)})}),this._parser.setExecuteHandlerFallback(c=>{this._logService.debug("Unknown EXECUTE code: ",{code:c})}),this._parser.setOscHandlerFallback((c,d,f)=>{this._logService.debug("Unknown OSC code: ",{identifier:c,action:d,data:f})}),this._parser.setDcsHandlerFallback((c,d,f)=>{d==="HOOK"&&(f=f.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(c),action:d,payload:f})}),this._parser.setPrintHandler((c,d,f)=>this.print(c,d,f)),this._parser.registerCsiHandler({final:"@"},c=>this.insertChars(c)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},c=>this.scrollLeft(c)),this._parser.registerCsiHandler({final:"A"},c=>this.cursorUp(c)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},c=>this.scrollRight(c)),this._parser.registerCsiHandler({final:"B"},c=>this.cursorDown(c)),this._parser.registerCsiHandler({final:"C"},c=>this.cursorForward(c)),this._parser.registerCsiHandler({final:"D"},c=>this.cursorBackward(c)),this._parser.registerCsiHandler({final:"E"},c=>this.cursorNextLine(c)),this._parser.registerCsiHandler({final:"F"},c=>this.cursorPrecedingLine(c)),this._parser.registerCsiHandler({final:"G"},c=>this.cursorCharAbsolute(c)),this._parser.registerCsiHandler({final:"H"},c=>this.cursorPosition(c)),this._parser.registerCsiHandler({final:"I"},c=>this.cursorForwardTab(c)),this._parser.registerCsiHandler({final:"J"},c=>this.eraseInDisplay(c,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},c=>this.eraseInDisplay(c,!0)),this._parser.registerCsiHandler({final:"K"},c=>this.eraseInLine(c,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},c=>this.eraseInLine(c,!0)),this._parser.registerCsiHandler({final:"L"},c=>this.insertLines(c)),this._parser.registerCsiHandler({final:"M"},c=>this.deleteLines(c)),this._parser.registerCsiHandler({final:"P"},c=>this.deleteChars(c)),this._parser.registerCsiHandler({final:"S"},c=>this.scrollUp(c)),this._parser.registerCsiHandler({final:"T"},c=>this.scrollDown(c)),this._parser.registerCsiHandler({final:"X"},c=>this.eraseChars(c)),this._parser.registerCsiHandler({final:"Z"},c=>this.cursorBackwardTab(c)),this._parser.registerCsiHandler({final:"`"},c=>this.charPosAbsolute(c)),this._parser.registerCsiHandler({final:"a"},c=>this.hPositionRelative(c)),this._parser.registerCsiHandler({final:"b"},c=>this.repeatPrecedingCharacter(c)),this._parser.registerCsiHandler({final:"c"},c=>this.sendDeviceAttributesPrimary(c)),this._parser.registerCsiHandler({prefix:">",final:"c"},c=>this.sendDeviceAttributesSecondary(c)),this._parser.registerCsiHandler({final:"d"},c=>this.linePosAbsolute(c)),this._parser.registerCsiHandler({final:"e"},c=>this.vPositionRelative(c)),this._parser.registerCsiHandler({final:"f"},c=>this.hVPosition(c)),this._parser.registerCsiHandler({final:"g"},c=>this.tabClear(c)),this._parser.registerCsiHandler({final:"h"},c=>this.setMode(c)),this._parser.registerCsiHandler({prefix:"?",final:"h"},c=>this.setModePrivate(c)),this._parser.registerCsiHandler({final:"l"},c=>this.resetMode(c)),this._parser.registerCsiHandler({prefix:"?",final:"l"},c=>this.resetModePrivate(c)),this._parser.registerCsiHandler({final:"m"},c=>this.charAttributes(c)),this._parser.registerCsiHandler({final:"n"},c=>this.deviceStatus(c)),this._parser.registerCsiHandler({prefix:"?",final:"n"},c=>this.deviceStatusPrivate(c)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},c=>this.softReset(c)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},c=>this.setCursorStyle(c)),this._parser.registerCsiHandler({final:"r"},c=>this.setScrollRegion(c)),this._parser.registerCsiHandler({final:"s"},c=>this.saveCursor(c)),this._parser.registerCsiHandler({final:"t"},c=>this.windowOptions(c)),this._parser.registerCsiHandler({final:"u"},c=>this.restoreCursor(c)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},c=>this.insertColumns(c)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},c=>this.deleteColumns(c)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},c=>this.selectProtected(c)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},c=>this.requestMode(c,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},c=>this.requestMode(c,!1)),this._parser.setExecuteHandler(j.BEL,()=>this.bell()),this._parser.setExecuteHandler(j.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(j.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(j.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(j.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(j.BS,()=>this.backspace()),this._parser.setExecuteHandler(j.HT,()=>this.tab()),this._parser.setExecuteHandler(j.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(j.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Pl.IND,()=>this.index()),this._parser.setExecuteHandler(Pl.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Pl.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Zt(c=>(this.setTitle(c),this.setIconName(c),!0))),this._parser.registerOscHandler(1,new Zt(c=>this.setIconName(c))),this._parser.registerOscHandler(2,new Zt(c=>this.setTitle(c))),this._parser.registerOscHandler(4,new Zt(c=>this.setOrReportIndexedColor(c))),this._parser.registerOscHandler(8,new Zt(c=>this.setHyperlink(c))),this._parser.registerOscHandler(10,new Zt(c=>this.setOrReportFgColor(c))),this._parser.registerOscHandler(11,new Zt(c=>this.setOrReportBgColor(c))),this._parser.registerOscHandler(12,new Zt(c=>this.setOrReportCursorColor(c))),this._parser.registerOscHandler(104,new Zt(c=>this.restoreIndexedColor(c))),this._parser.registerOscHandler(110,new Zt(c=>this.restoreFgColor(c))),this._parser.registerOscHandler(111,new Zt(c=>this.restoreBgColor(c))),this._parser.registerOscHandler(112,new Zt(c=>this.restoreCursorColor(c))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let c in rt)this._parser.registerEscHandler({intermediates:"(",final:c},()=>this.selectCharset("("+c)),this._parser.registerEscHandler({intermediates:")",final:c},()=>this.selectCharset(")"+c)),this._parser.registerEscHandler({intermediates:"*",final:c},()=>this.selectCharset("*"+c)),this._parser.registerEscHandler({intermediates:"+",final:c},()=>this.selectCharset("+"+c)),this._parser.registerEscHandler({intermediates:"-",final:c},()=>this.selectCharset("-"+c)),this._parser.registerEscHandler({intermediates:".",final:c},()=>this.selectCharset("."+c)),this._parser.registerEscHandler({intermediates:"/",final:c},()=>this.selectCharset("/"+c));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(c=>(this._logService.error("Parsing error: ",c),c)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new dv((c,d)=>this.requestStatusString(c,d)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,i)=>setTimeout(()=>i("#SLOW_TIMEOUT"),gv))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${gv} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,r=this._activeBuffer.y,n=0,o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Cs&&(n=this._parseStack.position+Cs)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,c=>String.fromCharCode(c)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(c=>c.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Cs&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Cs))),o||this._dirtyRowTracker.clearRange(),e.length>Cs)for(let c=n;c<e.length;c+=Cs){let d=c+Cs<e.length?c+Cs:e.length,f=typeof e=="string"?this._stringDecoder.decode(e.substring(c,d),this._parseBuffer):this._utf8Decoder.decode(e.subarray(c,d),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,f))return this._preserveStack(s,r,f,c),this._logSlowResolvingAsync(i),i}else if(!o){let c=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,c))return this._preserveStack(s,r,c,0),this._logSlowResolvingAsync(i),i}(this._activeBuffer.x!==s||this._activeBuffer.y!==r)&&this._onCursorMove.fire();let a=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),l=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);l<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(l,this._bufferService.rows-1),end:Math.min(a,this._bufferService.rows-1)})}print(e,t,i){let s,r,n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,c=this._coreService.modes.insertMode,d=this._curAttrData,f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&f.getWidth(this._activeBuffer.x-1)===2&&f.setCellFromCodepoint(this._activeBuffer.x-1,0,1,d);let p=this._parser.precedingJoinState;for(let m=t;m<i;++m){if(s=e[m],s<127&&n){let g=n[String.fromCharCode(s)];g&&(s=g.charCodeAt(0))}let _=this._unicodeService.charProperties(s,p);r=fr.extractWidth(_);let v=fr.extractShouldJoin(_),b=v?fr.extractWidth(p):0;if(p=_,o&&this._onA11yChar.fire(Ps(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-b>a){if(l){let g=f,y=this._activeBuffer.x-b;for(this._activeBuffer.x=b,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),b>0&&f instanceof yo&&f.copyCellsFrom(g,y,0,b,!1);y<a;)g.setCellFromCodepoint(y++,0,1,d)}else if(this._activeBuffer.x=a-1,r===2)continue}if(v&&this._activeBuffer.x){let g=f.getWidth(this._activeBuffer.x-1)?1:2;f.addCodepointToCell(this._activeBuffer.x-g,s,r);for(let y=r-b;--y>=0;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,d);continue}if(c&&(f.insertCells(this._activeBuffer.x,r-b,this._activeBuffer.getNullCell(d)),f.getWidth(a-1)===2&&f.setCellFromCodepoint(a-1,0,1,d)),f.setCellFromCodepoint(this._activeBuffer.x++,s,r,d),r>0)for(;--r;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,d)}this._parser.precedingJoinState=p,this._activeBuffer.x<a&&i-t>0&&f.getWidth(this._activeBuffer.x)===0&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodepoint(this._activeBuffer.x,0,1,d),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,i=>mv(i.params[0],this._optionsService.rawOptions.windowOptions)?t(i):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new dv(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Zt(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,r=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){var s;this._restrictCursor(this._bufferService.cols);let i;switch(e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(i=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,i-1);i--&&!((s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i))!=null&&s.getTrimmedLength()););for(;i>=0;i--)this._bufferService.scroll(this._eraseAttrData())}else{for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let r=this._activeBuffer.lines.length-this._bufferService.rows;r>0&&(this._activeBuffer.lines.trimStart(r),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-r,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-r,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Ge));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let i=e.params[0]||1,s=fr.extractWidth(t),r=this._activeBuffer.x-s,n=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(n.length*i),a=0;for(let c=0;c<n.length;){let d=n.codePointAt(c)||0;o[a++]=d,c+=d>65535?2:1}let l=a;for(let c=1;c<i;++c)o.copyWithin(l,0,a),l+=a;return this.print(o,0,l),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(j.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(j.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(j.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(j.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(j.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,nr),this._charsetService.setgCharset(1,nr),this._charsetService.setgCharset(2,nr),this._charsetService.setgCharset(3,nr);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){(v=>(v[v.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",v[v.SET=1]="SET",v[v.RESET=2]="RESET",v[v.PERMANENTLY_SET=3]="PERMANENTLY_SET",v[v.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(i={}));let s=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:n}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:d}=a,f=this._optionsService.rawOptions,p=(v,b)=>(o.triggerDataEvent(`${j.ESC}[${t?"":"?"}${v};${b}$y`),!0),m=v=>v?1:2,_=e.params[0];return t?_===2?p(_,4):_===4?p(_,m(o.modes.insertMode)):_===12?p(_,3):_===20?p(_,m(f.convertEol)):p(_,0):_===1?p(_,m(s.applicationCursorKeys)):_===3?p(_,f.windowOptions.setWinLines?l===80?2:l===132?1:0:0):_===6?p(_,m(s.origin)):_===7?p(_,m(s.wraparound)):_===8?p(_,3):_===9?p(_,m(r==="X10")):_===12?p(_,m(f.cursorBlink)):_===25?p(_,m(!o.isCursorHidden)):_===45?p(_,m(s.reverseWraparound)):_===66?p(_,m(s.applicationKeypad)):_===67?p(_,4):_===1e3?p(_,m(r==="VT200")):_===1002?p(_,m(r==="DRAG")):_===1003?p(_,m(r==="ANY")):_===1004?p(_,m(s.sendFocus)):_===1005?p(_,4):_===1006?p(_,m(n==="SGR")):_===1015?p(_,4):_===1016?p(_,m(n==="SGR_PIXELS")):_===1048?p(_,1):_===47||_===1047||_===1049?p(_,m(c===d)):_===2004?p(_,m(s.bracketedPasteMode)):_===2026?p(_,m(s.synchronizedOutput)):p(_,0)}_updateAttrColor(e,t,i,s,r){return t===2?(e|=50331648,e&=-16777216,e|=xa.fromColorRGB([i,s,r])):t===5&&(e&=-50331904,e|=33554432|i&255),e}_extractColor(e,t,i){let s=[0,0,-1,0,0,0],r=0,n=0;do{if(s[n+r]=e.params[t+n],e.hasSubParams(t+n)){let o=e.getSubParams(t+n),a=0;do s[1]===5&&(r=1),s[n+a+1+r]=o[a];while(++a<o.length&&a+n+1+r<s.length);break}if(s[1]===5&&n+r>=2||s[1]===2&&n+r>=5)break;s[1]&&(r=1)}while(++n+t<e.length&&n+r<s.length);for(let o=2;o<s.length;++o)s[o]===-1&&(s[o]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=Ge.fg,e.bg=Ge.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,i,s=this._curAttrData;for(let r=0;r<t;r++)i=e.params[r],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777216|i-90|8):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777216|i-100|8):i===0?this._processSGR0(s):i===1?s.fg|=134217728:i===3?s.bg|=67108864:i===4?(s.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,s)):i===5?s.fg|=536870912:i===7?s.fg|=67108864:i===8?s.fg|=1073741824:i===9?s.fg|=2147483648:i===2?s.bg|=134217728:i===21?this._processUnderline(2,s):i===22?(s.fg&=-134217729,s.bg&=-134217729):i===23?s.bg&=-67108865:i===24?(s.fg&=-268435457,this._processUnderline(0,s)):i===25?s.fg&=-536870913:i===27?s.fg&=-67108865:i===28?s.fg&=-1073741825:i===29?s.fg&=2147483647:i===39?(s.fg&=-67108864,s.fg|=Ge.fg&16777215):i===49?(s.bg&=-67108864,s.bg|=Ge.bg&16777215):i===38||i===48||i===58?r+=this._extractColor(e,r,s):i===53?s.bg|=1073741824:i===55?s.bg&=-1073741825:i===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):i===100?(s.fg&=-67108864,s.fg|=Ge.fg&16777215,s.bg&=-67108864,s.bg|=Ge.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${j.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${j.ESC}[${t};${i}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${j.ESC}[?${t};${i}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Ge.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let i=t%2===1;this._coreService.decPrivateModes.cursorBlink=i}return!0}setScrollRegion(e){let t=e.params[0]||1,i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||i===0)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!mv(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${j.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>pv&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>pv&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],i=e.split(";");for(;i.length>1;){let s=i.shift(),r=i.shift();if(/^\d+$/.exec(s)){let n=parseInt(s);if(vv(n))if(r==="?")t.push({type:0,index:n});else{let o=fv(r);o&&t.push({type:1,index:n,color:o})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let i=e.slice(0,t).trim(),s=e.slice(t+1);return s?this._createHyperlink(i,s):i.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let i=e.split(":"),s,r=i.findIndex(n=>n.startsWith("id="));return r!==-1&&(s=i[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let i=e.split(";");for(let s=0;s<i.length&&!(t>=this._specialColors.length);++s,++t)if(i[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let r=fv(i[s]);r&&this._onColor.fire([{type:1,index:this._specialColors[t],color:r}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],i=e.split(";");for(let s=0;s<i.length;++s)if(/^\d+$/.exec(i[s])){let r=parseInt(i[s]);vv(r)&&t.push({type:2,index:r})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,nr),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(n8[e[0]],rt[e[1]]||nr),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Ge.clone(),this._eraseAttrDataInternal=Ge.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new _i;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let i=o=>(this._coreService.triggerDataEvent(`${j.ESC}${o}${j.ESC}\\`),!0),s=this._bufferService.buffer,r=this._optionsService.rawOptions;return i(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},yf=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(_v=e,e=t,t=_v),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};yf=Ve([K(0,Ot)],yf);function vv(e){return 0<=e&&e<256}var a8=5e7,yv=12,l8=50,c8=class extends le{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new O),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let i;for(;i=this._writeBuffer.shift();){this._action(i);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>a8)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let i=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],r=this._action(s,t);if(r){let o=a=>performance.now()-i>=yv?setTimeout(()=>this._innerWrite(0,a)):this._innerWrite(i,a);r.catch(a=>(queueMicrotask(()=>{throw a}),Promise.resolve(!1))).then(o);return}let n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-i>=yv)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>l8&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},xf=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let a=t.addMarker(t.ybase+t.y),l={data:e,id:this._nextId++,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(l,a)),this._dataByLinkId.set(l.id,l),l.id}let i=e,s=this._getEntryIdKey(i),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,t.ybase+t.y),r.id;let n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(o,n)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){let i=this._dataByLinkId.get(e);if(i&&i.lines.every(s=>s.line!==t)){let s=this._bufferService.buffer.addMarker(t);i.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(i,s))}}getLinkData(e){var t;return(t=this._dataByLinkId.get(e))==null?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let i=e.lines.indexOf(t);i!==-1&&(e.lines.splice(i,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};xf=Ve([K(0,Ot)],xf);var xv=!1,h8=class extends le{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Tn),this._onBinary=this._register(new O),this.onBinary=this._onBinary.event,this._onData=this._register(new O),this.onData=this._onData.event,this._onLineFeed=this._register(new O),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new O),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new O),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new O),this._instantiationService=new RP,this.optionsService=this._register(new WP(e)),this._instantiationService.setService(It,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(mf)),this._instantiationService.setService(Ot,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(pf)),this._instantiationService.setService(Ww,this._logService),this.coreService=this._register(this._instantiationService.createInstance(gf)),this._instantiationService.setService(Tr,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(_f)),this._instantiationService.setService(Vw,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(fr)),this._instantiationService.setService(MT,this.unicodeService),this._charsetService=this._instantiationService.createInstance(GP),this._instantiationService.setService(PT,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(xf),this._instantiationService.setService(Uw,this._oscLinkService),this._inputHandler=this._register(new o8(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(xt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(xt.forward(this._bufferService.onResize,this._onResize)),this._register(xt.forward(this.coreService.onData,this._onData)),this._register(xt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new c8((t,i)=>this._inputHandler.parse(t,i))),this._register(xt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new O),this._onScroll.event(e=>{var t;(t=this._onScrollApi)==null||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!xv&&(this._logService.warn("writeSync is unreliable and will be removed soon."),xv=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,bS),t=Math.max(t,CS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(uv.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(uv(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Me(()=>{for(let t of e)t.dispose()})}}},u8={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function d8(e,t,i,s){var o;let r={type:0,cancel:!1,key:void 0},n=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?r.key=j.ESC+"OA":r.key=j.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?r.key=j.ESC+"OD":r.key=j.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?r.key=j.ESC+"OC":r.key=j.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?r.key=j.ESC+"OB":r.key=j.ESC+"[B");break;case 8:r.key=e.ctrlKey?"\b":j.DEL,e.altKey&&(r.key=j.ESC+r.key);break;case 9:if(e.shiftKey){r.key=j.ESC+"[Z";break}r.key=j.HT,r.cancel=!0;break;case 13:r.key=e.altKey?j.ESC+j.CR:j.CR,r.cancel=!0;break;case 27:r.key=j.ESC,e.altKey&&(r.key=j.ESC+j.ESC),r.cancel=!0;break;case 37:if(e.metaKey)break;n?r.key=j.ESC+"[1;"+(n+1)+"D":t?r.key=j.ESC+"OD":r.key=j.ESC+"[D";break;case 39:if(e.metaKey)break;n?r.key=j.ESC+"[1;"+(n+1)+"C":t?r.key=j.ESC+"OC":r.key=j.ESC+"[C";break;case 38:if(e.metaKey)break;n?r.key=j.ESC+"[1;"+(n+1)+"A":t?r.key=j.ESC+"OA":r.key=j.ESC+"[A";break;case 40:if(e.metaKey)break;n?r.key=j.ESC+"[1;"+(n+1)+"B":t?r.key=j.ESC+"OB":r.key=j.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(r.key=j.ESC+"[2~");break;case 46:n?r.key=j.ESC+"[3;"+(n+1)+"~":r.key=j.ESC+"[3~";break;case 36:n?r.key=j.ESC+"[1;"+(n+1)+"H":t?r.key=j.ESC+"OH":r.key=j.ESC+"[H";break;case 35:n?r.key=j.ESC+"[1;"+(n+1)+"F":t?r.key=j.ESC+"OF":r.key=j.ESC+"[F";break;case 33:e.shiftKey?r.type=2:e.ctrlKey?r.key=j.ESC+"[5;"+(n+1)+"~":r.key=j.ESC+"[5~";break;case 34:e.shiftKey?r.type=3:e.ctrlKey?r.key=j.ESC+"[6;"+(n+1)+"~":r.key=j.ESC+"[6~";break;case 112:n?r.key=j.ESC+"[1;"+(n+1)+"P":r.key=j.ESC+"OP";break;case 113:n?r.key=j.ESC+"[1;"+(n+1)+"Q":r.key=j.ESC+"OQ";break;case 114:n?r.key=j.ESC+"[1;"+(n+1)+"R":r.key=j.ESC+"OR";break;case 115:n?r.key=j.ESC+"[1;"+(n+1)+"S":r.key=j.ESC+"OS";break;case 116:n?r.key=j.ESC+"[15;"+(n+1)+"~":r.key=j.ESC+"[15~";break;case 117:n?r.key=j.ESC+"[17;"+(n+1)+"~":r.key=j.ESC+"[17~";break;case 118:n?r.key=j.ESC+"[18;"+(n+1)+"~":r.key=j.ESC+"[18~";break;case 119:n?r.key=j.ESC+"[19;"+(n+1)+"~":r.key=j.ESC+"[19~";break;case 120:n?r.key=j.ESC+"[20;"+(n+1)+"~":r.key=j.ESC+"[20~";break;case 121:n?r.key=j.ESC+"[21;"+(n+1)+"~":r.key=j.ESC+"[21~";break;case 122:n?r.key=j.ESC+"[23;"+(n+1)+"~":r.key=j.ESC+"[23~";break;case 123:n?r.key=j.ESC+"[24;"+(n+1)+"~":r.key=j.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?r.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?r.key=j.NUL:e.keyCode>=51&&e.keyCode<=55?r.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?r.key=j.DEL:e.keyCode===219?r.key=j.ESC:e.keyCode===220?r.key=j.FS:e.keyCode===221&&(r.key=j.GS);else if((!i||s)&&e.altKey&&!e.metaKey){let a=(o=u8[e.keyCode])==null?void 0:o[e.shiftKey?1:0];if(a)r.key=j.ESC+a;else if(e.keyCode>=65&&e.keyCode<=90){let l=e.ctrlKey?e.keyCode-64:e.keyCode+32,c=String.fromCharCode(l);e.shiftKey&&(c=c.toUpperCase()),r.key=j.ESC+c}else if(e.keyCode===32)r.key=j.ESC+(e.ctrlKey?j.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let l=e.code.slice(3,4);e.shiftKey||(l=l.toLowerCase()),r.key=j.ESC+l,r.cancel=!0}}else i&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(r.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?r.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(r.key=j.US),e.key==="@"&&(r.key=j.NUL));break}return r}var Ke=0,f8=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new _c,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new _c,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((r,n)=>this._getKey(r)-this._getKey(n)),t=0,i=0,s=new Array(this._array.length+this._insertedValues.length);for(let r=0;r<s.length;r++)i>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[i])?(s[r]=e[t],t++):s[r]=this._array[i++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(Ke=this._search(t),Ke===-1)||this._getKey(this._array[Ke])!==t)return!1;do if(this._array[Ke]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(Ke),!0;while(++Ke<this._array.length&&this._getKey(this._array[Ke])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((r,n)=>r-n),t=0,i=new Array(this._array.length-e.length),s=0;for(let r=0;r<this._array.length;r++)e[t]===r?t++:i[s++]=this._array[r];this._array=i,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Ke=this._search(e),!(Ke<0||Ke>=this._array.length)&&this._getKey(this._array[Ke])===e))do yield this._array[Ke];while(++Ke<this._array.length&&this._getKey(this._array[Ke])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(Ke=this._search(e),!(Ke<0||Ke>=this._array.length)&&this._getKey(this._array[Ke])===e))do t(this._array[Ke]);while(++Ke<this._array.length&&this._getKey(this._array[Ke])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1,r=this._getKey(this._array[s]);if(r>e)i=s-1;else if(r<e)t=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}}return t}},yu=0,wv=0,p8=class extends le{constructor(){super(),this._decorations=new f8(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new O),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new O),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Me(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new m8(e);if(t){let i=t.marker.onDispose(()=>t.dispose()),s=t.onDispose(()=>{s.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),i.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let s=0,r=0;for(let n of this._decorations.getKeyIterator(t))s=n.options.x??0,r=s+(n.options.width??1),e>=s&&e<r&&(!i||(n.options.layer??"bottom")===i)&&(yield n)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,r=>{yu=r.options.x??0,wv=yu+(r.options.width??1),e>=yu&&e<wv&&(!i||(r.options.layer??"bottom")===i)&&s(r)})}},m8=class extends Ws{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new O),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new O),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Re.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Re.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},g8=1e3,_8=class{constructor(e,t=g8){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let r=s-this._lastRefreshMs,n=this._debounceThresholdMS-r;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},n)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},Sv=20,vc=class extends le{constructor(e,t,i,s){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let r=this._coreBrowserService.mainDocument;this._accessibilityContainer=r.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=r.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let n=0;n<this._terminal.rows;n++)this._rowElements[n]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[n]);if(this._topBoundaryFocusListener=n=>this._handleBoundaryFocus(n,0),this._bottomBoundaryFocusListener=n=>this._handleBoundaryFocus(n,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=r.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new _8(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(n=>this._handleResize(n.rows))),this._register(this._terminal.onRender(n=>this._refreshRows(n.start,n.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(n=>this._handleChar(n))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(n=>this._handleTab(n))),this._register(this._terminal.onKey(n=>this._handleKey(n.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(ie(r,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Me(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<Sv+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===Sv+1&&(this._liveRegion.textContent+=$d.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let i=this._terminal.buffer,s=i.lines.length.toString();for(let r=e;r<=t;r++){let n=i.lines.get(i.ydisp+r),o=[],a=(n==null?void 0:n.translateToString(!0,void 0,void 0,o))||"",l=(i.ydisp+r+1).toString(),c=this._rowElements[r];c&&(a.length===0?(c.textContent="",this._rowColumns.set(c,[0,1])):(c.textContent=a,this._rowColumns.set(c,o)),c.setAttribute("aria-posinset",l),c.setAttribute("aria-setsize",s),this._alignRowWidth(c))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let i=e.target,s=this._rowElements[t===0?1:this._rowElements.length-2],r=i.getAttribute("aria-posinset"),n=t===0?"1":`${this._terminal.buffer.lines.length}`;if(r===n||e.relatedTarget!==s)return;let o,a;if(t===0?(o=i,a=this._rowElements.pop(),this._rowContainer.removeChild(a)):(o=this._rowElements.shift(),a=i,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),a.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let l=this._createAccessibilityTreeNode();this._rowElements.unshift(l),this._rowContainer.insertAdjacentElement("afterbegin",l)}else{let l=this._createAccessibilityTreeNode();this._rowElements.push(l),this._rowContainer.appendChild(l)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var a;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let s=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:s,offset:((a=s.textContent)==null?void 0:a.length)??0}),!this._rowContainer.contains(i.node))return;let r=({node:l,offset:c})=>{let d=l instanceof Text?l.parentNode:l,f=parseInt(d==null?void 0:d.getAttribute("aria-posinset"),10)-1;if(isNaN(f))return console.warn("row is invalid. Race condition?"),null;let p=this._rowColumns.get(d);if(!p)return console.warn("columns is null. Race condition?"),null;let m=c<p.length?p[c]:p.slice(-1)[0]+1;return m>=this._terminal.cols&&(++f,m=0),{row:f,column:m}},n=r(t),o=r(i);if(!(!n||!o)){if(n.row>o.row||n.row===o.row&&n.column>=o.column)throw new Error("invalid range");this._terminal.select(n.column,n.row,(o.row-n.row)*this._terminal.cols-n.column+o.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var r,n;e.style.transform="";let t=e.getBoundingClientRect().width,i=(n=(r=this._rowColumns.get(e))==null?void 0:r.slice(-1))==null?void 0:n[0];if(!i)return;let s=i*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${s/t})`}};vc=Ve([K(1,Yp),K(2,gs),K(3,_s)],vc);var wf=class extends le{constructor(e,t,i,s,r){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new O),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new O),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Me(()=>{var n;Cr(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(n=this._activeProviderReplies)==null||n.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(ie(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(ie(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(ie(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(ie(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let i=e.composedPath();for(let s=0;s<i.length;s++){let r=i[s];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var s,r;(!this._activeProviderReplies||!t)&&((s=this._activeProviderReplies)==null||s.forEach(n=>{n==null||n.forEach(o=>{o.link.dispose&&o.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(let[n,o]of this._linkProviderService.linkProviders.entries())t?(r=this._activeProviderReplies)!=null&&r.get(n)&&(i=this._checkLinkProviderResult(n,e,i)):o.provideLinks(e.y,a=>{var c,d;if(this._isMouseOut)return;let l=a==null?void 0:a.map(f=>({link:f}));(c=this._activeProviderReplies)==null||c.set(n,l),i=this._checkLinkProviderResult(n,e,i),((d=this._activeProviderReplies)==null?void 0:d.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let i=new Set;for(let s=0;s<t.size;s++){let r=t.get(s);if(r)for(let n=0;n<r.length;n++){let o=r[n],a=o.link.range.start.y<e?0:o.link.range.start.x,l=o.link.range.end.y>e?this._bufferService.cols:o.link.range.end.x;for(let c=a;c<=l;c++){if(i.has(c)){r.splice(n--,1);break}i.add(c)}}}}_checkLinkProviderResult(e,t,i){var n;if(!this._activeProviderReplies)return i;let s=this._activeProviderReplies.get(e),r=!1;for(let o=0;o<e;o++)(!this._activeProviderReplies.has(o)||this._activeProviderReplies.get(o))&&(r=!0);if(!r&&s){let o=s.find(a=>this._linkAtPosition(a.link,t));o&&(i=!0,this._handleNewLink(o))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let o=0;o<this._activeProviderReplies.size;o++){let a=(n=this._activeProviderReplies.get(o))==null?void 0:n.find(l=>this._linkAtPosition(l.link,t));if(a){i=!0,this._handleNewLink(a);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&v8(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Cr(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var i,s;return(s=(i=this._currentLink)==null?void 0:i.state)==null?void 0:s.decorations.pointerCursor},set:i=>{var s;(s=this._currentLink)!=null&&s.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",i))}},underline:{get:()=>{var i,s;return(s=(i=this._currentLink)==null?void 0:i.state)==null?void 0:s.decorations.underline},set:i=>{var s,r,n;(s=this._currentLink)!=null&&s.state&&((n=(r=this._currentLink)==null?void 0:r.state)==null?void 0:n.decorations.underline)!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,i))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;let s=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,r=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=r&&(this._clearCurrentLink(s,r),this._lastMouseEvent)){let n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._askForLink(n,!1)}})))}_linkHover(e,t,i){var s;(s=this._currentLink)!=null&&s.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){let i=e.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(e,t,i){var s;(s=this._currentLink)!=null&&s.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){let i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,r=t.y*this._bufferService.cols+t.x;return i<=r&&r<=s}_positionFromMouseEvent(e,t,i){let s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,r){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:r}}};wf=Ve([K(1,Gp),K(2,_s),K(3,Ot),K(4,qw)],wf);function v8(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var y8=class extends h8{constructor(e={}){super(e),this._linkifier=this._register(new Tn),this.browser=dS,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Tn),this._onCursorMove=this._register(new O),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new O),this.onKey=this._onKey.event,this._onRender=this._register(new O),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new O),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new O),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new O),this.onBell=this._onBell.event,this._onFocus=this._register(new O),this._onBlur=this._register(new O),this._onA11yCharEmitter=this._register(new O),this._onA11yTabEmitter=this._register(new O),this._onWillOpen=this._register(new O),this._setup(),this._decorationService=this._instantiationService.createInstance(p8),this._instantiationService.setService(wa,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(lP),this._instantiationService.setService(qw,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Fd)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh((t==null?void 0:t.start)??0,(t==null?void 0:t.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(xt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(xt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(xt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(xt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(Me(()=>{var t,i;this._customKeyEventHandler=void 0,(i=(t=this.element)==null?void 0:t.parentNode)==null||i.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let i,s="";switch(t.index){case 256:i="foreground",s="10";break;case 257:i="background",s="11";break;case 258:i="cursor",s="12";break;default:i="ansi",s="4;"+t.index}switch(t.type){case 0:let r=Ee.toColorRGB(i==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[i]);this.coreService.triggerDataEvent(`${j.ESC}]${s};${r8(r)}${hS.ST}`);break;case 1:if(i==="ansi")this._themeService.modifyColors(n=>n.ansi[t.index]=Ze.toColor(...t.color));else{let n=i;this._themeService.modifyColors(o=>o[n]=Ze.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(vc,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(j.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(ie(this.element,"copy",t=>{this.hasSelection()&&bT(t,this._selectionService)}));let e=t=>CT(t,this.textarea,this.coreService,this.optionsService);this._register(ie(this.textarea,"paste",e)),this._register(ie(this.element,"paste",e)),fS?this._register(ie(this.element,"mousedown",t=>{t.button===2&&D0(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(ie(this.element,"contextmenu",t=>{D0(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),sm&&this._register(ie(this.element,"auxclick",t=>{t.button===1&&Iw(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(ie(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(ie(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(ie(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(ie(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(ie(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(ie(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(ie(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var r;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((r=this.element)==null?void 0:r.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(ie(this.screenElement,"mousemove",n=>this.updateCursorStyle(n))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let i=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Id.get()),gS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>i.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(oP,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(gs,this._coreBrowserService),this._register(ie(this.textarea,"focus",n=>this._handleTextAreaFocus(n))),this._register(ie(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(cf,this._document,this._helperContainer),this._instantiationService.setService(zc,this._charSizeService),this._themeService=this._instantiationService.createInstance(ff),this._instantiationService.setService(An,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(mc),this._instantiationService.setService(Kw,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(uf,this.rows,this.screenElement)),this._instantiationService.setService(_s,this._renderService),this._register(this._renderService.onRenderedViewportChange(n=>this._onRender.fire(n))),this.onResize(n=>this._renderService.resize(n.cols,n.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(of,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(hf),this._instantiationService.setService(Gp,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(wf,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(rf,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(n=>{super.scrollLines(n,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(df,this.element,this.screenElement,s)),this._instantiationService.setService(DT,this._selectionService),this._register(this._selectionService.onRequestScrollLines(n=>this.scrollLines(n.amount,n.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(n=>this._renderService.handleSelectionChanged(n.start,n.end,n.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(n=>{this.textarea.value=n,this.textarea.focus(),this.textarea.select()})),this._register(xt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var n;this._selectionService.refresh(),(n=this._viewport)==null||n.queueSync()})),this._register(this._instantiationService.createInstance(nf,this.screenElement)),this._register(ie(this.element,"mousedown",n=>this._selectionService.handleMouseDown(n))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(vc,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",n=>this._handleScreenReaderModeOptionChange(n))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(pc,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",n=>{!this._overviewRulerRenderer&&n&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(pc,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(lf,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function i(n){var c,d,f,p,m;let o=e._mouseService.getMouseReportCoords(n,e.screenElement);if(!o)return!1;let a,l;switch(n.overrideType||n.type){case"mousemove":l=32,n.buttons===void 0?(a=3,n.button!==void 0&&(a=n.button<3?n.button:3)):a=n.buttons&1?0:n.buttons&4?1:n.buttons&2?2:3;break;case"mouseup":l=0,a=n.button<3?n.button:3;break;case"mousedown":l=1,a=n.button<3?n.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(n)===!1)return!1;let _=n.deltaY;if(_===0||e.coreMouseService.consumeWheelEvent(n,(p=(f=(d=(c=e._renderService)==null?void 0:c.dimensions)==null?void 0:d.device)==null?void 0:f.cell)==null?void 0:p.height,(m=e._coreBrowserService)==null?void 0:m.dpr)===0)return!1;l=_<0?0:1,a=4;break;default:return!1}return l===void 0||a===void 0||a>4?!1:e.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:a,action:l,ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},r={mouseup:n=>(i(n),n.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(n)),wheel:n=>(i(n),this.cancel(n,!0)),mousedrag:n=>{n.buttons&&i(n)},mousemove:n=>{n.buttons||i(n)}};this._register(this.coreMouseService.onProtocolChange(n=>{n?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(n)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),n&8?s.mousemove||(t.addEventListener("mousemove",r.mousemove),s.mousemove=r.mousemove):(t.removeEventListener("mousemove",s.mousemove),s.mousemove=null),n&16?s.wheel||(t.addEventListener("wheel",r.wheel,{passive:!1}),s.wheel=r.wheel):(t.removeEventListener("wheel",s.wheel),s.wheel=null),n&2?s.mouseup||(s.mouseup=r.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),n&4?s.mousedrag||(s.mousedrag=r.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(ie(t,"mousedown",n=>{if(n.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(n)))return i(n),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(n)})),this._register(ie(t,"wheel",n=>{var o,a,l,c,d;if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(n)===!1)return!1;if(!this.buffer.hasScrollback){if(n.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(n,(c=(l=(a=(o=e._renderService)==null?void 0:o.dimensions)==null?void 0:a.device)==null?void 0:l.cell)==null?void 0:c.height,(d=e._coreBrowserService)==null?void 0:d.dpr)===0)return this.cancel(n,!0);let f=j.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(n.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(f,!0),this.cancel(n,!0)}}},{passive:!1}))}refresh(e,t){var i;(i=this._renderService)==null||i.refreshRows(e,t)}updateCursorStyle(e){var t;(t=this._selectionService)!=null&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){Ow(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,t){var i;(i=this._selectionService)==null||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let i=d8(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),i.type===3||i.type===2){let s=this.rows-1;return this.scrollLines(i.type===2?-s:s),this.cancel(e,!0)}if(i.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((i.key===j.ETX||i.key===j.CR)&&(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(x8(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){var i;(i=this._charSizeService)==null||i.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(Ge));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var t;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(t=this._selectionService)==null||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(j.ESC+"[I"):this.coreService.triggerDataEvent(j.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),i=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${j.ESC}[4;${i};${t}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${j.ESC}[6;${r};${s}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function x8(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var w8=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},S8=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new _i)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}},bv=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new S8(t)}getNullCell(){return new _i}},b8=class extends le{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new O),this.onBufferChange=this._onBufferChange.event,this._normal=new bv(this._core.buffers.normal,"normal"),this._alternate=new bv(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},C8=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,i=>t(i.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(i,s)=>t(i,s.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},k8=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},E8=["cols","rows"],Fi=0,N8=class extends le{constructor(e){super(),this._core=this._register(new y8(e)),this._addonManager=this._register(new w8),this._publicOptions={...this._core.options};let t=s=>this._core.options[s],i=(s,r)=>{this._checkReadonlyOptions(s),this._core.options[s]=r};for(let s in this._core.options){let r={get:t.bind(this,s),set:i.bind(this,s)};Object.defineProperty(this._publicOptions,s,r)}}_checkReadonlyOptions(e){if(E8.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new C8(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new k8(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new b8(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Id.get()},set promptLabel(e){Id.set(e)},get tooMuchOutput(){return $d.get()},set tooMuchOutput(e){$d.set(e)}}}_verifyIntegers(...e){for(Fi of e)if(Fi===1/0||isNaN(Fi)||Fi%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Fi of e)if(Fi&&(Fi===1/0||isNaN(Fi)||Fi%1!==0||Fi<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var T8=2,P8=1,M8=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){var f;if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:((f=this._terminal.options.overviewRuler)==null?void 0:f.width)||14,i=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(i.getPropertyValue("height")),r=Math.max(0,parseInt(i.getPropertyValue("width"))),n=window.getComputedStyle(this._terminal.element),o={top:parseInt(n.getPropertyValue("padding-top")),bottom:parseInt(n.getPropertyValue("padding-bottom")),right:parseInt(n.getPropertyValue("padding-right")),left:parseInt(n.getPropertyValue("padding-left"))},a=o.top+o.bottom,l=o.right+o.left,c=s-a,d=r-l-t;return{cols:Math.max(T8,Math.floor(d/e.css.cell.width)),rows:Math.max(P8,Math.floor(c/e.css.cell.height))}}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var j8=class{constructor(e,t,i,s={}){this._terminal=e,this._regex=t,this._handler=i,this._options=s}provideLinks(e,t){let i=L8.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(i))}_addCallbacks(e){return e.map(t=>(t.leave=this._options.leave,t.hover=(i,s)=>{if(this._options.hover){let{range:r}=t;this._options.hover(i,s,r)}},t))}};function D8(e){try{let t=new URL(e),i=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())}catch{return!1}}var L8=class Dl{static computeLink(t,i,s,r){let n=new RegExp(i.source,(i.flags||"")+"g"),[o,a]=Dl._getWindowedLineStrings(t-1,s),l=o.join(""),c,d=[];for(;c=n.exec(l);){let f=c[0];if(!D8(f))continue;let[p,m]=Dl._mapStrIdx(s,a,0,c.index),[_,v]=Dl._mapStrIdx(s,p,m,f.length);if(p===-1||m===-1||_===-1||v===-1)continue;let b={start:{x:m+1,y:p+1},end:{x:v,y:_+1}};d.push({range:b,text:f,activate:r})}return d}static _getWindowedLineStrings(t,i){let s,r=t,n=t,o=0,a="",l=[];if(s=i.buffer.active.getLine(t)){let c=s.translateToString(!0);if(s.isWrapped&&c[0]!==" "){for(o=0;(s=i.buffer.active.getLine(--r))&&o<2048&&(a=s.translateToString(!0),o+=a.length,l.push(a),!(!s.isWrapped||a.indexOf(" ")!==-1)););l.reverse()}for(l.push(c),o=0;(s=i.buffer.active.getLine(++n))&&s.isWrapped&&o<2048&&(a=s.translateToString(!0),o+=a.length,l.push(a),a.indexOf(" ")===-1););}return[l,r]}static _mapStrIdx(t,i,s,r){let n=t.buffer.active,o=n.getNullCell(),a=s;for(;r;){let l=n.getLine(i);if(!l)return[-1,-1];for(let c=a;c<l.length;++c){l.getCell(c,o);let d=o.getChars();if(o.getWidth()&&(r-=d.length||1,c===l.length-1&&d==="")){let f=n.getLine(i+1);f&&f.isWrapped&&(f.getCell(0,o),o.getWidth()===2&&(r+=1))}if(r<0)return[i,c]}i++,a=0}return[i,a]}},R8=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function A8(e,t){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var B8=class{constructor(e=A8,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,i=t.urlRegex||R8;this._linkProvider=this._terminal.registerLinkProvider(new j8(this._terminal,i,this._handler,t))}dispose(){var e;(e=this._linkProvider)==null||e.dispose()}};const O8=({thoughts:e})=>{const[t,i]=S.useState(!1);return h.jsxs(oa.div,{initial:!1,animate:{width:t?320:36},className:"flex flex-col h-full bg-[#1e1e1e] border-l border-white/5 shrink-0 overflow-hidden relative shadow-2xl",children:[h.jsx("button",{onClick:()=>i(!t),className:"absolute left-0 top-1/2 -translate-y-1/2 w-8 h-24 bg-primary/20 hover:bg-primary/40 border-y border-r border-white/10 rounded-r-md flex items-center justify-center transition-colors z-20 group",title:t?" ":"AI  ",children:t?h.jsx(qp,{className:"w-4 h-4 text-primary"}):h.jsx(Mw,{className:"w-4 h-4 text-primary group-hover:scale-125 transition-transform"})}),h.jsx("div",{className:`shrink-0 border-b border-white/5 bg-white/2 ${!t&&"justify-center px-0"}`,children:h.jsxs("div",{className:`flex items-center gap-2 px-4 py-2.5 ${!t&&"justify-center px-0"}`,children:[h.jsx(un,{className:`w-4 h-4 text-primary shrink-0 ${!t&&"animate-pulse"}`}),t&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-xs font-bold text-white/80 flex-1 truncate",children:" "}),h.jsx("span",{className:"text-[10px] bg-primary/20 text-primary px-1.5 py-0.5 rounded-full font-mono",children:"v5.0"})]})]})}),h.jsx("div",{className:`flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide ${!t&&"opacity-0 pointer-events-none"}`,children:h.jsx(V4,{initial:!1,children:e.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-full opacity-20 text-center pt-16",children:[h.jsx(un,{className:"w-12 h-12 mb-2"}),h.jsx("p",{className:"text-[10px]",children:" ..."})]}):e.map((s,r)=>h.jsxs(oa.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"relative pl-6 pb-2 border-l border-white/10 last:border-0",children:[h.jsx("div",{className:"absolute left-[-5px] top-1 w-2.5 h-2.5 rounded-full bg-primary/40 border border-primary flex items-center justify-center",children:h.jsx("div",{className:"w-1 h-1 rounded-full bg-primary"})}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-[9px] font-mono text-primary/60",children:s.agent}),h.jsx("span",{className:"text-[8px] text-white/30",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),h.jsxs("div",{className:"bg-white/5 rounded p-2 border border-white/5 hover:bg-white/8 transition-colors",children:[s.tool&&h.jsxs("div",{className:"flex items-center gap-1.5 mb-1 opacity-80",children:[h.jsx(Ui,{className:"w-3 h-3 text-yellow-500"}),h.jsx("span",{className:"text-[10px] font-bold text-yellow-500/80 uppercase",children:s.tool})]}),h.jsx("p",{className:"text-[11px] leading-relaxed text-white/80 whitespace-pre-wrap",children:s.thought})]})]})]},r+s.timestamp))})}),t&&h.jsx("div",{className:"px-4 py-2 bg-black/20 border-t border-white/5 shrink-0",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse bg-success"}),h.jsx("span",{className:"text-[9px] text-white/40",children:"   "})]})})]})},F=`http://${window.location.hostname}:${window.location.port}`,I8=parseInt(window.location.port)+1,xu=[{label:" ",cmd:"gemini --skill master"},{label:"  ",cmd:"/clear"},{label:" ",cmd:'git add . && git commit -m "update"'},{label:" ",cmd:"git push"},{label:" ",cmd:'gemini "    "'}],Cv=[{cmd:"/",desc:"         ",category:"",injectSkill:"master"},{cmd:"/",desc:"     ",category:"",injectSkill:"brainstorm"},{cmd:"/",desc:"      ",category:"",injectSkill:"write-plan"},{cmd:"/",desc:"     ",category:"",injectSkill:"execute-plan"},{cmd:"/TDD",desc:"REDGREENREFACTOR    ",category:"",injectSkill:"tdd"},{cmd:"/",desc:"4     ",category:"",injectSkill:"debug"},{cmd:"/",desc:"OWASP  +      ",category:"",injectSkill:"code-review"}],kv={claude:[...Cv,{cmd:"/model",desc:"  (opus / sonnet / haiku)",category:""},{cmd:"/clear",desc:"  ",category:""},{cmd:"/compact",desc:"    ",category:""},{cmd:"/memory",desc:"(CLAUDE.md)  ",category:""},{cmd:"/vim",desc:"Vim    ",category:""},{cmd:"/help",desc:"  ",category:""},{cmd:"/doctor",desc:"  ",category:""},{cmd:"/status",desc:"    ",category:""},{cmd:"/bug",desc:"  Anthropic ",category:""},{cmd:"/review",desc:"   ",category:""},{cmd:"/commit",desc:"Git    ",category:""},{cmd:"/init",desc:"CLAUDE.md   ",category:""},{cmd:"/pr_comments",desc:"GitHub PR  ",category:""},{cmd:"/terminal",desc:"   ",category:""}],gemini:[...Cv,{cmd:"/help",desc:"  ",category:""},{cmd:"/clear",desc:" ",category:""},{cmd:"/chat",desc:"   ",category:""},{cmd:"/tools",desc:"    ",category:""}]},Vc=e=>{var i;switch((i=e.split(".").pop())==null?void 0:i.toLowerCase()){case"py":return h.jsx(dT,{className:"w-4 h-4 text-[#3776ab] shrink-0"});case"js":case"jsx":case"mjs":case"cjs":return h.jsx(hT,{className:"w-4 h-4 text-[#F7DF1E] shrink-0"});case"ts":case"tsx":return h.jsx(fT,{className:"w-4 h-4 text-[#3178C6] shrink-0"});case"json":return h.jsx(vT,{className:"w-4 h-4 text-[#cbcb41] shrink-0"});case"md":return h.jsx(uT,{className:"w-4 h-4 text-[#083fa1] shrink-0"});case"html":case"htm":return h.jsx(cT,{className:"w-4 h-4 text-[#E34F26] shrink-0"});case"css":case"scss":case"less":return h.jsx(aT,{className:"w-4 h-4 text-[#1572B6] shrink-0"});case"png":case"jpg":case"jpeg":case"gif":case"svg":case"ico":return h.jsx(gT,{className:"w-4 h-4 text-[#a074c4] shrink-0"});case"zip":case"tar":case"gz":case"rar":case"7z":return h.jsx(mT,{className:"w-4 h-4 text-[#d19a66] shrink-0"});case"bat":case"cmd":case"exe":return h.jsx(pT,{className:"w-4 h-4 text-[#0078D4] shrink-0"});case"gitignore":return h.jsx(lT,{className:"w-4 h-4 text-[#F05032] shrink-0"});default:return h.jsx(_T,{className:"w-4 h-4 text-[#cccccc] shrink-0"})}};let Oo=0;window.addEventListener("vibe:activeSlot",e=>{Oo=e.detail.slotId});const ES=[{name:"master",desc:"          ",claudeCmd:"/vibe-master",geminiCmd:"/master",algo:" [   ] .gemini/skills/master/SKILL.md  PROJECT_MAP.md   .   ?"},{name:"brainstorm",desc:"  ",claudeCmd:"/vibe-brainstorm",geminiCmd:"/brainstorming",algo:" [ 6  ] .gemini/skills/brainstorming/SKILL.md       .    ?"},{name:"write-plan",desc:"   ",claudeCmd:"/vibe-write-plan",geminiCmd:"/write-plan",algo:" [   ] .gemini/skills/write-plan/SKILL.md  TDD    .    ?"},{name:"execute-plan",desc:"  ",claudeCmd:"/vibe-execute-plan",geminiCmd:"/execute-plan",algo:" [  ] .gemini/skills/execute-plan/SKILL.md     .    ?"},{name:"tdd",desc:"RED  GREEN  REFACTOR ",claudeCmd:"/vibe-tdd",geminiCmd:"/tdd",algo:" [TDD  ] .gemini/skills/tdd/SKILL.md     RED-GREEN-REFACTOR  .   ?"},{name:"debug",desc:"4  ",claudeCmd:"/vibe-debug",geminiCmd:"/systematic-debugging",algo:" [  ] .gemini/skills/systematic-debugging/SKILL.md      .   ?"},{name:"code-review",desc:"OWASP  +   ",claudeCmd:"/vibe-code-review",geminiCmd:"/code-review",algo:" [  ] .gemini/skills/code-review/SKILL.md  / .  ?"}];function $8(){var Hm,Vm,Wm,Um,Km,qm,Ym,Gm,Xm;const[e,t]=S.useState(!0),[i,s]=S.useState(!0),[r,n]=S.useState(300),[o,a]=S.useState(!1),[l,c]=S.useState("explorer"),[d,f]=S.useState("2"),m={1:1,2:2,3:3,4:4,"2x2":4,6:6,8:8}[d]??2,[_,v]=S.useState([]),[b,g]=S.useState(null),[y,x]=S.useState({}),[C,k]=S.useState(null);S.useEffect(()=>{const u=()=>{fetch(`${F}/api/locks`).then(N=>N.json()).then(N=>x(N)).catch(()=>{})};u();const w=setInterval(u,3e3);return()=>clearInterval(w)},[]);const[T,L]=S.useState([]),[P,q]=S.useState(0),[H,ee]=S.useState("claude"),[R,M]=S.useState(null),[z,I]=S.useState(null),[V,W]=S.useState(""),[E,B]=S.useState("all"),[U,Q]=S.useState("info"),[oe,je]=S.useState(""),xe=S.useRef(!1),Ye=l==="messages"?0:Math.max(0,T.length-P);S.useEffect(()=>{l==="messages"&&q(T.length)},[l,T.length]),S.useEffect(()=>{const u=()=>{fetch(`${F}/api/messages`).then(N=>N.json()).then(N=>L(Array.isArray(N)?N:[])).catch(()=>{})};u();const w=setInterval(u,3e3);return()=>clearInterval(w)},[]);const[_e,De]=S.useState([]),[ri,qt]=S.useState("all"),[vs,Yt]=S.useState(!1),[pt,fe]=S.useState(""),[ys,Js]=S.useState(""),[we,Bi]=S.useState("all"),[xi,Ca]=S.useState("medium"),Pr=_e.filter(u=>u.status!=="done").length;S.useEffect(()=>{const u=()=>{fetch(`${F}/api/tasks`).then(N=>N.json()).then(N=>De(Array.isArray(N)?N:[])).catch(()=>{})};u();const w=setInterval(u,4e3);return()=>clearInterval(w)},[]);const Mr=()=>{pt.trim()&&fetch(`${F}/api/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:pt,description:ys,assigned_to:we,priority:xi,created_by:"user"})}).then(u=>u.json()).then(()=>(fe(""),Js(""),Yt(!1),fetch(`${F}/api/tasks`))).then(u=>u.json()).then(u=>De(Array.isArray(u)?u:[])).catch(()=>{})},wi=(u,w)=>{fetch(`${F}/api/tasks/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:u,...w})}).then(N=>N.json()).then(()=>fetch(`${F}/api/tasks`)).then(N=>N.json()).then(N=>De(Array.isArray(N)?N:[])).catch(()=>{})},xs=u=>{fetch(`${F}/api/tasks/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:u})}).then(w=>w.json()).then(()=>fetch(`${F}/api/tasks`)).then(w=>w.json()).then(w=>De(Array.isArray(w)?w:[])).catch(()=>{})},[Si,Wc]=S.useState([]),[nt,jr]=S.useState(""),[ka,D]=S.useState(!1),[Z,X]=S.useState(null),[ne,J]=S.useState(""),[he,re]=S.useState(""),[mt,me]=S.useState(""),[Te,Pt]=S.useState(""),[Dr,Lr]=S.useState("claude"),[ot,On]=S.useState(!1),[Uc,Kc]=S.useState(""),[qc,We]=S.useState(""),[ni,Rr]=S.useState("");S.useEffect(()=>{fetch(`${F}/api/project-info`).then(u=>u.json()).then(u=>{Kc(u.project_name||"");const w=(u.project_root||"").replace(/\\/g,"/");We(w),!localStorage.getItem("hive_last_path")&&w&&(zr(w),Ea(w)),u.version&&Rr(u.version)}).catch(()=>{}).finally(()=>t(!1))},[]);const Oi=(u="",w=ot)=>{const N=new URLSearchParams;u&&N.set("q",u),w&&N.set("all","true");const $=`${F}/api/memory${N.toString()?"?"+N.toString():""}`;fetch($).then(te=>te.json()).then(te=>Wc(Array.isArray(te)?te:[])).catch(()=>{})};S.useEffect(()=>{Oi(nt,ot);const u=setInterval(()=>Oi(nt,ot),5e3);return()=>clearInterval(u)},[nt,ot]),S.useEffect(()=>{Oi(nt,ot)},[nt,ot]);const PS=()=>{!ne.trim()||!mt.trim()||fetch(`${F}/api/memory/set`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:ne.trim(),title:he.trim()||ne.trim(),content:mt.trim(),tags:Te.split(",").map(u=>u.trim()).filter(Boolean),author:Dr})}).then(()=>{J(""),re(""),me(""),Pt(""),D(!1),X(null),Oi(nt)}).catch(()=>{})},MS=u=>{fetch(`${F}/api/memory/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:u})}).then(()=>Oi(nt)).catch(()=>{})},jS=u=>{J(u.key),re(u.title),me(u.content),Pt(u.tags.join(", ")),Lr(u.author),X(u.key),D(!0)},DS=u=>{confirm(`[] '${u}'       ?`)&&fetch(`${F}/api/git/rollback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:u,path:Ar})}).then(w=>w.json()).then(w=>{w.status==="success"?Gt():alert(` : ${w.message}`)}).catch(w=>alert(` : ${w}`))},[ue,LS]=S.useState(null),[rm,RS]=S.useState([]),[Ar,Ea]=S.useState(localStorage.getItem("hive_last_path")||"");S.useEffect(()=>{const u=()=>{const N=encodeURIComponent(Ar);fetch(`${F}/api/git/status?path=${N}`).then($=>$.json()).then($=>LS($)).catch(()=>{}),fetch(`${F}/api/git/log?path=${N}&n=15`).then($=>$.json()).then($=>RS(Array.isArray($)?$:[])).catch(()=>{})};u();const w=setInterval(u,5e3);return()=>clearInterval(w)},[Ar]);const Yc=((Hm=ue==null?void 0:ue.conflicts)==null?void 0:Hm.length)??0,[Ue,nm]=S.useState(null),[om,am]=S.useState(!1),[lm,AS]=S.useState(null);S.useEffect(()=>{const u=()=>{fetch(`${F}/api/orchestrator/status`).then(N=>N.json()).then(N=>nm(N)).catch(()=>{})};u();const w=setInterval(u,1e4);return()=>clearInterval(w)},[]);const BS=()=>{am(!0),fetch(`${F}/api/orchestrator/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:"{}"}).then(u=>u.json()).then(()=>(AS(new Date().toLocaleTimeString()),fetch(`${F}/api/orchestrator/status`))).then(u=>u.json()).then(u=>nm(u)).catch(()=>{}).finally(()=>am(!1))},Gc=((Vm=Ue==null?void 0:Ue.warnings)==null?void 0:Vm.length)??0,[Se,OS]=S.useState(null),[IS,Na]=S.useState({}),[Xc,oi]=S.useState(""),[ai,$S]=S.useState(null),[In,zS]=S.useState([]),[$n,FS]=S.useState(""),[HS,VS]=S.useState([]),[cm,WS]=S.useState([]),zn=()=>{fetch(`${F}/api/hive/health`).then(u=>u.json()).then(u=>$S(u)).catch(()=>{})},Zc=()=>{fetch(`${F}/api/hive/skill-analysis`).then(u=>u.json()).then(u=>WS(u.proposals||[])).catch(()=>{})},US=u=>{fetch(`${F}/api/hive/approve-skill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skill_name:u.suggested_skill_name,keyword:u.keyword})}).then(w=>w.json()).then(w=>{w.status==="success"&&(oi(`  [${u.suggested_skill_name}]() .`),Zc(),zn())})},Br=()=>{fetch(`${F}/api/superpowers/status`).then(u=>u.json()).then(u=>OS(u)).catch(()=>{})},hm=()=>{fetch(`${F}/api/hive/logs`).then(u=>u.json()).then(u=>zS(Array.isArray(u)?u:[])).catch(()=>{})};S.useEffect(()=>{Br(),zn(),Zc(),hm();const u=setInterval(hm,5e3);return()=>clearInterval(u)},[]);const KS=u=>{Na(w=>({...w,[u]:!0})),oi(""),fetch(`${F}/api/superpowers/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:u})}).then(w=>w.json()).then(w=>{oi(w.message||""),Br()}).catch(w=>oi(String(w))).finally(()=>Na(w=>({...w,[u]:!1})))},qS=u=>{Na(w=>({...w,[u]:!0})),oi(""),fetch(`${F}/api/superpowers/uninstall`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:u})}).then(w=>w.json()).then(w=>{oi(w.message||""),Br()}).catch(w=>oi(String(w))).finally(()=>Na(w=>({...w,[u]:!1})))},[um,YS]=S.useState([]),[Fn,GS]=S.useState([]),[Or,XS]=S.useState("claude"),[Ir,ZS]=S.useState("global"),[dm,$r]=S.useState({}),[Jc,Qc]=S.useState(""),[JS,Ta]=S.useState(!1),[eh,fm]=S.useState("catalog"),[Pa,QS]=S.useState(""),[pm,mm]=S.useState([]),[Hn,gm]=S.useState(!1),[Vn,eb]=S.useState(1),[tb,ib]=S.useState(0),[th,sb]=S.useState(0),[ih,sh]=S.useState(""),[Wn,_m]=S.useState(!1),[rb,vm]=S.useState(""),[Un,rh]=S.useState(""),[ym,xm]=S.useState(!1),[nb,nh]=S.useState(!1);S.useEffect(()=>{fetch(`${F}/api/mcp/catalog`).then(u=>u.json()).then(u=>YS(Array.isArray(u)?u:[])).catch(()=>{}),fetch(`${F}/api/mcp/apikey`).then(u=>u.json()).then(u=>{_m(u.has_key??!1),vm(u.masked??"")}).catch(()=>{})},[]);const wm=()=>{Un.trim()&&(xm(!0),fetch(`${F}/api/mcp/apikey`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:Un.trim()})}).then(u=>u.json()).then(u=>{u.status==="success"&&(_m(!0),vm(Un.slice(0,6)+""),rh(""),nh(!1))}).catch(()=>{}).finally(()=>xm(!1)))},Ma=(u=1)=>{Pa.trim()&&(gm(!0),sh(""),fetch(`${F}/api/mcp/search?q=${encodeURIComponent(Pa)}&page=${u}&pageSize=10`).then(w=>w.json()).then(w=>{var N,$,te;w.error?(sh(w.message??w.error),mm([])):(mm(w.servers??[]),eb(((N=w.pagination)==null?void 0:N.currentPage)??u),ib((($=w.pagination)==null?void 0:$.totalCount)??0),sb(((te=w.pagination)==null?void 0:te.totalPages)??0))}).catch(()=>sh(" ")).finally(()=>gm(!1)))},ob=u=>{const w=u.qualifiedName.split("/").pop()??u.qualifiedName;$r(N=>({...N,[u.qualifiedName]:!0})),fetch(`${F}/api/mcp/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:Or,scope:Ir,name:w,package:u.qualifiedName,requiresEnv:[]})}).then(N=>N.json()).then(N=>{Qc(N.message??""),N.status==="success"&&(Ta(!0),Kn())}).catch(()=>{}).finally(()=>$r(N=>({...N,[u.qualifiedName]:!1})))},Kn=()=>{fetch(`${F}/api/mcp/installed?tool=${Or}&scope=${Ir}`).then(u=>u.json()).then(u=>GS(u.installed??[])).catch(()=>{})};S.useEffect(()=>{Kn();const u=setInterval(Kn,5e3);return()=>clearInterval(u)},[Or,Ir]);const ab=u=>{$r(w=>({...w,[u.name]:!0})),fetch(`${F}/api/mcp/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:Or,scope:Ir,name:u.name,package:u.package,requiresEnv:u.requiresEnv??[]})}).then(w=>w.json()).then(w=>{Qc(w.message??""),w.status==="success"&&Ta(!0),Kn()}).catch(()=>{}).finally(()=>$r(w=>({...w,[u.name]:!1})))},Sm=u=>{$r(w=>({...w,[u]:!0})),fetch(`${F}/api/mcp/uninstall`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:Or,scope:Ir,name:u})}).then(w=>w.json()).then(w=>{Qc(w.message??""),w.status==="success"&&Ta(!0),Kn()}).catch(()=>{}).finally(()=>$r(w=>({...w,[u]:!1})))},bm=()=>{if(!oe.trim())return;const w=oe.trim().startsWith(">")?oe:oe.replace(/[\r\n]+$/,"");fetch(`${F}/api/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:H,to:E,type:U,content:w})}).then(N=>N.json()).then(()=>(je(""),fetch(`${F}/api/messages`))).then(N=>N.json()).then(N=>L(Array.isArray(N)?N:[])).catch(()=>{})},[oh,es]=S.useState([]),[ah,lh]=S.useState(100),ch=u=>{lh(w=>w+1),es(w=>w.map(N=>N.id===u?{...N,zIndex:ah+1}:N))},lb=u=>{es(w=>w.filter(N=>N.id!==u))},Cm=(u,w)=>{const N=oh.find(se=>se.path===`help:${u}`);if(N){ch(N.id);return}const $=Date.now().toString(),te=ah+1;lh(te),es(se=>[...se,{id:$,name:w,path:`help:${u}`,content:"Loading...",isLoading:!0,zIndex:te}]),fetch(`${F}/api/help?topic=${u}`).then(se=>se.json()).then(se=>{es($t=>$t.map(gt=>gt.id===$?{...gt,content:se.error?`Error: ${se.error}`:se.content,isLoading:!1}:gt))}).catch(se=>{es($t=>$t.map(gt=>gt.id===$?{...gt,content:`Failed to load: ${se}`,isLoading:!1}:gt))}),g(null)};S.useEffect(()=>{const u=()=>fetch(`${F}/api/heartbeat`).catch(()=>{});u();const w=setInterval(u,2e3);return()=>clearInterval(w)},[]);const[ge,ja]=S.useState(null),[km,Em]=S.useState(!1),[cb,hb]=S.useState([]),[ub,db]=S.useState([]);S.useEffect(()=>{const u=()=>{fetch(`${F}/api/context-usage`).then(N=>N.json()).then(N=>hb(N.sessions||[])).catch(()=>{}),fetch(`${F}/api/gemini-context-usage`).then(N=>N.json()).then(N=>db(N.sessions||[])).catch(()=>{})};u();const w=setInterval(u,3e4);return()=>clearInterval(w)},[]),S.useEffect(()=>{let u;const w=()=>{fetch(`${F}/api/check-update-ready`).then($=>$.json()).then($=>{if($!=null&&$.version||$!=null&&$.checking){const te={version:$.version,ready:!!$.ready,downloading:!!$.downloading,checking:!!$.checking};ja(se=>(se!=null&&se.downloading&&te.ready&&bi(` ${te.version}  !   []  .`,"ok",6e3),te))}else ja(null)}).catch(()=>{})};w();const N=()=>{const $=ge!=null&&ge.downloading||ge!=null&&ge.checking?5e3:3e4;u=setTimeout(()=>{w(),N()},$)};return N(),()=>clearTimeout(u)},[ge==null?void 0:ge.downloading,ge==null?void 0:ge.checking]);const[qn,Nm]=S.useState(null),bi=(u,w="info",N=3500)=>{Nm({msg:u,type:w}),setTimeout(()=>Nm(null),N)},[hh,Tm]=S.useState(!1),fb=()=>{hh||(Tm(!0),bi("  ...","info",8e3),fetch(`${F}/api/trigger-update-check`,{method:"POST"}).then(u=>u.json()).then(u=>{u.started?setTimeout(()=>{fetch(`${F}/api/check-update-ready`).then(w=>w.json()).then(w=>{!w.ready&&!w.downloading&&bi("  ","ok")})},1e4):bi("   ( )","warn")}).catch(()=>bi("  ","warn")).finally(()=>Tm(!1)))},pb=()=>{Em(!0),localStorage.setItem("hive_needs_skill_reinstall","true"),fetch(`${F}/api/apply-update`,{method:"POST"}).then(u=>u.json()).then(()=>ja(null)).catch(()=>{}).finally(()=>Em(!1))},[mb,Pm]=S.useState(()=>localStorage.getItem("hive_needs_skill_reinstall")==="true"),Mm=(u,w,N)=>{u.preventDefault(),M({x:u.clientX,y:u.clientY,type:"file",path:w,isDir:N})},gb=(u,w,N)=>{u.preventDefault(),M({x:u.clientX,y:u.clientY,type:"task",taskId:w,taskTitle:N})},Ii=()=>M(null),jm=(u,w)=>{const N=u.substring(0,u.lastIndexOf("/")),$=`${N}/${w}`;fetch(`${F}/api/file-rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:u,dest:$})}).then(te=>te.json()).then(te=>{te.status==="success"?(bi("  ","ok"),Gt(),Da[N]&&fetch(`${F}/api/files?path=${encodeURIComponent(N)}`).then(se=>se.json()).then(se=>{Array.isArray(se)&&La($t=>({...$t,[N]:se}))})):bi(`: ${te.message}`,"warn")}).finally(()=>{I(null),Ii()})},_b=(u,w)=>{confirm(`${w?"":""}()  ?
${u}`)&&fetch(`${F}/api/file-op`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({op:"delete",src:u})}).then(N=>N.json()).then(N=>{if(N.status==="success"){bi(" ","ok"),Gt();const $=u.substring(0,u.lastIndexOf("/"));Da[$]&&fetch(`${F}/api/files?path=${encodeURIComponent($)}`).then(te=>te.json()).then(te=>{Array.isArray(te)&&La(se=>({...se,[$]:te}))})}else bi(`: ${N.message}`,"warn")}).finally(()=>Ii())},vb=u=>{navigator.clipboard.writeText(u),bi(" ","ok"),Ii()},yb=u=>{fetch(`${F}/api/copy-path?path=${encodeURIComponent(u)}`).then(()=>bi("    ","info")).finally(()=>Ii())};S.useEffect(()=>{const u=()=>Ii();return window.addEventListener("click",u),()=>window.removeEventListener("click",u)},[]);const xb=()=>{Promise.all(["claude","gemini"].map(u=>fetch(`${F}/api/superpowers/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tool:u})}).then(w=>w.json()))).then(()=>{localStorage.removeItem("hive_needs_skill_reinstall"),Pm(!1),Br()}).catch(()=>{})},[Dm,wb]=S.useState([]),[Lm,Sb]=S.useState([]),[$e,zr]=S.useState(()=>localStorage.getItem("hive_last_path")||""),Rm=()=>{fetch(`${F}/api/projects`).then(u=>u.json()).then(u=>Sb(Array.isArray(u)?u:[])).catch(()=>{})},uh=()=>{fetch(`${F}/api/browse-folder`).then(u=>u.json()).then(u=>{u.path&&(zr(u.path),fetch(`${F}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:u.path})}).then(()=>Rm()))}).catch(u=>alert("  : "+u)),g(null)};S.useEffect(()=>{Rm()},[]);const[Am,bb]=S.useState([]),[Yn,Cb]=S.useState(!0),[Da,dh]=S.useState({}),[Bm,La]=S.useState({});S.useEffect(()=>{Ea($e)},[$e]),S.useEffect(()=>{dh({}),La({})},[$e]),S.useEffect(()=>{localStorage.setItem("hive_last_path",$e)},[$e]),S.useEffect(()=>{fetch(`${F}/api/drives`).then(u=>u.json()).then(u=>wb(u)).catch(()=>{})},[]);const Gt=()=>{$e&&fetch(`${F}/api/files?path=${encodeURIComponent($e)}`).then(u=>u.json()).then(u=>bb(u)).catch(()=>{})},Om=S.useRef(Gt);S.useEffect(()=>{Om.current=Gt}),S.useEffect(()=>{Gt()},[$e]);const kb=()=>{const u=prompt("   :");if(!u)return;const w=`${$e}/${u}`;fetch(`${F}/api/file-op`,{method:"POST",body:JSON.stringify({op:"create_file",path:w})}).then(()=>Gt())},Eb=()=>{const u=prompt("   :");if(!u)return;const w=`${$e}/${u}`;fetch(`${F}/api/file-op`,{method:"POST",body:JSON.stringify({op:"create_dir",path:w})}).then(()=>Gt())},Im=(u,w)=>{confirm(`'${w}'() ?`)&&fetch(`${F}/api/file-op`,{method:"POST",body:JSON.stringify({op:"delete",src:u})}).then(()=>{Gt(),es(N=>N.filter($=>$.path!==u))})},$m=u=>{Da[u]?dh(w=>({...w,[u]:!1})):(dh(w=>({...w,[u]:!0})),Bm[u]||fetch(`${F}/api/files?path=${encodeURIComponent(u)}`).then(w=>w.json()).then(w=>{Array.isArray(w)&&La(N=>({...N,[u]:w}))}).catch(()=>{}))},zm=u=>{if(k(u.path),u.isDir)Yn?$m(u.path):zr(u.path);else{const w=oh.find(se=>se.path===u.path);if(w){ch(w.id);return}const N=Date.now().toString(),$=ah+1;lh($);const te=/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)$/i.test(u.name);es(se=>[...se,{id:N,name:u.name,path:u.path,content:te?"":"Loading...",isLoading:!te,zIndex:$}]),te||fetch(`${F}/api/read-file?path=${encodeURIComponent(u.path)}`).then(se=>se.json()).then(se=>{es($t=>$t.map(gt=>gt.id===N?{...gt,content:se.error?`Error: ${se.error}`:se.content,isLoading:!1}:gt))}).catch(se=>{es($t=>$t.map(gt=>gt.id===N?{...gt,content:`Failed to load file: ${se}`,isLoading:!1}:gt))})}};S.useEffect(()=>{Gt()},[$e]);const Nb=()=>{$e&&(g(null),c("superpowers"),s(!0),oi(" ..."),fetch(`${F}/api/install-skills?path=${encodeURIComponent($e)}`).then(u=>u.json()).then(u=>{oi(u.message||"    "),Br(),Gt()}).catch(u=>oi(" : "+u)))},Fm=u=>{const w=u==="gemini"?`${F}/api/install-gemini-cli`:`${F}/api/install-claude-code`;fetch(w).then(N=>N.json()).then(N=>alert(N.message)).catch(N=>alert(N)),g(null)},Tb=()=>{const u=$e.replace(/\\/g,"/").split("/").filter(Boolean);if(u.length>1){u.pop();let w=u.join("/");u.length===1&&u[0].includes(":")&&(w+="/"),zr(w)}};S.useEffect(()=>{const u=new EventSource(`${F}/stream`);u.onmessage=$=>{try{const te=JSON.parse($.data);v(se=>[...se.slice(-199),te])}catch{}};const w=new EventSource(`${F}/api/events/fs`);w.onmessage=$=>{try{JSON.parse($.data).type==="fs_change"&&Om.current()}catch{}};const N=new EventSource(`${F}/api/events/thoughts`);return N.onmessage=$=>{try{const te=JSON.parse($.data);VS(se=>[...se.slice(-49),te])}catch{}},()=>{u.close(),w.close(),N.close()}},[]);const Pb=Array.from({length:m},(u,w)=>w);return S.useEffect(()=>{const u=N=>{if(!o)return;const $=N.clientX-48;$>150&&$<800&&n($)},w=()=>a(!1);return o?(window.addEventListener("mousemove",u),window.addEventListener("mouseup",w),document.body.style.cursor="col-resize"):document.body.style.cursor="default",()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",w)}},[o]),e?null:h.jsxs("div",{className:"flex h-screen w-full bg-[#1e1e1e] text-[#cccccc] overflow-hidden select-none font-sans flex-col",onClick:()=>g(null),children:[ge&&h.jsxs("div",{className:"flex items-center justify-between px-3 py-1 bg-primary/20 border-b border-primary/40 shrink-0 z-50",children:[h.jsx("span",{className:"text-[10px] text-primary font-bold",children:ge.checking?h.jsx(h.Fragment,{children:"GitHub    ..."}):ge.downloading?h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{className:"font-mono",children:ge.version}),"  ..."]}):h.jsxs(h.Fragment,{children:["  ",h.jsx("span",{className:"font-mono",children:ge.version}),"   "]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[!ge.downloading&&!ge.checking&&h.jsx("button",{onClick:pb,disabled:km,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-primary text-white hover:bg-primary/80 disabled:opacity-50 transition-colors",children:km?" ...":" "}),(ge.downloading||ge.checking)&&h.jsx("span",{className:"text-[9px] text-primary/60 animate-pulse",children:ge.checking?" ...":" ..."}),h.jsx("button",{onClick:()=>ja(null),className:"text-[9px] text-white/40 hover:text-white/70 transition-colors",children:""})]})]}),mb&&h.jsxs("div",{className:"flex items-center justify-between px-3 py-1 bg-yellow-500/20 border-b border-yellow-500/40 shrink-0 z-50",children:[h.jsx("span",{className:"text-[10px] text-yellow-300 font-bold",children:"  !    ."}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:xb,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-yellow-500 text-black hover:bg-yellow-400 transition-colors",children:" "}),h.jsx("button",{onClick:()=>{localStorage.removeItem("hive_needs_skill_reinstall"),Pm(!1)},className:"text-[9px] text-white/40 hover:text-white/70 transition-colors",children:""})]})]}),qn&&h.jsxs("div",{className:`fixed top-3 right-4 z-[9999] px-3 py-2 rounded shadow-lg text-[11px] font-bold flex items-center gap-2 transition-all pointer-events-none
          ${qn.type==="ok"?"bg-green-600/90 text-white":qn.type==="warn"?"bg-yellow-500/90 text-black":"bg-[#007acc]/90 text-white"}`,children:[qn.type==="info"&&h.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-white/40 border-t-white rounded-full"}),qn.msg]}),R&&h.jsxs("div",{className:"fixed z-[9999] min-w-[170px] bg-[#252526]/95 backdrop-blur-md border border-white/10 rounded shadow-2xl py-1 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{left:Math.min(R.x,window.innerWidth-180),top:Math.min(R.y,window.innerHeight-(R.type==="file"?240:150))},onClick:u=>u.stopPropagation(),children:[R.type==="file"&&R.path&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>{I(R.path),W(R.path.split("/").pop()||""),Ii()},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-primary/20 hover:text-white transition-colors",children:[h.jsx(zN,{className:"w-3.5 h-3.5"}),"  "]}),h.jsxs("button",{onClick:()=>_b(R.path,!!R.isDir),className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[h.jsx(dr,{className:"w-3.5 h-3.5"})," "]}),h.jsx("div",{className:"h-px bg-white/5 my-1"}),h.jsxs("button",{onClick:()=>vb(R.path),className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-white/5 hover:text-white transition-colors",children:[h.jsx(_N,{className:"w-3.5 h-3.5"}),"  "]}),h.jsxs("button",{onClick:()=>yb(R.path),className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-white/5 hover:text-white transition-colors",children:[h.jsx(xN,{className:"w-3.5 h-3.5"}),"  "]}),h.jsx("div",{className:"h-px bg-white/5 my-1"}),h.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent(`vibe:fillInput:${Oo}`,{detail:{text:`[  ] ${R.path}     .`}})),Ii()},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-primary hover:bg-primary/10 transition-colors font-bold",children:[h.jsx(un,{className:"w-3.5 h-3.5"}),"   "]})]}),R.type==="task"&&R.taskId&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"px-3 py-1 text-[9px] text-textMuted font-bold uppercase tracking-wider opacity-60",children:" "}),h.jsxs("button",{onClick:()=>{wi(R.taskId,{status:"in_progress"}),Ii()},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-primary/20 hover:text-white transition-colors",children:[h.jsx(nu,{className:"w-3.5 h-3.5"}),"  "]}),h.jsxs("button",{onClick:()=>{wi(R.taskId,{status:"done"}),Ii()},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-[#cccccc] hover:bg-green-500/20 hover:text-green-400 transition-colors",children:[h.jsx(ts,{className:"w-3.5 h-3.5"}),"  "]}),h.jsx("div",{className:"h-px bg-white/5 my-1"}),h.jsxs("button",{onClick:()=>{xs(R.taskId),Ii()},className:"w-full flex items-center gap-2.5 px-3 py-1.5 text-[11px] text-red-400 hover:bg-red-500/20 transition-colors",children:[h.jsx(dr,{className:"w-3.5 h-3.5"}),"  "]})]})]}),h.jsxs("div",{className:"h-7 bg-[#323233] flex items-center px-2 gap-0.5 text-[12px] border-b border-black/30 shrink-0 z-50 shadow-lg",children:[h.jsx("img",{src:"/vibe_icon.png",alt:"vibe",className:"w-4 h-4 mx-1 object-contain"}),h.jsx("span",{className:"text-[10px] font-bold text-white/90 mr-1 tracking-tight",children:" "}),["","","","AI ",""].map(u=>h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:w=>{w.stopPropagation(),g(b===u?null:u)},onMouseEnter:()=>b&&g(u),className:`px-2 py-0.5 rounded transition-colors ${b===u?"bg-[#444444] text-white":"hover:bg-white/10"}`,children:u}),b===u&&u===""&&h.jsxs("div",{className:"absolute top-full left-0 w-48 bg-[#252526] border border-black/40 shadow-2xl rounded-b z-[100] py-1 animate-in fade-in slide-in-from-top-1",children:[h.jsxs("button",{onClick:uh,className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(Rw,{className:"w-3.5 h-3.5 text-[#dcb67a]"}),"  ..."]}),h.jsx("div",{className:"h-px bg-white/5 my-1 mx-2"}),h.jsxs("button",{onClick:()=>{confirm("  ? (  )")&&fetch(`${F}/api/shutdown`).then(()=>{alert(" .  ."),window.close()}).catch(()=>{alert("    ")}),g(null)},className:"w-full text-left px-4 py-1.5 hover:bg-red-500/20 text-red-400 flex items-center gap-2",children:[h.jsx(aa,{className:"w-3.5 h-3.5"}),"   "]})]}),b===u&&u===""&&h.jsx("div",{className:"absolute top-full left-0 w-48 bg-[#252526] border border-black/40 shadow-2xl rounded-b z-[100] py-1 animate-in fade-in slide-in-from-top-1",children:h.jsxs("button",{onClick:()=>{v([]),g(null)},className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(dr,{className:"w-3.5 h-3.5 text-[#e8a87c]"}),"  "]})}),b===u&&u===""&&h.jsxs("div",{className:"absolute top-full left-0 w-48 bg-[#252526] border border-black/40 shadow-2xl rounded-b z-[100] py-1 animate-in fade-in slide-in-from-top-1",children:[h.jsxs("button",{onClick:()=>{s(!i),g(null)},className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(k0,{className:"w-3.5 h-3.5 text-[#3794ef]"}),"  ",i?"":""]}),h.jsx("div",{className:"h-px bg-white/5 my-1 mx-2"}),h.jsx("div",{className:"px-3 py-1 text-[10px] text-textMuted font-bold uppercase tracking-wider opacity-60",children:" "}),["1","2","3","4","2x2","6","8"].map(w=>h.jsxs("button",{onClick:()=>{f(w),g(null)},className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(jN,{className:"w-3.5 h-3.5 text-[#cccccc]"}),w==="1"?"1  ":w==="2"?"2  ":w==="3"?"3  ":w==="4"?"4  ( 4)":w==="2x2"?"4  (22 )":w==="6"?"6  (32 )":"8  (42 )"]},w))]}),b===u&&u==="AI "&&h.jsxs("div",{className:"absolute top-full left-0 w-64 bg-[#252526] border border-black/40 shadow-2xl rounded-b z-[100] py-1 animate-in fade-in slide-in-from-top-1",children:[h.jsx("div",{className:"px-3 py-1 text-[10px] text-textMuted font-bold uppercase tracking-wider opacity-60",children:"  "}),h.jsxs("button",{onClick:Nb,className:"w-full text-left px-4 py-1.5 hover:bg-primary/20 flex items-center justify-between group",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ui,{className:"w-3.5 h-3.5 text-primary"}),h.jsx("span",{children:"   ( )"})]}),h.jsx("span",{className:"text-[9px] text-white/30 group-hover:text-white/60 font-mono italic",children:"Recommended"})]}),h.jsx("div",{className:"h-px bg-white/5 my-1 mx-2"}),h.jsx("div",{className:"px-3 py-1 text-[10px] text-textMuted font-bold uppercase tracking-wider opacity-60",children:" CLI "}),h.jsxs("button",{onClick:()=>Fm("gemini"),className:"w-full text-left px-4 py-1.5 hover:bg-primary/20 flex items-center gap-2",children:[h.jsx(Ao,{className:"w-3.5 h-3.5 text-accent"}),h.jsx("span",{children:"Gemini CLI  (npm -g)"})]}),h.jsxs("button",{onClick:()=>Fm("claude"),className:"w-full text-left px-4 py-1.5 hover:bg-primary/20 flex items-center gap-2",children:[h.jsx(ur,{className:"w-3.5 h-3.5 text-success"}),h.jsx("span",{children:"Claude Code  (npm -g)"})]}),h.jsx("div",{className:"h-px bg-white/5 my-1 mx-2"}),h.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full text-left px-4 py-1.5 hover:bg-primary/20 flex items-center gap-2",children:[h.jsx(is,{className:"w-3.5 h-3.5 text-[#3794ef]"}),h.jsx("span",{children:" "})]})]}),b===u&&u===""&&h.jsxs("div",{className:"absolute top-full left-0 w-56 bg-[#252526] border border-black/40 shadow-2xl rounded-b z-[100] py-1 animate-in fade-in slide-in-from-top-1",children:[h.jsx("div",{className:"px-3 py-1 text-[10px] text-textMuted font-bold uppercase tracking-wider opacity-60",children:" "}),h.jsxs("button",{onClick:()=>Cm("claude-code","Claude Code  "),className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(ur,{className:"w-3.5 h-3.5 text-success"})," Claude Code "]}),h.jsxs("button",{onClick:()=>Cm("gemini-cli","Gemini CLI  "),className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(Ao,{className:"w-3.5 h-3.5 text-accent"})," Gemini CLI "]}),h.jsx("div",{className:"h-px bg-white/5 my-1 mx-2"}),h.jsxs("button",{onClick:()=>{alert(` (Vibe Coding) v1.0.0
   `),g(null)},className:"w-full text-left px-4 py-1.5 hover:bg-white/10 flex items-center gap-2",children:[h.jsx(C0,{className:"w-3.5 h-3.5 text-[#3794ef]"}),"  "]})]})]},u)),h.jsxs("div",{className:"ml-auto flex items-center gap-3 text-[11px] text-[#969696] px-4 font-mono overflow-hidden",children:[(Ue==null?void 0:Ue.agent_status)&&Object.entries(Ue.agent_status).map(([u,w])=>w.state!=="active"?null:h.jsxs("div",{className:"flex items-center gap-1 bg-green-500/10 border border-green-500/30 px-1.5 py-0.5 rounded text-[9px] text-green-400 animate-pulse shadow-[0_0_8px_rgba(74,222,128,0.2)]",title:"  ",children:[h.jsx(iu,{className:"w-3 h-3"}),h.jsx("span",{className:"font-bold uppercase tracking-wider",children:u}),h.jsx("span",{className:"opacity-80",children:"ACTIVE"})]},u)),h.jsx("span",{className:"truncate opacity-50 border-l border-white/10 pl-3",children:$e}),h.jsxs("button",{onClick:fb,disabled:hh,title:" ",className:`flex items-center gap-1 px-2 py-0.5 rounded border text-[10px] font-bold shrink-0 transition-all disabled:opacity-60
               ${ge&&!ge.downloading?"bg-red-500/20 border-red-500/60 text-red-400 animate-pulse hover:bg-red-500/30":ge!=null&&ge.downloading?"bg-yellow-500/20 border-yellow-500/40 text-yellow-300":"bg-white/5 border-white/10 text-white/50 hover:text-white/80 hover:border-white/30"}`,children:[h.jsx("span",{className:"font-mono",children:ni?`v${ni}`:"v3.4.1"}),hh?h.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-current/30 border-t-current rounded-full"}):ge&&!ge.downloading?h.jsx("span",{children:" "}):ge!=null&&ge.downloading?h.jsx("span",{children:"  "}):h.jsx("span",{className:"opacity-60",children:"  "})]})]})]}),h.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[h.jsxs("div",{className:"w-12 h-full bg-[#333333] border-r border-black/40 flex flex-col items-center py-4 gap-4 shrink-0",children:[h.jsx("button",{onClick:()=>{c("explorer"),s(!0)},className:`p-2 transition-colors ${l==="explorer"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:h.jsx(b0,{className:"w-6 h-6"})}),h.jsx("button",{onClick:()=>{c("search"),s(!0)},className:`p-2 transition-colors ${l==="search"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:h.jsx(Hr,{className:"w-6 h-6"})}),h.jsxs("button",{onClick:()=>{c("hive"),s(!0)},className:`p-2 transition-colors relative ${l==="hive"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(Ui,{className:"w-6 h-6"}),Gc>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-orange-500 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:Gc>9?"9+":Gc})]}),h.jsxs("button",{onClick:()=>{c("logs"),s(!0)},className:`p-2 transition-colors relative ${l==="logs"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,title:"  ",children:[h.jsx(N0,{className:"w-6 h-6"}),In.length>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-blue-500 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:In.length>99?"99+":In.length})]}),h.jsxs("button",{onClick:()=>{c("messages"),s(!0)},className:`p-2 transition-colors relative ${l==="messages"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(Od,{className:"w-6 h-6"}),Ye>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:Ye>9?"9+":Ye})]}),h.jsxs("button",{onClick:()=>{c("tasks"),s(!0)},className:`p-2 transition-colors relative ${l==="tasks"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(kl,{className:"w-6 h-6"}),Pr>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-yellow-500 text-black text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:Pr>9?"9+":Pr})]}),h.jsxs("button",{onClick:()=>{c("memory"),s(!0)},className:`p-2 transition-colors relative ${l==="memory"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(un,{className:"w-6 h-6"}),Si.length>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-cyan-500 text-black text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:Si.length>9?"9+":Si.length})]}),h.jsxs("button",{onClick:()=>{c("git"),s(!0)},className:`p-2 transition-colors relative ${l==="git"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(ru,{className:"w-6 h-6"}),Yc>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none animate-pulse",children:Yc>9?"9+":Yc})]}),h.jsxs("button",{onClick:()=>{c("mcp"),s(!0)},className:`p-2 transition-colors relative ${l==="mcp"?"text-white border-l-2 border-primary bg-white/5":"text-[#858585] hover:text-white"}`,children:[h.jsx(E0,{className:"w-6 h-6"}),Fn.length>0&&h.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-purple-500 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none",children:Fn.length>9?"9+":Fn.length})]}),h.jsxs("button",{onClick:()=>{c("superpowers"),s(!0)},className:`p-2 transition-colors relative ${l==="superpowers"?"text-white border-l-2 border-yellow-400 bg-white/5":"text-[#858585] hover:text-white"}`,title:"  ",children:[h.jsx(Ui,{className:"w-6 h-6"}),Se&&h.jsx("span",{className:`absolute top-1 right-1 w-4 h-4 text-white text-[8px] font-black rounded-full flex items-center justify-center leading-none ${(Se.claude.installed?1:0)+(Se.gemini.installed?1:0)>0?"bg-yellow-500":"bg-white/20"}`,children:(Se.claude.installed?1:0)+(Se.gemini.installed?1:0)})]}),h.jsxs("div",{className:"mt-auto flex flex-col gap-4",children:[h.jsx("button",{className:"p-2 text-[#858585] hover:text-white transition-colors",children:h.jsx(C0,{className:"w-6 h-6"})}),h.jsx("button",{className:"p-2 text-[#858585] hover:text-white transition-colors",children:h.jsx(YN,{className:"w-6 h-6"})})]})]}),h.jsxs(oa.div,{animate:{width:i?r:0,opacity:i?1:0},className:"h-full bg-[#252526] border-r border-black/40 flex flex-col overflow-x-auto overflow-y-hidden custom-scrollbar relative",children:[i&&h.jsx("div",{onMouseDown:u=>{u.stopPropagation(),a(!0)},className:`absolute right-0 top-0 w-1 h-full cursor-col-resize hover:bg-primary/50 transition-colors z-50 ${o?"bg-primary/50":""}`}),h.jsxs("div",{className:"h-12 px-5 flex items-center justify-between text-[16px] font-bold uppercase tracking-wider text-[#bbbbbb] shrink-0 border-b border-black/10 min-w-[200px]",children:[h.jsxs("span",{className:"flex items-center gap-2.5",children:[h.jsx(Pw,{className:"w-5 h-5"}),l==="explorer"?"Explorer":l==="search"?"Search":l==="messages"?" ":l==="tasks"?" ":l==="memory"?" ":l==="git"?"Git ":l==="mcp"?"MCP ":l==="superpowers"?"  ":l==="logs"?" ":"Hive Mind"]}),h.jsx("button",{onClick:()=>s(!1),className:"hover:bg-white/10 p-1.5 rounded transition-colors",children:h.jsx(aa,{className:"w-6 h-6"})})]}),h.jsx("div",{className:"p-5 flex-1 overflow-y-auto overflow-x-auto custom-scrollbar flex flex-col min-w-[200px]",children:l==="logs"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-3",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx(Hr,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-[#858585]"}),h.jsx("input",{type:"text",value:$n,onChange:u=>FS(u.target.value),placeholder:"  /  ...",className:"w-full bg-[#1e1e1e] border border-white/10 rounded pl-6 pr-2 py-1.5 text-[10px] focus:outline-none focus:border-primary text-white transition-colors"})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 custom-scrollbar",children:[In.filter(u=>!$n||u.agent.toLowerCase().includes($n.toLowerCase())||u.trigger_msg&&u.trigger_msg.toLowerCase().includes($n.toLowerCase())||u.project&&u.project.toLowerCase().includes($n.toLowerCase())).map(u=>h.jsxs("div",{className:"p-2.5 rounded-lg border border-white/10 bg-white/2 text-[11px] hover:border-white/20 transition-colors shadow-sm",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-bold ${u.agent.toLowerCase().includes("claude")?"bg-green-500/20 text-green-400":u.agent.toLowerCase().includes("gemini")?"bg-blue-500/20 text-blue-400":"bg-white/10 text-white/50"}`,children:u.agent}),h.jsx("span",{className:"text-[9px] text-white/30 font-mono",children:u.terminal_id})]}),h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-bold ${u.status==="success"?"bg-green-500/10 text-green-500":u.status==="failed"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:u.status})]}),h.jsx("p",{className:"text-[#cccccc] leading-snug mb-1.5 break-words font-medium",children:u.trigger_msg}),u.files_changed&&h.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-[#858585] mb-1.5 bg-black/20 p-1 rounded overflow-hidden",children:[h.jsx(b0,{className:"w-2.5 h-2.5 shrink-0"}),h.jsx("span",{className:"truncate",children:u.files_changed})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px] font-mono text-[#666666]",children:[h.jsx("span",{children:u.project}),h.jsx("span",{children:u.ts_start.replace("T"," ").slice(5,16)})]})]},u.id)),In.length===0&&h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 italic flex flex-col items-center gap-2",children:[h.jsx(N0,{className:"w-8 h-8 opacity-20"}),"  ."]})]})]}):l==="messages"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-3",children:[h.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar",children:T.length===0?h.jsxs("div",{className:"text-center text-[#858585] text-sm py-12 flex flex-col items-center gap-3 italic",children:[h.jsx(Od,{className:"w-9 h-9 opacity-20"}),"  "]}):[...T].reverse().map(u=>h.jsxs("div",{className:"p-3 rounded-lg border border-white/10 bg-white/2 text-[12px] hover:border-white/20 transition-colors",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[h.jsxs("div",{className:"flex items-center gap-1.5 font-mono font-bold",children:[h.jsx("span",{className:"text-success",children:u.from}),h.jsx("span",{className:"text-white/30 font-normal",children:""}),h.jsx("span",{className:"text-accent",children:u.to})]}),h.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${u.type==="handoff"?"bg-yellow-500/20 text-yellow-400":u.type==="request"?"bg-blue-500/20 text-blue-400":u.type==="task_complete"?"bg-green-500/20 text-green-400":u.type==="warning"?"bg-red-500/20 text-red-400":"bg-white/10 text-white/50"}`,children:u.type})]}),h.jsx("p",{className:"text-[#cccccc] leading-relaxed break-words whitespace-pre-wrap text-[12.5px]",children:u.content}),h.jsx("div",{className:"text-[#858585] mt-2 text-[10px] font-mono",children:u.timestamp.replace("T"," ")})]},u.id))}),h.jsxs("div",{className:"border-t border-white/5 pt-3 flex flex-col gap-2 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsxs("select",{value:H,onChange:u=>ee(u.target.value),className:"flex-1 bg-[#3c3c3c] border border-white/5 rounded px-2 py-2 text-[12px] focus:outline-none cursor-pointer hover:border-white/20 transition-colors",children:[h.jsx("option",{value:"claude",children:"Claude"}),h.jsx("option",{value:"gemini",children:"Gemini"}),h.jsx("option",{value:"system",children:"System"})]}),h.jsx("span",{className:"text-white/30 text-[12px] px-1",children:""}),h.jsxs("select",{value:E,onChange:u=>B(u.target.value),className:"flex-1 bg-[#3c3c3c] border border-white/5 rounded px-2 py-2 text-[12px] focus:outline-none cursor-pointer hover:border-white/20 transition-colors",children:[h.jsx("option",{value:"all",children:"All"}),h.jsx("option",{value:"claude",children:"Claude"}),h.jsx("option",{value:"gemini",children:"Gemini"})]})]}),h.jsxs("select",{value:U,onChange:u=>Q(u.target.value),className:"w-full bg-[#3c3c3c] border border-white/5 rounded px-2 py-2 text-[12px] focus:outline-none cursor-pointer hover:border-white/20 transition-colors",children:[h.jsx("option",{value:"info",children:"  "}),h.jsx("option",{value:"handoff",children:"  ( )"}),h.jsx("option",{value:"request",children:"  "}),h.jsx("option",{value:"task_complete",children:"  "}),h.jsx("option",{value:"warning",children:" "})]}),h.jsx("textarea",{value:oe,onChange:u=>je(u.target.value),onCompositionStart:()=>{xe.current=!0},onCompositionEnd:()=>{xe.current=!1},onKeyDown:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),oe.trim()&&bm())},placeholder:" ... (Enter: , Shift+Enter: , >:  )",rows:4,className:"w-full bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-3 py-2 text-[13px] focus:outline-none focus:border-primary text-white transition-colors resize-none"}),h.jsx("button",{onClick:bm,disabled:!oe.trim(),className:"w-full py-2.5 bg-primary/80 hover:bg-primary disabled:opacity-30 disabled:cursor-not-allowed text-white rounded-lg text-[13px] font-bold transition-colors shadow-lg",children:" (Enter)"})]})]}):l==="tasks"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-3",children:[h.jsx("div",{className:"flex gap-1.5 shrink-0",children:["all","pending","in_progress","done"].map(u=>{const w=u==="all"?"":u==="pending"?" ":u==="in_progress"?"":"",N=u==="all"?_e.length:_e.filter($=>$.status===u).length;return h.jsxs("button",{onClick:()=>qt(u),className:`flex-1 py-2 rounded-lg text-[11px] font-bold transition-all ${ri===u?"bg-primary text-white shadow-md":"bg-white/5 text-[#858585] hover:text-white"}`,children:[w,N>0&&` (${N})`]},u)})}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-2.5 custom-scrollbar",children:_e.filter(u=>ri==="all"||u.status===ri).length===0?h.jsxs("div",{className:"text-center text-[#858585] text-sm py-12 flex flex-col items-center gap-3 italic",children:[h.jsx(kl,{className:"w-9 h-9 opacity-20"})," "]}):_e.filter(u=>ri==="all"||u.status===ri).slice().reverse().map(u=>{const w=u.priority==="high"?"":u.priority==="medium"?"":"",N=u.status==="pending"?" ":u.status==="in_progress"?" ":"";return h.jsxs("div",{onContextMenu:$=>gb($,u.id,u.title),className:`p-3 rounded-lg border text-[12px] transition-all shadow-sm ${u.status==="done"?"border-white/5 opacity-50 bg-black/10":"border-white/10 bg-white/2 hover:border-white/20"}`,children:[h.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.jsx("span",{className:"text-[13px] shrink-0",children:w}),h.jsx("span",{className:`font-bold flex-1 break-words leading-snug text-[13px] ${u.status==="done"?"line-through text-[#858585]":"text-[#cccccc]"}`,children:u.title})]}),u.description&&h.jsx("p",{className:"text-[#858585] text-[11px] mb-2.5 leading-relaxed pl-5",children:u.description}),h.jsxs("div",{className:"flex items-center justify-between pl-5 mb-2.5",children:[h.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold font-mono ${u.assigned_to==="claude"?"bg-green-500/15 text-green-400":u.assigned_to==="gemini"?"bg-blue-500/15 text-blue-400":"bg-white/10 text-white/50"}`,children:u.assigned_to}),h.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${u.status==="pending"?"bg-white/10 text-[#858585]":u.status==="in_progress"?"bg-primary/20 text-primary":"bg-green-500/20 text-green-400"}`,children:N})]}),h.jsxs("div",{className:"flex gap-1.5 pl-5",children:[u.status==="pending"&&h.jsx("button",{onClick:()=>wi(u.id,{status:"in_progress"}),className:"flex-1 py-1.5 bg-primary/20 hover:bg-primary/40 text-primary rounded text-[11px] font-bold transition-colors",children:" "}),u.status==="in_progress"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>wi(u.id,{status:"done"}),className:"flex-1 py-1.5 bg-green-500/20 hover:bg-green-500/40 text-green-400 rounded text-[11px] font-bold transition-colors",children:" "}),h.jsx("button",{onClick:()=>wi(u.id,{status:"pending"}),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 text-[#858585] rounded text-[11px] transition-colors",children:""})]}),u.status==="done"&&h.jsx("button",{onClick:()=>wi(u.id,{status:"pending"}),className:"flex-1 py-1.5 bg-white/5 hover:bg-white/10 text-[#858585] rounded text-[11px] transition-colors",children:" "}),h.jsx("button",{onClick:()=>xs(u.id),className:"px-2 py-1.5 bg-red-500/10 hover:bg-red-500/25 text-red-400 rounded text-[11px] transition-colors",title:"",children:""})]})]},u.id)})}),vs?h.jsxs("div",{className:"border-t border-white/5 pt-3 flex flex-col gap-2 shrink-0",children:[h.jsx("div",{className:"text-[11px] text-[#858585] font-bold uppercase tracking-wider",children:"  "}),h.jsx("input",{type:"text",value:pt,onChange:u=>fe(u.target.value),onKeyDown:u=>{u.key==="Enter"&&Mr(),u.key==="Escape"&&Yt(!1)},placeholder:"  ()",autoFocus:!0,className:"w-full bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-3 py-2 text-[12px] focus:outline-none focus:border-primary text-white transition-colors"}),h.jsx("input",{type:"text",value:ys,onChange:u=>Js(u.target.value),placeholder:"  ()",className:"w-full bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-3 py-2 text-[12px] focus:outline-none focus:border-primary text-white transition-colors"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("select",{value:we,onChange:u=>Bi(u.target.value),className:"flex-1 bg-[#3c3c3c] border border-white/5 rounded px-2 py-2 text-[12px] focus:outline-none cursor-pointer",children:[h.jsx("option",{value:"all",children:"All"}),h.jsx("option",{value:"claude",children:"Claude"}),h.jsx("option",{value:"gemini",children:"Gemini"})]}),h.jsxs("select",{value:xi,onChange:u=>Ca(u.target.value),className:"flex-1 bg-[#3c3c3c] border border-white/5 rounded px-2 py-2 text-[12px] focus:outline-none cursor-pointer",children:[h.jsx("option",{value:"high",children:" "}),h.jsx("option",{value:"medium",children:" "}),h.jsx("option",{value:"low",children:" "})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:Mr,disabled:!pt.trim(),className:"flex-1 py-2 bg-primary/80 hover:bg-primary disabled:opacity-30 text-white rounded-lg text-[13px] font-bold transition-colors",children:""}),h.jsx("button",{onClick:()=>Yt(!1),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-[#858585] rounded-lg text-[13px] transition-colors",children:""})]})]}):h.jsxs("button",{onClick:()=>Yt(!0),className:"shrink-0 w-full py-2.5 border border-dashed border-white/15 hover:border-primary/40 hover:bg-primary/5 rounded-lg text-[12px] text-[#858585] hover:text-primary transition-colors flex items-center justify-center gap-2",children:[h.jsx(ou,{className:"w-4 h-4"}),"   "]})]}):l==="memory"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsxs("div",{className:"relative shrink-0",children:[h.jsx(Hr,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-[#858585]"}),h.jsx("input",{type:"text",value:nt,onChange:u=>jr(u.target.value),placeholder:" /  /  ...",className:"w-full bg-[#1e1e1e] border border-white/10 rounded pl-6 pr-2 py-1.5 text-[10px] focus:outline-none focus:border-primary text-white transition-colors"})]}),h.jsxs("div",{className:"flex items-center justify-between shrink-0 px-0.5",children:[h.jsxs("span",{className:"text-[9px] text-[#858585]",children:[" ",Si.length," ",nt&&` (: "${nt}")`,Uc&&!ot&&h.jsxs("span",{className:"ml-1 text-cyan-600",children:[" ",Uc]})]}),h.jsx("button",{onClick:()=>On(u=>!u),className:`px-1.5 py-0.5 rounded text-[8px] font-bold transition-colors ${ot?"bg-amber-500/20 text-amber-400":"bg-white/5 text-[#858585] hover:text-white"}`,title:ot?"  ":"  ",children:ot?"":""})]}),h.jsx("div",{className:"flex-1 overflow-y-auto space-y-1.5 custom-scrollbar",children:Si.length===0?h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 flex flex-col items-center gap-2 italic",children:[h.jsx(un,{className:"w-7 h-7 opacity-20"}),nt?"  ":"  "]}):Si.map(u=>h.jsxs("div",{className:"p-2 rounded border border-white/10 bg-white/2 text-[10px] hover:border-white/20 transition-colors group",children:[h.jsxs("div",{className:"flex items-start justify-between gap-1 mb-1",children:[h.jsx("span",{className:"font-mono font-bold text-cyan-400 text-[10px] break-all leading-tight",children:u.key}),h.jsxs("div",{className:"flex gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>jS(u),className:"px-1.5 py-0.5 bg-white/5 hover:bg-primary/20 rounded text-[9px] text-[#858585] hover:text-primary transition-colors",children:""}),h.jsx("button",{onClick:()=>MS(u.key),className:"px-1.5 py-0.5 bg-white/5 hover:bg-red-500/20 rounded text-[9px] text-[#858585] hover:text-red-400 transition-colors",children:""})]})]}),ot&&u.project&&h.jsx("span",{className:"inline-block px-1.5 py-0.5 bg-amber-500/10 text-amber-400 rounded text-[8px] font-mono mb-0.5",children:u.project}),u.title&&u.title!==u.key&&h.jsx("p",{className:"text-[#cccccc] font-semibold text-[10px] mb-0.5",children:u.title}),h.jsx("p",{className:"text-[#969696] text-[9px] leading-relaxed line-clamp-2 break-words",children:u.content}),h.jsxs("div",{className:"flex items-center flex-wrap gap-1 mt-1.5",children:[u.tags.map(w=>h.jsxs("span",{onClick:()=>jr(w),className:"px-1 py-0.5 bg-cyan-500/10 text-cyan-400 rounded text-[8px] font-mono cursor-pointer hover:bg-cyan-500/20 transition-colors",children:["#",w]},w)),h.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ml-auto ${u.author==="claude"?"bg-green-500/15 text-green-400":u.author==="gemini"?"bg-blue-500/15 text-blue-400":"bg-white/10 text-white/50"}`,children:u.author}),h.jsx("span",{className:"text-[#858585] text-[8px] font-mono",children:u.updated_at.slice(5,16).replace("T"," ")})]})]},u.key))}),ka?h.jsxs("div",{className:"border-t border-white/5 pt-2 flex flex-col gap-1.5 shrink-0",children:[h.jsx("div",{className:"text-[9px] text-[#858585] font-bold uppercase tracking-wider",children:Z?` : ${Z}`:"+   "}),h.jsx("input",{type:"text",value:ne,onChange:u=>J(u.target.value),placeholder:" (: db_schema, auth_method)",disabled:!!Z,className:"w-full bg-[#1e1e1e] border border-white/10 rounded px-2 py-1.5 text-[10px] focus:outline-none focus:border-cyan-500 text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-mono"}),h.jsx("input",{type:"text",value:he,onChange:u=>re(u.target.value),placeholder:" (,   )",className:"w-full bg-[#1e1e1e] border border-white/10 rounded px-2 py-1.5 text-[10px] focus:outline-none focus:border-cyan-500 text-white transition-colors"}),h.jsx("textarea",{value:mt,onChange:u=>me(u.target.value),placeholder:" (  )",rows:4,className:"w-full bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-2 py-1.5 text-[10px] focus:outline-none focus:border-cyan-500 text-white transition-colors resize-none"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("input",{type:"text",value:Te,onChange:u=>Pt(u.target.value),placeholder:" ( )",className:"flex-1 bg-[#1e1e1e] border border-white/10 rounded px-2 py-1.5 text-[10px] focus:outline-none focus:border-cyan-500 text-white transition-colors"}),h.jsxs("select",{value:Dr,onChange:u=>Lr(u.target.value),className:"bg-[#3c3c3c] border border-white/5 rounded px-1 py-1 text-[10px] focus:outline-none cursor-pointer",children:[h.jsx("option",{value:"claude",children:"Claude"}),h.jsx("option",{value:"gemini",children:"Gemini"}),h.jsx("option",{value:"user",children:"User"})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:PS,disabled:!ne.trim()||!mt.trim(),className:"flex-1 py-1.5 bg-cyan-500/80 hover:bg-cyan-500 disabled:opacity-30 text-black rounded text-[10px] font-black transition-colors",children:""}),h.jsx("button",{onClick:()=>{D(!1),X(null),J(""),re(""),me(""),Pt("")},className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 text-[#858585] rounded text-[10px] transition-colors",children:""})]})]}):h.jsxs("button",{onClick:()=>D(!0),className:"shrink-0 w-full py-1.5 border border-dashed border-white/15 hover:border-cyan-500/40 hover:bg-cyan-500/5 rounded text-[10px] text-[#858585] hover:text-cyan-400 transition-colors flex items-center justify-center gap-1.5",children:[h.jsx(ou,{className:"w-3 h-3"}),"    "]})]}):l==="hive"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[h.jsx("div",{className:"text-[9px] text-[#858585] font-mono",children:lm?` : ${lm}`:"  "}),h.jsxs("button",{onClick:BS,disabled:om,className:"flex items-center gap-1 px-2 py-1 bg-primary/20 hover:bg-primary/40 disabled:opacity-40 text-primary rounded text-[9px] font-bold transition-colors",children:[h.jsx(nu,{className:"w-3 h-3"}),om?" ...":" "]})]}),Ue?h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-3",children:[Ue.warnings&&Ue.warnings.length>0&&h.jsxs("div",{className:"p-2 rounded border border-red-500/40 bg-red-500/5",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-1 text-[10px] font-bold text-red-400",children:[h.jsx(Vr,{className:"w-3.5 h-3.5"}),"  (",Ue.warnings.length,")"]}),Ue.warnings.map((u,w)=>h.jsxs("div",{className:"text-[9px] text-red-300 pl-3 py-0.5",children:[" ",u]},w))]}),h.jsxs("div",{className:"p-2 rounded border border-white/10",children:[h.jsxs("div",{className:"text-[9px] font-bold text-[#969696] mb-1.5 flex items-center gap-1",children:[h.jsx(iu,{className:"w-3 h-3"}),"  "]}),Object.entries(Ue.agent_status??{}).map(([u,w])=>{var se;const N=w.state==="active"?"text-green-400":w.state==="idle"?"text-yellow-400":"text-[#858585]",$=w.state==="active"?"":w.state==="idle"?` ${w.idle_sec?Math.floor(w.idle_sec/60)+"":""}`:"",te=((se=Ue.task_distribution)==null?void 0:se[u])??{pending:0,in_progress:0,done:0};return h.jsxs("div",{className:"flex items-center gap-2 py-1 border-b border-white/5 last:border-0",children:[h.jsx(fN,{className:`w-3 h-3 shrink-0 ${N}`}),h.jsx("span",{className:`font-mono font-bold text-[10px] w-12 shrink-0 ${u==="claude"?"text-green-400":"text-blue-400"}`,children:u}),h.jsx("span",{className:`text-[9px] ${N}`,children:$}),h.jsxs("div",{className:"ml-auto flex gap-1.5 text-[8px] font-mono",children:[h.jsxs("span",{className:"text-[#858585]",children:["P:",te.pending]}),h.jsxs("span",{className:"text-primary",children:["W:",te.in_progress]}),h.jsxs("span",{className:"text-green-400",children:["D:",te.done]})]})]},u)})]}),((Wm=Ue.task_distribution)==null?void 0:Wm.all)&&h.jsxs("div",{className:"p-2 rounded border border-white/10",children:[h.jsx("div",{className:"text-[9px] font-bold text-[#969696] mb-1",children:"  (all)"}),h.jsxs("div",{className:"flex gap-3 text-[9px] font-mono",children:[h.jsxs("span",{className:"text-[#858585]",children:[": ",Ue.task_distribution.all.pending]}),h.jsxs("span",{className:"text-primary",children:[": ",Ue.task_distribution.all.in_progress]}),h.jsxs("span",{className:"text-green-400",children:[": ",Ue.task_distribution.all.done]})]})]}),Ue.recent_actions&&Ue.recent_actions.length>0?h.jsxs("div",{className:"p-2 rounded border border-white/10",children:[h.jsx("div",{className:"text-[9px] font-bold text-[#969696] mb-1.5",children:"  "}),Ue.recent_actions.slice(0,8).map((u,w)=>{var $;const N=u.action==="auto_assign"?"text-green-400":u.action==="idle_agent"?"text-yellow-400":u.action.includes("overload")?"text-red-400":"text-[#858585]";return h.jsxs("div",{className:"flex items-start gap-1.5 py-0.5 hover:bg-white/3 rounded px-1",children:[h.jsx("span",{className:`text-[8px] font-mono shrink-0 mt-0.5 ${N}`,children:u.action}),h.jsx("span",{className:"text-[9px] text-[#cccccc] flex-1 break-words leading-tight",children:u.detail}),h.jsx("span",{className:"text-[8px] text-[#858585] shrink-0 font-mono",children:($=u.timestamp)==null?void 0:$.slice(11,16)})]},w)})]}):h.jsx("div",{className:"p-2 rounded border border-white/5 text-center text-[9px] text-[#858585] italic",children:'     " "   '})]}):h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 flex flex-col items-center gap-2 italic",children:[h.jsx(iu,{className:"w-7 h-7 opacity-20"}),"  ..."]})]}):l==="git"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsx("input",{type:"text",value:Ar,onChange:u=>Ea(u.target.value),onBlur:()=>Ea(Ar.trim()||$e),placeholder:"Git  ...",className:"w-full bg-[#1e1e1e] border border-white/10 rounded px-2 py-1.5 text-[10px] focus:outline-none focus:border-primary text-white transition-colors font-mono shrink-0"}),!ue||!ue.is_git_repo?h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 flex flex-col items-center gap-2 italic",children:[h.jsx(ru,{className:"w-7 h-7 opacity-20"}),ue!=null&&ue.error?ue.error:"Git  "]}):h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-3",children:[h.jsxs("div",{className:"p-2 rounded border border-white/10 bg-white/2",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[h.jsx(ru,{className:"w-3.5 h-3.5 text-primary shrink-0"}),h.jsx("span",{className:"text-[11px] font-bold text-primary font-mono",children:ue.branch}),ue.ahead>0&&h.jsxs("span",{className:"flex items-center gap-0.5 text-[9px] text-green-400 font-bold ml-auto",children:[h.jsx(nN,{className:"w-3 h-3"}),ue.ahead]}),ue.behind>0&&h.jsxs("span",{className:"flex items-center gap-0.5 text-[9px] text-orange-400 font-bold ml-auto",children:[h.jsx(sN,{className:"w-3 h-3"}),ue.behind]})]}),h.jsxs("div",{className:"flex gap-2 text-[9px] font-mono",children:[h.jsxs("span",{className:"text-green-400",children:["S:",ue.staged.length]}),h.jsxs("span",{className:"text-yellow-400",children:["M:",ue.unstaged.length]}),h.jsxs("span",{className:"text-[#858585]",children:["?:",ue.untracked.length]}),ue.conflicts.length>0&&h.jsxs("span",{className:"text-red-400 font-black animate-pulse",children:[" C:",ue.conflicts.length]})]})]}),ue.conflicts.length>0&&h.jsxs("div",{className:"p-2 rounded border border-red-500/40 bg-red-500/5",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-1 text-[10px] font-bold text-red-400",children:[h.jsx(Vr,{className:"w-3.5 h-3.5"}),"   (",ue.conflicts.length,")"]}),ue.conflicts.map(u=>h.jsx("div",{className:"text-[9px] font-mono text-red-300 pl-4 py-0.5 truncate",children:u},u))]}),ue.staged.length>0&&h.jsxs("div",{className:"p-2 rounded border border-green-500/20 bg-green-500/3",children:[h.jsxs("div",{className:"text-[9px] font-bold text-green-400 mb-1",children:[" (",ue.staged.length,")"]}),ue.staged.slice(0,8).map(u=>h.jsxs("div",{className:"text-[9px] font-mono text-green-300/70 pl-2 py-0.5 truncate",children:["+",u]},u)),ue.staged.length>8&&h.jsxs("div",{className:"text-[8px] text-green-400/50 pl-2",children:["... +",ue.staged.length-8," "]})]}),ue.unstaged.length>0&&h.jsxs("div",{className:"p-2 rounded border border-yellow-500/20 bg-yellow-500/3",children:[h.jsxs("div",{className:"text-[9px] font-bold text-yellow-400 mb-1",children:[" (unstaged) (",ue.unstaged.length,")"]}),ue.unstaged.slice(0,15).map(u=>h.jsxs("div",{className:"group flex items-center justify-between gap-1.5 py-0.5 hover:bg-white/5 rounded px-1 transition-colors",children:[h.jsxs("span",{className:"text-[9px] font-mono text-yellow-300/70 truncate flex-1",title:u,children:["~",u]}),h.jsx("button",{onClick:()=>DS(u),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/20 rounded text-red-400 transition-all shrink-0",title:"  (git checkout)",children:h.jsx(is,{className:"w-3 h-3 rotate-180"})})]},u)),ue.unstaged.length>15&&h.jsxs("div",{className:"text-[8px] text-yellow-400/50 pl-2",children:["... +",ue.unstaged.length-15," "]})]}),ue.untracked.length>0&&h.jsxs("div",{className:"p-2 rounded border border-white/10",children:[h.jsxs("div",{className:"text-[9px] font-bold text-[#858585] mb-1",children:[" (",ue.untracked.length,")"]}),ue.untracked.slice(0,5).map(u=>h.jsxs("div",{className:"text-[9px] font-mono text-[#858585] pl-2 py-0.5 truncate",children:["?",u]},u)),ue.untracked.length>5&&h.jsxs("div",{className:"text-[8px] text-[#858585]/50 pl-2",children:["... +",ue.untracked.length-5," "]})]}),rm.length>0&&h.jsxs("div",{className:"p-2 rounded border border-white/10",children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 text-[9px] font-bold text-[#969696]",children:[h.jsx(TN,{className:"w-3 h-3"}),"  "]}),rm.slice(0,8).map(u=>h.jsxs("div",{className:"flex items-start gap-1.5 py-0.5 hover:bg-white/3 rounded px-1 transition-colors",children:[h.jsx("span",{className:"font-mono text-[8px] text-primary shrink-0 mt-0.5",children:u.hash}),h.jsx("span",{className:"text-[9px] text-[#cccccc] flex-1 truncate leading-tight",children:u.message}),h.jsx("span",{className:"text-[8px] text-[#858585] shrink-0 font-mono",children:u.date.replace(" ago","")})]},u.hash))]})]})]}):l==="mcp"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsx("div",{className:"flex gap-1 shrink-0",children:["claude","gemini"].map(u=>h.jsx("button",{onClick:()=>XS(u),className:`flex-1 py-1 text-[10px] font-bold rounded transition-colors ${Or===u?"bg-primary text-white":"bg-white/5 text-[#858585] hover:text-white"}`,children:u==="claude"?"Claude Code":"Gemini CLI"},u))}),h.jsx("div",{className:"flex gap-1 shrink-0",children:["global","project"].map(u=>h.jsx("button",{onClick:()=>ZS(u),className:`flex-1 py-1 text-[10px] font-bold rounded transition-colors ${Ir===u?"bg-accent/80 text-white":"bg-white/5 text-[#858585] hover:text-white"}`,children:u==="global"?" (Global)":""},u))}),h.jsxs("div",{className:"flex gap-1 shrink-0 border border-white/10 rounded p-0.5",children:[h.jsx("button",{onClick:()=>fm("catalog"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-colors ${eh==="catalog"?"bg-white/15 text-white":"text-[#858585] hover:text-white"}`,children:" "}),h.jsxs("button",{onClick:()=>fm("search"),className:`flex-1 py-1 text-[10px] font-bold rounded transition-colors flex items-center justify-center gap-1 ${eh==="search"?"bg-purple-500/30 text-purple-300":"text-[#858585] hover:text-white"}`,children:[h.jsx(Hr,{className:"w-3 h-3"}),"Smithery "]})]}),JS&&h.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-yellow-300 bg-yellow-500/10 border border-yellow-500/30 rounded px-2 py-1 shrink-0",children:[h.jsx("span",{children:""}),h.jsx("span",{className:"flex-1 font-bold",children:"Claude Code  Gemini  MCP "}),h.jsx("button",{onClick:()=>Ta(!1),className:"text-yellow-400 hover:text-yellow-200 font-bold leading-none",title:"",children:""})]}),Jc&&h.jsx("div",{className:"text-[9px] text-green-400 bg-green-500/10 border border-green-500/20 rounded px-2 py-1 font-mono truncate shrink-0",title:Jc,children:Jc}),eh==="catalog"?h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-1.5",children:um.length===0?h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 flex flex-col items-center gap-2 italic",children:[h.jsx(E0,{className:"w-7 h-7 opacity-20"}),"  ..."]}):um.map(u=>{const w=Fn.includes(u.name),N=dm[u.name]??!1,$={:"bg-blue-500/20 text-blue-300",:"bg-orange-500/20 text-orange-300",:"bg-yellow-500/20 text-yellow-300",AI:"bg-purple-500/20 text-purple-300",:"bg-green-500/20 text-green-300",DB:"bg-red-500/20 text-red-300"};return h.jsxs("div",{className:`p-2 rounded border transition-colors ${w?"border-green-500/30 bg-green-500/5":"border-white/10 bg-white/2 hover:border-white/20"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[w?h.jsx(ts,{className:"w-3.5 h-3.5 text-green-400 shrink-0"}):h.jsx(su,{className:"w-3.5 h-3.5 text-[#555] shrink-0"}),h.jsx("span",{className:"text-[11px] font-bold text-white flex-1 truncate",children:u.name}),h.jsx("span",{className:`text-[8px] font-bold px-1 py-0.5 rounded ${$[u.category]??"bg-white/10 text-white/50"}`,children:u.category})]}),h.jsx("p",{className:"text-[9px] text-[#858585] pl-5 mb-1.5 leading-tight",children:u.description}),u.requiresEnv&&u.requiresEnv.length>0&&h.jsxs("p",{className:"text-[8px] text-yellow-400/70 pl-5 mb-1.5 font-mono",children:["ENV: ",u.requiresEnv.join(", ")]}),h.jsx("div",{className:"pl-5",children:w?h.jsx("button",{onClick:()=>Sm(u.name),disabled:N,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 disabled:opacity-50 transition-colors",children:N?" ...":""}):h.jsx("button",{onClick:()=>ab(u),disabled:N,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-primary/20 text-primary hover:bg-primary/30 disabled:opacity-50 transition-colors",children:N?" ...":""})})]},u.name)})}):h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsx("div",{className:"shrink-0",children:Wn&&!nb?h.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] text-green-400 bg-green-500/10 border border-green-500/20 rounded px-2 py-1",children:[h.jsx(ts,{className:"w-3 h-3 shrink-0"}),h.jsxs("span",{className:"flex-1 font-mono truncate",children:["API Key: ",rb]}),h.jsx("button",{onClick:()=>nh(!0),className:"text-[#858585] hover:text-white font-bold text-[9px] transition-colors",children:""})]}):h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("p",{className:"text-[9px] text-[#858585]",children:["Smithery API   "," ",h.jsx("a",{href:"https://smithery.ai/account/api-keys",target:"_blank",rel:"noreferrer",className:"text-purple-400 hover:text-purple-300 underline",children:"smithery.ai/account/api-keys"})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("input",{type:"password",value:Un,onChange:u=>rh(u.target.value),onKeyDown:u=>u.key==="Enter"&&wm(),placeholder:"sk-...",className:"flex-1 bg-white/5 border border-white/15 rounded px-2 py-1 text-[10px] text-white placeholder-[#555] focus:outline-none focus:border-purple-500/50"}),h.jsx("button",{onClick:wm,disabled:ym||!Un.trim(),className:"text-[9px] font-bold px-2 py-1 rounded bg-purple-500/30 text-purple-300 hover:bg-purple-500/50 disabled:opacity-40 transition-colors shrink-0",children:ym?" ":""}),Wn&&h.jsx("button",{onClick:()=>{nh(!1),rh("")},className:"text-[9px] px-1.5 py-1 rounded bg-white/5 text-[#858585] hover:text-white transition-colors shrink-0",children:""})]})]})}),h.jsxs("div",{className:"flex gap-1 shrink-0",children:[h.jsx("input",{type:"text",value:Pa,onChange:u=>QS(u.target.value),onKeyDown:u=>u.key==="Enter"&&Ma(1),placeholder:"  (: database, browser...)",disabled:!Wn,className:"flex-1 bg-white/5 border border-white/15 rounded px-2 py-1 text-[10px] text-white placeholder-[#555] focus:outline-none focus:border-purple-500/50 disabled:opacity-40"}),h.jsx("button",{onClick:()=>Ma(1),disabled:!Wn||Hn||!Pa.trim(),className:"text-[9px] font-bold px-2 py-1 rounded bg-purple-500/30 text-purple-300 hover:bg-purple-500/50 disabled:opacity-40 transition-colors shrink-0 flex items-center gap-1",children:Hn?h.jsx(is,{className:"w-3 h-3 animate-spin"}):h.jsx(Hr,{className:"w-3 h-3"})})]}),ih&&h.jsx("div",{className:"text-[9px] text-red-400 bg-red-500/10 border border-red-500/20 rounded px-2 py-1 shrink-0",children:ih}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-1.5",children:Hn?h.jsxs("div",{className:"text-center text-[#858585] text-xs py-8 flex flex-col items-center gap-2",children:[h.jsx(is,{className:"w-5 h-5 animate-spin opacity-40"})," ..."]}):pm.length===0&&!ih?h.jsxs("div",{className:"text-center text-[#858585] text-xs py-10 flex flex-col items-center gap-2 italic",children:[h.jsx(Hr,{className:"w-7 h-7 opacity-20"}),Wn?" ":"API   "]}):pm.map(u=>{const w=u.qualifiedName.split("/").pop()??u.qualifiedName,N=Fn.includes(w),$=dm[u.qualifiedName]??!1;return h.jsxs("div",{className:`p-2 rounded border transition-colors ${N?"border-green-500/30 bg-green-500/5":"border-white/10 bg-white/2 hover:border-white/20"}`,children:[h.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[N?h.jsx(ts,{className:"w-3.5 h-3.5 text-green-400 shrink-0"}):h.jsx(su,{className:"w-3.5 h-3.5 text-[#555] shrink-0"}),h.jsx("span",{className:"text-[11px] font-bold text-white flex-1 truncate",children:u.displayName}),u.verified&&h.jsx("span",{className:"text-[8px] font-bold px-1 py-0.5 rounded bg-blue-500/20 text-blue-300",children:" "})]}),h.jsx("p",{className:"text-[9px] text-[#858585] pl-5 mb-1 leading-tight line-clamp-2",children:u.description}),h.jsxs("div",{className:"flex items-center gap-1.5 pl-5",children:[h.jsx("span",{className:"text-[8px] text-[#555] font-mono truncate flex-1",children:u.qualifiedName}),u.useCount>0&&h.jsxs("span",{className:"text-[8px] text-[#555]",children:[u.useCount.toLocaleString()," "]}),N?h.jsx("button",{onClick:()=>Sm(w),disabled:$,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 disabled:opacity-50 transition-colors shrink-0",children:$?" ...":""}):h.jsx("button",{onClick:()=>ob(u),disabled:$,className:"text-[9px] font-bold px-2 py-0.5 rounded bg-purple-500/20 text-purple-300 hover:bg-purple-500/30 disabled:opacity-50 transition-colors shrink-0",children:$?" ...":""})]})]},u.qualifiedName)})}),th>1&&h.jsxs("div",{className:"flex items-center justify-between shrink-0 pt-1 border-t border-white/10",children:[h.jsx("button",{onClick:()=>Ma(Vn-1),disabled:Vn<=1||Hn,className:"text-[9px] font-bold px-2 py-1 rounded bg-white/5 text-[#858585] hover:text-white disabled:opacity-30 transition-colors",children:" "}),h.jsxs("span",{className:"text-[9px] text-[#858585]",children:[Vn," / ",th," (",tb.toLocaleString(),")"]}),h.jsx("button",{onClick:()=>Ma(Vn+1),disabled:Vn>=th||Hn,className:"text-[9px] font-bold px-2 py-1 rounded bg-white/5 text-[#858585] hover:text-white disabled:opacity-30 transition-colors",children:" "})]})]})]}):l==="superpowers"?h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden gap-2",children:[h.jsxs("div",{className:"shrink-0 p-2 rounded border border-white/10 bg-black/20 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"text-[10px] font-bold text-[#969696] flex items-center gap-1.5 uppercase tracking-tighter",children:[h.jsx(ur,{className:"w-3.5 h-3.5"}),"   "]}),h.jsx("button",{onClick:zn,className:"p-1 hover:bg-white/10 rounded transition-colors text-[#858585]",children:h.jsx(is,{className:"w-2.5 h-2.5"})})]}),ai?h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[h.jsxs("div",{className:"flex flex-col gap-0.5",children:[h.jsx("div",{className:"text-[8px] text-[#666] mb-0.5",children:"  "}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"RULES.md"}),(Um=ai.constitution)!=null&&Um.rules_md?h.jsx(ts,{className:"w-2.5 h-2.5 text-green-400"}):h.jsx(Vr,{className:"w-2.5 h-2.5 text-red-500"})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"CLAUDE.md"}),(Km=ai.constitution)!=null&&Km.claude_md?h.jsx(ts,{className:"w-2.5 h-2.5 text-green-400"}):h.jsx(Vr,{className:"w-2.5 h-2.5 text-red-500"})]})]}),h.jsxs("div",{className:"flex flex-col gap-0.5",children:[h.jsx("div",{className:"text-[8px] text-[#666] mb-0.5",children:"  "}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"Master Skill"}),(qm=ai.skills)!=null&&qm.master?h.jsx(ts,{className:"w-2.5 h-2.5 text-green-400"}):h.jsx(Vr,{className:"w-2.5 h-2.5 text-red-500"})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"Memory Script"}),(Ym=ai.skills)!=null&&Ym.memory_script?h.jsx(ts,{className:"w-2.5 h-2.5 text-green-400"}):h.jsx(Vr,{className:"w-2.5 h-2.5 text-red-500"})]})]})]}),h.jsxs("div",{className:"pt-1 border-t border-white/5 flex flex-col gap-1",children:[h.jsxs("div",{className:"text-[8px] text-[#666] flex items-center justify-between",children:[h.jsx("span",{children:"   "}),h.jsx("span",{className:"text-primary/50",children:"v4.0"})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"DB "}),h.jsx("span",{className:ai.db_ok?"text-green-400":"text-red-500",children:ai.db_ok?"":""})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:" "}),h.jsx("span",{className:ai.agent_active?"text-green-400":"text-yellow-500",children:ai.agent_active?"":""})]}),h.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[h.jsx("span",{className:"text-[#aaa]",children:"  "}),h.jsxs("span",{className:"text-primary",children:[ai.repair_count??0,""]})]}),ai.last_check&&h.jsxs("div",{className:"text-[7px] text-[#444] text-right italic",children:[" : ",new Date(ai.last_check).toLocaleTimeString()]})]})]}):h.jsx("div",{className:"text-[9px] text-[#555] italic",children:"   ..."}),h.jsxs("div",{className:"flex gap-1",children:[h.jsxs("button",{onClick:()=>{confirm("        ?")&&fetch(`${F}/api/install-skills?path=${encodeURIComponent(qc||$e||Ar)}`).then(w=>w.json()).then(w=>{oi(w.message),zn()})},className:"flex-1 py-1 bg-primary/10 hover:bg-primary/20 text-primary text-[9px] font-bold rounded border border-primary/20 transition-all flex items-center justify-center gap-1",children:[h.jsx(Ui,{className:"w-2.5 h-2.5"}),"  "]}),h.jsxs("button",{onClick:()=>{fetch(`${F}/api/hive/health/repair`).then(u=>u.json()).then(()=>{oi("       "),zn()})},className:"px-2 py-1 bg-green-500/10 hover:bg-green-500/20 text-green-400 text-[9px] font-bold rounded border border-green-500/20 transition-all flex items-center justify-center gap-1",title:"   ",children:[h.jsx(ur,{className:"w-2.5 h-2.5"}),"  "]})]})]}),cm.length>0&&h.jsxs("div",{className:"shrink-0 p-2 rounded border border-primary/20 bg-primary/5 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"text-[10px] font-bold text-primary flex items-center gap-1.5 uppercase tracking-tighter",children:[h.jsx(un,{className:"w-3.5 h-3.5"}),"   "]}),h.jsx("button",{onClick:Zc,className:"p-1 hover:bg-white/10 rounded transition-colors text-primary/60",children:h.jsx(is,{className:"w-2.5 h-2.5"})})]}),h.jsx("div",{className:"flex flex-col gap-1.5 max-h-32 overflow-y-auto custom-scrollbar pr-1",children:cm.map((u,w)=>h.jsxs("div",{className:"p-1.5 rounded bg-black/30 border border-white/5 flex flex-col gap-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-[10px] font-bold text-yellow-300",children:["#",u.keyword]}),h.jsxs("span",{className:"text-[8px] text-[#666]",children:[u.count," "]})]}),h.jsx("p",{className:"text-[8px] text-[#aaa] leading-tight",children:u.description}),h.jsx("button",{onClick:()=>US(u),className:"mt-1 py-0.5 bg-primary/20 hover:bg-primary/30 text-primary text-[8px] font-bold rounded transition-all",children:"  "})]},w))})]}),h.jsxs("div",{className:"shrink-0 flex items-center gap-2 px-1 py-1 bg-yellow-500/10 border border-yellow-500/20 rounded text-[9px] text-yellow-300",children:[h.jsx(Ui,{className:"w-3.5 h-3.5 shrink-0"}),h.jsx("span",{children:"AI        "})]}),Xc&&h.jsx("div",{className:"text-[9px] text-green-400 bg-green-500/10 border border-green-500/20 rounded px-2 py-1 font-mono truncate shrink-0",title:Xc,children:Xc}),["claude","gemini"].map(u=>{const w=Se==null?void 0:Se[u],N=IS[u]??!1,$=u==="claude"?"Claude Code":"Gemini CLI",te=u==="claude"?"border-[#3794ef]/30 bg-[#3794ef]/5":"border-blue-400/30 bg-blue-400/5",se=u==="claude"?"bg-[#3794ef]/20 text-[#3794ef]":"bg-blue-400/20 text-blue-300",$t=(w==null?void 0:w.repo)??"btsky99/vibe-coding ()",gt=(w==null?void 0:w.commands)??[];return h.jsxs("div",{className:`rounded border p-2.5 flex flex-col gap-2 ${w!=null&&w.installed?u==="claude"?"border-[#3794ef]/40 bg-[#3794ef]/8":"border-blue-400/40 bg-blue-400/8":"border-white/10 bg-white/2"}`,children:[h.jsxs("div",{className:"flex items-center gap-2",children:[w!=null&&w.installed?h.jsx(ts,{className:"w-4 h-4 text-green-400 shrink-0"}):h.jsx(su,{className:"w-4 h-4 text-[#555] shrink-0"}),h.jsx("span",{className:"text-[12px] font-bold text-white flex-1",children:$}),h.jsx("span",{className:`text-[8px] font-bold px-1.5 py-0.5 rounded ${se}`,children:w!=null&&w.installed?`v${w.version??"latest"}`:""})]}),h.jsx("p",{className:"text-[9px] text-[#666] pl-6 font-mono",children:$t}),(w==null?void 0:w.installed)&&w.skills.length>0&&h.jsx("div",{className:"pl-6 flex flex-wrap gap-1",children:w.skills.map(Gn=>h.jsx("span",{className:`text-[7px] px-1 py-0.5 rounded font-mono ${te}`,children:Gn},Gn))}),(w==null?void 0:w.installed)&&h.jsx("div",{className:"pl-6 flex flex-col gap-0.5",children:gt.map(Gn=>h.jsx("span",{className:"text-[8px] text-yellow-300/70 font-mono",children:Gn},Gn))}),h.jsxs("div",{className:"flex gap-1.5 pt-1",children:[w!=null&&w.installed?h.jsx("button",{onClick:()=>qS(u),disabled:N,className:"flex-1 py-1 text-[10px] font-bold rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",children:N?" ":""}):h.jsx("button",{onClick:()=>KS(u),disabled:N,className:"flex-1 py-1 text-[10px] font-bold rounded bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30 transition-colors disabled:opacity-50",children:N?" ":""}),h.jsx("button",{onClick:Br,className:"px-2 py-1 text-[10px] rounded bg-white/5 text-[#858585] hover:text-white transition-colors",title:" ",children:h.jsx(is,{className:"w-3 h-3"})})]})]},u)}),h.jsxs("div",{className:"shrink-0 mt-1 flex flex-col gap-0.5",children:[h.jsx("p",{className:"text-[9px] font-bold text-[#858585] uppercase tracking-wider mb-1",children:"     "}),ES.map(u=>{var se,$t;const w=((se=Se==null?void 0:Se.claude)==null?void 0:se.installed)??!1,N=(($t=Se==null?void 0:Se.gemini)==null?void 0:$t.installed)??!1,$=w?u.claudeCmd:N?u.geminiCmd:u.algo,te=w||N;return h.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-1.5 rounded hover:bg-white/5 border border-transparent hover:border-white/10 transition-all group",children:[h.jsx(Ui,{className:"w-2.5 h-2.5 text-yellow-400/60 shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("span",{className:"text-[9px] font-bold text-white/80 font-mono",children:u.name}),h.jsx("span",{className:"text-[8px] text-[#555] ml-1.5",children:u.desc})]}),h.jsxs("button",{onClick:()=>{(u.name==="master"||u.name==="brainstorm")&&!confirm(`[ ]

 ('${u.name}')  .
  ,  6       .

?`)||window.dispatchEvent(new CustomEvent(`vibe:inject:${Oo}`,{detail:{text:$}}))},className:"shrink-0 opacity-0 group-hover:opacity-100 flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[8px] font-bold transition-all bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/30",title:te?`MCP: ${$}`:"  ",children:[h.jsx(nu,{className:"w-2 h-2"}),te?"MCP":""]})]},u.name)}),h.jsx("p",{className:"text-[8px] text-[#444] mt-1 px-1",children:(Gm=Se==null?void 0:Se.claude)!=null&&Gm.installed||(Xm=Se==null?void 0:Se.gemini)!=null&&Xm.installed?" MCP     ":" MCP     "})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col gap-2.5 mb-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center justify-between px-1 mb-1.5",children:[h.jsx("span",{className:"text-[12px] font-bold text-[#858585] uppercase tracking-widest",children:"Workspace"}),h.jsx("button",{onClick:uh,className:"p-1.5 hover:bg-white/10 rounded text-primary transition-colors",title:"  ",children:h.jsx(ou,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("select",{value:Lm.includes($e)?$e:"",onChange:u=>{u.target.value==="browse"?uh():u.target.value&&zr(u.target.value)},className:"flex-1 bg-[#3c3c3c] border border-white/5 hover:border-white/20 rounded px-3 py-2 text-[13px] focus:outline-none transition-all cursor-pointer text-white font-medium shadow-sm",children:[h.jsx("option",{value:"",disabled:!0,children:" ..."}),Lm.map(u=>h.jsx("option",{value:u,children:u.split("/").pop()||u},u)),h.jsx("option",{value:"divider",disabled:!0,children:""}),h.jsx("option",{value:"browse",children:"  ..."})]}),h.jsx("button",{onClick:()=>Cb(u=>!u),className:`p-2 rounded-lg border text-[12px] font-bold transition-all shrink-0 ${Yn?"bg-primary/20 border-primary/40 text-primary":"bg-[#3c3c3c] border-white/10 text-[#858585] hover:text-white"}`,title:Yn?"  ":"  ",children:Yn?"":""})]}),h.jsxs("select",{value:Dm.find(u=>$e.startsWith(u))||"",onChange:u=>zr(u.target.value),className:"w-full bg-white/5 border border-transparent hover:border-white/10 rounded px-2.5 py-1.5 text-[11px] focus:outline-none transition-all cursor-pointer text-[#858585]",children:[h.jsx("option",{value:"",disabled:!0,children:" ..."}),Dm.map(u=>h.jsx("option",{value:u,children:u},u))]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto space-y-1 custom-scrollbar border-t border-white/5 pt-3",onContextMenu:u=>u.preventDefault(),children:[h.jsxs("div",{className:"flex items-center gap-1 px-3 mb-2",children:[h.jsxs("button",{onClick:kb,className:"flex-1 flex items-center justify-center gap-1.5 py-1.5 bg-white/5 hover:bg-white/10 rounded text-[11px] text-[#cccccc] transition-colors",title:"  ",children:[h.jsx(SN,{className:"w-3.5 h-3.5"})," "]}),h.jsxs("button",{onClick:Eb,className:"flex-1 flex items-center justify-center gap-1.5 py-1.5 bg-white/5 hover:bg-white/10 rounded text-[11px] text-[#cccccc] transition-colors",title:"  ",children:[h.jsx(kN,{className:"w-3.5 h-3.5"})," "]}),h.jsx("button",{onClick:Gt,className:"p-1.5 bg-white/5 hover:bg-white/10 rounded text-[#858585] hover:text-white transition-colors",title:"",children:h.jsx(is,{className:"w-3.5 h-3.5"})})]}),h.jsxs("button",{onClick:Tb,className:"w-full flex items-center gap-2.5 px-3 py-1.5 hover:bg-[#2a2d2e] rounded text-[13px] transition-colors group",children:[h.jsx(Mw,{className:"w-5 h-5 text-[#3794ef] group-hover:-translate-x-1 transition-transform"})," .."]}),Yn?Am.map(u=>h.jsx(TS,{item:u,depth:0,expanded:Da,treeChildren:Bm,onToggle:$m,onFileOpen:zm,onDelete:Im,onContextMenu:Mm,isRenaming:z,newNameDraft:V,setNewNameDraft:W,onRenameSubmit:jm,setIsRenaming:I},u.path)):Am.map(u=>h.jsxs("div",{className:`group flex items-center gap-0 px-3 py-1 rounded text-[13px] transition-colors relative ${C===u.path?"bg-primary/20 border-l-2 border-primary":"hover:bg-[#2a2d2e]"}`,onContextMenu:w=>Mm(w,u.path,u.isDir),children:[h.jsxs("button",{onClick:()=>zm(u),className:`flex-1 flex items-center gap-2.5 py-1 overflow-hidden ${u.isDir?"text-[#cccccc]":"text-[#ffffff] font-medium"}`,children:[u.isDir?h.jsx(Aw,{className:"w-5 h-5 text-[#dcb67a] shrink-0"}):Vc(u.name),z===u.path?h.jsx("input",{autoFocus:!0,value:V,onChange:w=>W(w.target.value),onKeyDown:w=>{w.key==="Enter"&&jm(u.path,V),w.key==="Escape"&&I(null)},onBlur:()=>I(null),className:"bg-[#1e1e1e] border border-primary rounded px-1 py-0.5 text-xs text-white outline-none w-full",onClick:w=>w.stopPropagation()}):h.jsx("span",{className:"truncate",children:u.name})]}),h.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-all",children:[!u.isDir&&h.jsx("button",{onClick:w=>{w.stopPropagation(),window.dispatchEvent(new CustomEvent(`vibe:fillInput:${Oo}`,{detail:{text:u.path}}))},className:"p-1 hover:bg-white/10 rounded text-primary transition-all shrink-0",title:"   ",children:h.jsx(jw,{className:"w-3 h-3"})}),h.jsx("button",{onClick:w=>{w.stopPropagation(),fetch(`${F}/api/copy-path?path=${encodeURIComponent(u.path)}`).then(N=>N.json()).then(N=>{if(N.status==="success"){const $=w.currentTarget,te=$.innerHTML;$.innerHTML='<span class="text-[8px] text-green-400">Copied!</span>',setTimeout(()=>$.innerHTML=te,1500)}})},className:"p-1 hover:bg-white/10 rounded text-[#858585] hover:text-primary transition-all shrink-0",title:" ",children:h.jsx(kl,{className:"w-3 h-3"})}),h.jsx("button",{onClick:w=>{w.stopPropagation(),Im(u.path,u.name)},className:"p-1 hover:bg-red-500/20 text-[#858585] hover:text-red-500 rounded transition-all shrink-0",title:"",children:h.jsx(dr,{className:"w-3 h-3"})})]})]},u.path))]})]})})]}),h.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[h.jsxs("header",{className:"h-9 bg-[#2d2d2d] border-b border-black/40 flex items-center justify-between px-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2 overflow-hidden mr-4",children:[!i&&h.jsx("button",{onClick:()=>s(!0),className:"p-1 hover:bg-white/10 rounded",children:h.jsx(k0,{className:"w-4 h-4"})}),h.jsx("div",{className:"text-[11px] text-[#969696] truncate font-mono flex items-center",children:$e.split("/").filter(Boolean).map((u,w)=>h.jsxs("span",{className:"flex items-center",children:[h.jsx(qp,{className:"w-3 h-3 mx-1 text-white/20"}),u]},w))})]}),h.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[h.jsx("button",{onClick:Gt,className:"p-1.5 hover:bg-white/10 rounded text-primary hover:text-white transition-all hover:rotate-180 duration-500",title:"Refresh Files",children:h.jsx(is,{className:"w-4 h-4"})}),h.jsx("div",{className:"flex items-center gap-1 bg-black/30 rounded-md p-0.5 ml-1 border border-white/5 flex-wrap",children:["1","2","3","4","2x2","6","8"].map(u=>h.jsx("button",{onClick:()=>f(u),className:`px-1.5 h-5 rounded text-[10px] font-bold transition-all ${d===u?"bg-primary text-white":"hover:bg-white/5 text-[#858585]"}`,title:u==="4"?"4  ( 4)":u==="2x2"?"4  (22 )":u==="6"?"6  (32 )":u==="8"?"8  (42 )":`${u} `,children:u},u))})]})]}),h.jsx("main",{className:"flex-1 p-2 overflow-hidden bg-[#1e1e1e]",children:h.jsx("div",{className:`h-full w-full gap-2 grid ${d==="1"?"grid-cols-1":d==="2"?"grid-cols-2":d==="3"?"grid-cols-3":d==="4"?"grid-cols-4":d==="2x2"?"grid-cols-2 grid-rows-2":d==="6"?"grid-cols-3 grid-rows-2":"grid-cols-4 grid-rows-2"}`,children:Pb.map(u=>{var w,N;return h.jsx(H8,{slotId:u,logs:_,currentPath:$e,terminalCount:m,locks:y,messages:T,tasks:_e,claudeSpInstalled:((w=Se==null?void 0:Se.claude)==null?void 0:w.installed)??!1,geminiSpInstalled:((N=Se==null?void 0:Se.gemini)==null?void 0:N.installed)??!1,contextSessions:cb,geminiContextSessions:ub},u)})})})]}),h.jsx(O8,{thoughts:HS})]}),oh.map((u,w)=>h.jsx(F8,{file:u,idx:w,bringToFront:ch,closeFile:lb},u.id))]})}function NS({content:e,fontSize:t="12px"}){const i=e.split(`
`),s=String(i.length).length;return h.jsx("div",{className:"font-mono leading-relaxed",style:{fontSize:t},children:i.map((r,n)=>h.jsxs("div",{className:"flex hover:bg-white/5 group",children:[h.jsx("span",{className:"shrink-0 text-right pr-3 select-none text-[#858585] group-hover:text-[#aaaaaa] border-r border-white/10 mr-3 transition-colors",style:{minWidth:`${s+1}ch`},children:n+1}),h.jsx("span",{className:"flex-1 whitespace-pre text-[#cccccc]",children:r})]},n))})}function TS({item:e,depth:t,expanded:i,treeChildren:s,onToggle:r,onFileOpen:n,onDelete:o,onContextMenu:a,isRenaming:l,newNameDraft:c,setNewNameDraft:d,onRenameSubmit:f,setIsRenaming:p}){const m=i[e.path]||!1,_=s[e.path]||[],v=t*12,b=l===e.path;return e.isDir?h.jsxs("div",{className:"group/node",children:[h.jsxs("div",{className:"flex items-center hover:bg-[#2a2d2e] rounded transition-colors pr-2",onContextMenu:g=>a(g,e.path,!0),children:[h.jsx("button",{onClick:g=>{g.stopPropagation(),r(e.path)},style:{paddingLeft:`${v+6}px`},className:"flex items-center py-1 px-1 text-[#858585] hover:text-white shrink-0",children:m?h.jsx(Pw,{className:"w-3.5 h-3.5"}):h.jsx(qp,{className:"w-3.5 h-3.5"})}),h.jsxs("button",{onClick:()=>n(e),className:"flex-1 flex items-center gap-1.5 py-1 text-[13px] text-[#cccccc] overflow-hidden",children:[m?h.jsx(Rw,{className:"w-5 h-5 text-[#dcb67a] shrink-0"}):h.jsx(Aw,{className:"w-5 h-5 text-[#dcb67a] shrink-0"}),b?h.jsx("input",{autoFocus:!0,value:c,onChange:g=>d(g.target.value),onKeyDown:g=>{g.key==="Enter"&&f(e.path,c),g.key==="Escape"&&p(null)},onBlur:()=>p(null),className:"bg-[#1e1e1e] border border-primary rounded px-1 py-0.5 text-xs text-white outline-none w-full",onClick:g=>g.stopPropagation()}):h.jsx("span",{className:"truncate",children:e.name})]}),h.jsx("button",{onClick:g=>{g.stopPropagation(),o(e.path,e.name)},className:"opacity-0 group-hover/node:opacity-100 p-1 hover:bg-red-500/20 text-[#858585] hover:text-red-500 rounded transition-all",title:" ",children:h.jsx(dr,{className:"w-3.5 h-3.5"})})]}),m&&_.length===0&&h.jsx("div",{style:{paddingLeft:`${v+32}px`},className:"py-1 text-[11px] text-[#858585] italic",children:" "}),m&&_.map(g=>h.jsx(TS,{item:g,depth:t+1,expanded:i,treeChildren:s,onToggle:r,onFileOpen:n,onDelete:o,onContextMenu:a,isRenaming:l,newNameDraft:c,setNewNameDraft:d,onRenameSubmit:f,setIsRenaming:p},g.path))]}):h.jsxs("div",{className:"group/node flex items-center hover:bg-primary/20 rounded transition-colors pr-2",onContextMenu:g=>a(g,e.path,!1),children:[h.jsxs("button",{onClick:()=>n(e),style:{paddingLeft:`${v+24}px`},className:"flex-1 flex items-center gap-2.5 py-1 text-[13px] text-white overflow-hidden",children:[Vc(e.name),b?h.jsx("input",{autoFocus:!0,value:c,onChange:g=>d(g.target.value),onKeyDown:g=>{g.key==="Enter"&&f(e.path,c),g.key==="Escape"&&p(null)},onBlur:()=>p(null),className:"bg-[#1e1e1e] border border-primary rounded px-1 py-0.5 text-xs text-white outline-none w-full",onClick:g=>g.stopPropagation()}):h.jsx("span",{className:"truncate font-medium text-left",children:e.name})]}),h.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/node:opacity-100 transition-all",children:[h.jsx("button",{onClick:g=>{g.stopPropagation(),window.dispatchEvent(new CustomEvent(`vibe:fillInput:${Oo}`,{detail:{text:e.path}}))},className:"p-1 hover:bg-white/20 rounded text-primary transition-all shrink-0",title:"   ",children:h.jsx(jw,{className:"w-3.5 h-3.5"})}),h.jsx("button",{onClick:g=>{g.stopPropagation(),o(e.path,e.name)},className:"p-1 hover:bg-red-500/20 text-[#858585] hover:text-red-500 rounded transition-all shrink-0",title:" ",children:h.jsx(dr,{className:"w-3.5 h-3.5"})})]})]})}function z8({diff:e}){const t=e.split(`
`);return h.jsx("div",{className:"font-mono text-[11px] leading-relaxed",children:t.map((i,s)=>{let r="",n="text-[#cccccc]";return i.startsWith("+")&&!i.startsWith("+++")?(r="bg-green-500/20",n="text-green-400"):i.startsWith("-")&&!i.startsWith("---")?(r="bg-red-500/20",n="text-red-400"):i.startsWith("@@")&&(n="text-primary opacity-70",r="bg-primary/5"),h.jsx("div",{className:`${r} ${n} px-2 whitespace-pre-wrap`,children:i},s)})})}function F8({file:e,idx:t,bringToFront:i,closeFile:s}){const[r,n]=S.useState({x:100+t*30,y:100+t*30}),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=S.useRef({x:0,y:0}),f=v=>{o||(c(!0),i(e.id),d.current={x:v.clientX-r.x,y:v.clientY-r.y},v.currentTarget.setPointerCapture(v.pointerId))},p=v=>{l&&!o&&n({x:v.clientX-d.current.x,y:v.clientY-d.current.y})},m=v=>{c(!1),v.currentTarget.releasePointerCapture(v.pointerId)},_=v=>{v.stopPropagation(),a(!o),i(e.id)};return h.jsxs("div",{onPointerDown:()=>i(e.id),style:{zIndex:e.zIndex,left:o?0:r.x,top:o?0:r.y,width:o?"100%":void 0,height:o?"100%":void 0,resize:o?"none":"both",overflow:"hidden",borderRadius:o?0:"12px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)"},className:`absolute ${o?"w-full h-full":"w-[550px] h-[500px]"} min-w-[300px] min-h-[200px] bg-[#1e1e1e]/95 backdrop-blur-xl border border-white/20 shadow-2xl flex flex-col`,children:[h.jsxs("div",{className:`h-10 bg-[#2d2d2d]/90 border-b border-white/10 flex items-center justify-between px-4 shrink-0 ${o?"cursor-default":"cursor-move"} select-none`,onPointerDown:f,onPointerMove:p,onPointerUp:m,children:[h.jsxs("div",{className:"flex items-center gap-2 text-[#cccccc] font-mono text-sm truncate pointer-events-none",children:[Vc(e.name),e.name]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:_,onPointerDownCapture:v=>v.stopPropagation(),className:"p-1 hover:bg-white/10 rounded text-[#cccccc] transition-colors cursor-pointer",title:o?"Restore":"Maximize",children:o?h.jsx(ON,{className:"w-4 h-4"}):h.jsx(LN,{className:"w-4 h-4"})}),h.jsx("button",{onClick:v=>{v.stopPropagation(),s(e.id)},onPointerDownCapture:v=>v.stopPropagation(),className:"p-1 hover:bg-white/10 rounded text-[#cccccc] transition-colors cursor-pointer",title:"Close",children:h.jsx(aa,{className:"w-5 h-5"})})]})]}),h.jsx("div",{className:"flex-1 overflow-auto bg-transparent relative custom-scrollbar",onPointerDownCapture:v=>v.stopPropagation(),children:e.isLoading?h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[#858585] animate-pulse",children:"Loading content..."}):/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)$/i.test(e.name)?h.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:h.jsx("img",{src:`${F}/api/image-file?path=${encodeURIComponent(e.path)}`,alt:e.name,className:"max-w-full max-h-full object-contain"})}):h.jsx("div",{className:"p-2",children:h.jsx(NS,{content:e.content,fontSize:"12px"})})})]})}function H8({slotId:e,logs:t,currentPath:i,terminalCount:s,locks:r,messages:n,tasks:o,claudeSpInstalled:a,geminiSpInstalled:l,contextSessions:c,geminiContextSessions:d}){var ka;const f=S.useRef(null),p=S.useRef(null),m=S.useRef(null),_=S.useRef(null),v=S.useRef(null),b=S.useRef(null),g=S.useRef(null),[y,x]=S.useState(!1),[C,k]=S.useState(33),[T,L]=S.useState(!1),[P,q]=S.useState("");S.useEffect(()=>{const D=X=>{var J;if(!T)return;const ne=(J=p.current)==null?void 0:J.closest(".h-full.bg-\\[\\#252526\\]");if(ne){const he=ne.getBoundingClientRect(),re=(X.clientY-he.top)/he.height*100;re>10&&re<85&&k(re)}},Z=()=>L(!1);return T?(window.addEventListener("mousemove",D),window.addEventListener("mouseup",Z),document.body.style.cursor="row-resize"):document.body.style.cursor="default",()=>{window.removeEventListener("mousemove",D),window.removeEventListener("mouseup",Z)}},[T]);const[H,ee]=S.useState(""),R=S.useRef(!1),[M,z]=S.useState(()=>{try{const D=localStorage.getItem("hive_shortcuts");return D?JSON.parse(D):xu}catch{return xu}}),[I,V]=S.useState(!1),[W,E]=S.useState(!1),[B,U]=S.useState(!1),[Q,oe]=S.useState(null),[je,xe]=S.useState(""),[Ye,_e]=S.useState(!1),[De,ri]=S.useState(!1),[qt,vs]=S.useState(""),[Yt,pt]=S.useState([]),[fe,ys]=S.useState(!1),Js=P==="gemini",we=Js?d[e]??null:c[e]??null,Bi=Js?1e6:2e5,xi=we?Math.round(we.input_tokens/Bi*100):0,Ca=(()=>{if(!(we!=null&&we.last_ts))return"";const D=Math.floor((Date.now()-new Date(we.last_ts).getTime())/1e3);return D<60?`${D} `:D<3600?`${Math.floor(D/60)} `:D<86400?`${Math.floor(D/3600)} `:`${Math.floor(D/86400)} `})();S.useEffect(()=>{const D=new EventSource(`${F}/api/events/fs`);return D.onmessage=Z=>{try{const X=JSON.parse(Z.data);if(X.type!=="fs_change")return;const ne=X.path,J=X.event||"modified";pt(he=>{const re=he.filter(me=>me.path!==ne);return[{path:ne,eventType:J,ts:Date.now(),added:0,removed:0,hunks:[]},...re].slice(0,8)}),J!=="deleted"&&fetch(`${F}/api/git/diff?path=${encodeURIComponent(ne)}&git_path=${encodeURIComponent(i)}`).then(he=>he.json()).then(he=>{if(!he.diff)return;let re=0,mt=0;const me=[];he.diff.split(`
`).forEach(Te=>{if(Te.startsWith("+")&&!Te.startsWith("+++"))re++;else if(Te.startsWith("-")&&!Te.startsWith("---"))mt++;else if(Te.startsWith("@@")){const Pt=Te.match(/@@ [+-]\d+(?:,\d+)? [+-](\d+)/);Pt&&me.push(`L${Pt[1]}`)}}),pt(Te=>Te.map(Pt=>Pt.path===ne?{...Pt,added:re,removed:mt,hunks:me}:Pt))}).catch(()=>{}),e===0&&oe(ne)}catch{}},()=>D.close()},[e,i]);const Pr=(ka=Object.entries(r).find(([D,Z])=>Z===P))==null?void 0:ka[0],Mr=y?o.filter(D=>(D.assigned_to===P||D.assigned_to==="all")&&D.status!=="done"):[],wi=y?n.filter(D=>{const Z=D.to===P||D.to==="all",X=Date.now()-new Date(D.timestamp).getTime()<10*60*1e3;return Z&&X}):[],xs=D=>{z(D),localStorage.setItem("hive_shortcuts",JSON.stringify(D))},Si=(D,Z=!1)=>{x(!0),q(D),setTimeout(()=>{if(!p.current)return;const X=new N8({theme:{background:"#1e1e1e",foreground:"#cccccc",cursor:"#3794ef",selectionBackground:"#3794ef55"},fontFamily:"'Fira Code', 'Consolas', monospace",fontSize:12,cursorBlink:!0}),ne=new M8;X.loadAddon(ne),X.loadAddon(new B8((me,Te)=>{window.open(Te,"_blank")})),X.open(p.current),ne.fit(),m.current=X,X.onSelectionChange(()=>{X.hasSelection()&&navigator.clipboard.writeText(X.getSelection())}),p.current.addEventListener("contextmenu",async me=>{me.preventDefault();try{const Te=await navigator.clipboard.readText();_.current&&_.current.readyState===WebSocket.OPEN&&_.current.send(Te)}catch(Te){console.error("Failed to paste from clipboard",Te)}}),b.current=ne,X.onResize(({cols:me,rows:Te})=>{_.current&&_.current.readyState===WebSocket.OPEN&&_.current.send(JSON.stringify({type:"resize",cols:me,rows:Te}))});const J=p.current.parentElement;if(J){const me=new ResizeObserver(()=>ne.fit());me.observe(J),g.current=me}const he=new URLSearchParams({agent:D,cwd:i,cols:X.cols.toString(),rows:X.rows.toString(),yolo:Z.toString()}),re=new WebSocket(`ws://${window.location.hostname}:${I8}/pty/slot${e}?${he.toString()}`);_.current=re,re.onopen=()=>{const me=Z?"\x1B[38;5;196m[YOLO MODE]\x1B[0m":"\x1B[38;5;34m[NORMAL MODE]\x1B[0m";X.write(`\r
\x1B[38;5;39m[HIVE] ${D.toUpperCase()} ${me}   \x1B[0m\r
\x1B[38;5;244m> CWD: ${i}\x1B[0m\r
\r
`)},re.onmessage=async me=>{const Te=me.data instanceof Blob?await me.data.text():me.data;X.write(Te);const Pt=/\x1b\][\s\S]*?(?:\x1b\\|\x07)|\x1b[PX^_][\s\S]*?\x1b\\|[\x1b\x9b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><~]/g,Dr=Te.replace(Pt,"").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,""),Lr=/(?:[a-zA-Z]:[\\\/](?:[\w.\-]+[\\\/])*[\w.\-]+|(?:[\w.\-]+[\\\/])+[\w.\-]+)\.(?:jsx?|tsx?|py|css|html?|md|json|ya?ml|toml|cfg|ini|sh|bat|ps1|vue|svelte)/g,ot=Dr.match(Lr);if(ot&&ot.length>0){const On=ot[ot.length-1];oe(On)}},X.onData(me=>re.readyState===WebSocket.OPEN&&re.send(me));const mt=()=>ne.fit();return window.addEventListener("resize",mt),p.current._handleResize=mt,()=>{window.removeEventListener("resize",mt)}},50)};S.useEffect(()=>{let D;const Z=Q?/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)$/i.test(Q):!1;if(Q&&!Z){const X=()=>{const ne=Q.includes(":")||Q.startsWith("/")?Q:`${i}/${Q}`;De&&fetch(`${F}/api/git/diff?path=${encodeURIComponent(Q)}&git_path=${encodeURIComponent(i)}`).then(J=>J.json()).then(J=>{J.diff!==void 0&&vs(J.diff)}).catch(()=>{}),B&&(_e(!0),fetch(`${F}/api/read-file?path=${encodeURIComponent(ne)}`).then(J=>J.json()).then(J=>{J.error||xe(J.content)}).catch(()=>{}).finally(()=>_e(!1)))};X(),D=setInterval(X,3e3)}return()=>clearInterval(D)},[B,De,Q,i]),S.useEffect(()=>{if(!b.current)return;const D=setTimeout(()=>{var X;return(X=b.current)==null?void 0:X.fit()},100),Z=setTimeout(()=>{var X;return(X=b.current)==null?void 0:X.fit()},350);return()=>{clearTimeout(D),clearTimeout(Z)}},[B,C]);const Wc=()=>{var D;if(x(!1),U(!1),b.current=null,p.current){const Z=p.current;Z._handleResize&&(window.removeEventListener("resize",Z._handleResize),delete Z._handleResize)}(D=g.current)==null||D.disconnect(),g.current=null,_.current&&_.current.close(),m.current&&m.current.dispose()},nt=D=>{if(!_.current||_.current.readyState!==WebSocket.OPEN)return;const Z=D.replace(/[\r\n]+$/,"");Z&&(_.current.send(Z.replace(/\n/g,"\r")),_.current.send("\r"),ee(""),setTimeout(()=>{var X;return(X=m.current)==null?void 0:X.focus()},10))};S.useEffect(()=>{var ne;const D=J=>{const{text:he}=J.detail;nt(he)},Z=()=>window.dispatchEvent(new CustomEvent("vibe:activeSlot",{detail:{slotId:e}}));(ne=p.current)==null||ne.addEventListener("click",Z),window.addEventListener(`vibe:inject:${e}`,D);const X=J=>{const{text:he}=J.detail;ee(re=>re?`${re} "${he}"`:he),setTimeout(()=>{var re;return(re=v.current)==null?void 0:re.focus()},10)};return window.addEventListener(`vibe:fillInput:${e}`,X),()=>{var J;window.removeEventListener(`vibe:inject:${e}`,D),window.removeEventListener(`vibe:fillInput:${e}`,X),(J=p.current)==null||J.removeEventListener("click",Z)}},[e]);const jr=t.filter(D=>{let Z=0;for(let X=0;X<D.terminal_id.length;X++)Z=(Z<<5)-Z+D.terminal_id.charCodeAt(X);return Math.abs(Z)%s===e});return S.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[jr.length]),h.jsxs("div",{className:"h-full bg-[#252526] border border-black/40 rounded-md flex flex-col overflow-hidden shadow-inner relative",children:[h.jsxs("div",{className:"h-7 bg-[#2d2d2d] border-b border-black/40 flex items-center justify-between px-3 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2 max-w-[60%] overflow-hidden",children:[h.jsx(Ao,{className:"w-3 h-3 text-accent shrink-0"}),h.jsx("span",{className:"text-[10px] font-bold text-[#bbbbbb] uppercase tracking-wider truncate",children:y?` ${e+1} - ${P}`:` ${e+1}`}),Pr&&h.jsxs("div",{className:"flex items-center gap-1.5 ml-2 px-1.5 py-0.5 bg-yellow-500/10 border border-yellow-500/30 rounded text-[9px] text-yellow-500 animate-pulse shrink-0",children:[h.jsx(Ui,{className:"w-2.5 h-2.5"}),h.jsxs("span",{className:"font-mono",children:["LOCK: ",Pr.split(/[\\\/]/).pop()]})]}),Mr.length>0&&h.jsxs("div",{className:"flex items-center gap-1 ml-1 px-1.5 py-0.5 bg-yellow-500/10 border border-yellow-500/30 rounded text-[9px] text-yellow-400 shrink-0",title:Mr.map(D=>D.title).join(", "),children:[h.jsx(kl,{className:"w-2.5 h-2.5"}),h.jsxs("span",{children:[Mr.length," "]})]}),wi.length>0&&h.jsxs("div",{className:"flex items-center gap-1 ml-1 px-1.5 py-0.5 bg-primary/10 border border-primary/30 rounded text-[9px] text-primary shrink-0 animate-pulse",title:wi[wi.length-1].content,children:[h.jsx(Od,{className:"w-2.5 h-2.5"}),h.jsxs("span",{children:[wi.length," "]})]})]}),h.jsx("div",{className:"flex items-center gap-1.5",children:y?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>{B||U(!0),ri(!De)},className:`px-2 py-0.5 rounded text-[9px] border transition-all font-bold ${De?"bg-accent/40 border-accent text-white":"bg-[#3c3c3c] border-white/5 text-[#cccccc] hover:bg-white/10"}`,title:"Git (Diff) ",children:" Diff"}),h.jsx("button",{onClick:()=>U(!B),className:`px-2 py-0.5 rounded text-[9px] border transition-all font-bold ${B?"bg-primary/40 border-primary text-white":"bg-[#3c3c3c] border-white/5 text-[#cccccc] hover:bg-white/10"}`,title:"    ",children:"  "}),h.jsx("button",{onClick:Wc,className:"p-0.5 hover:bg-red-500/20 rounded text-red-400 transition-colors",children:h.jsx(aa,{className:"w-3.5 h-3.5"})})]}):h.jsx("span",{className:"text-[9px] text-[#858585] font-bold mr-1",children:"   ..."})})]}),(()=>{const D=(we==null?void 0:we.cache_read)??0,Z=(we==null?void 0:we.cache_write)??0,X=(we==null?void 0:we.input_tokens)??0,ne=(we==null?void 0:we.output_tokens)??0,J=Math.max(0,Bi-X),he=Math.min(100,D/Bi*100),re=Math.min(100,Z/Bi*100),mt=Math.max(0,xi-he-re),me=Math.max(0,100-xi),Te=xi>=80?"bg-red-950/30 border-red-500/15":xi>=60?"bg-yellow-950/30 border-yellow-500/15":"bg-[#0d1117] border-white/5",Pt=xi>=80?"#f87171":xi>=60?"#facc15":"#a3e635",Dr=we?we.model.replace(/^claude-/,"").replace(/^gemini-/,"Gemini ").replace(/-(\d)/," $1").replace(/-latest$/,"").replace(/-\d{8}$/,"").replace(/\b\w/g,We=>We.toUpperCase()):Js?"Gemini":"Claude",Lr=Bi>=1e6?`${Bi/1e6}M`:`${Bi/1e3}k`,ot=`${Math.round(X/1e3)}k`,On=We=>{const ni=We+1;return ni<=he?"#22d3ee":ni<=he+re?"#4ade80":ni<=he+re+mt?"#fbbf24":"#1e2130"},Kc=[{label:" ",tok:Math.max(0,X-D-Z),pct:mt,color:"#fbbf24"},...Z>0?[{label:" ",tok:Z,pct:re,color:"#4ade80"}]:[],...D>0?[{label:" ",tok:D,pct:he,color:"#22d3ee"}]:[],{label:" ",tok:ne,pct:Math.round(ne/Bi*100),color:"#888"},{label:" ",tok:J,pct:me,color:"#2a2d3a",dim:!0}],qc=We=>We>=1e3?`${(We/1e3).toFixed(1)}k`:`${We}`;return h.jsxs("div",{className:"relative shrink-0",children:[h.jsxs("div",{className:`border-b px-3 py-[3px] flex items-center gap-2 font-mono text-[10px] overflow-hidden cursor-pointer select-none transition-colors hover:brightness-110 ${Te}`,onClick:()=>ys(We=>!We),title:"   ",children:[h.jsx("div",{className:"flex shrink-0 leading-none",children:Array.from({length:20},(We,ni)=>{const Rr=(ni+1)*5,Oi=Rr<=he?"#22d3ee":Rr<=he+re?"#4ade80":Rr<=xi?"#fbbf24":"#2a2d3a";return h.jsx("span",{style:{color:Oi,fontSize:11,letterSpacing:"-0.5px"},children:""},ni)})}),h.jsxs("div",{className:"flex items-center gap-0 whitespace-nowrap flex-1 min-w-0",children:[h.jsx("span",{className:"font-semibold",style:{color:Pt},children:Dr}),h.jsx("span",{className:"text-[#444] mx-1.5",children:""}),h.jsxs("span",{className:"text-[#ccc]",children:[ot,"/",Lr,"  (",xi,"%)"]}),we&&Ca&&h.jsx("span",{className:"text-[#333] ml-2 text-[9px]",children:Ca}),h.jsx("span",{className:"ml-auto text-[#333] text-[8px]",children:fe?"":""})]}),!we&&h.jsxs("span",{className:"text-[9px] text-[#333] italic",children:[Js?"Gemini CLI":"Claude Code","   ..."]})]}),fe&&we&&h.jsxs("div",{className:"absolute top-full left-0 right-0 z-50 bg-[#0d1117] border-b border-x border-white/10 shadow-2xl font-mono text-[10px] px-3 pt-2 pb-3 space-y-2",children:[h.jsx("div",{className:"text-[#ccc] font-bold text-[11px]",children:" "}),h.jsx("div",{className:"flex flex-col gap-[2px]",children:Array.from({length:10},(We,ni)=>h.jsx("div",{className:"flex gap-[2px]",children:Array.from({length:10},(Rr,Oi)=>h.jsx("span",{style:{color:On(ni*10+Oi),fontSize:11,lineHeight:1},children:""},Oi))},ni))}),h.jsxs("div",{className:"pt-1 space-y-[3px]",children:[h.jsx("div",{className:"text-[#444] text-[9px] mb-1",children:" "}),Kc.map(We=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{style:{color:We.color},children:""}),h.jsxs("span",{style:{color:We.dim?"#444":"#666"},children:[We.label,":"]}),h.jsx("span",{style:{color:We.dim?"#333":"#bbb"},className:"ml-auto",children:qc(We.tok)}),h.jsxs("span",{className:"text-[#444] w-9 text-right",children:["(",Math.round(We.pct),"%)"]})]},We.label))]})]})]})})(),y?h.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-[#1e1e1e]",children:[Yt.length>0&&h.jsxs("div",{className:"shrink-0 border-b border-white/5 bg-[#161616] px-2 py-1 flex flex-col gap-[2px] max-h-[75px] overflow-y-auto custom-scrollbar",children:[h.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[h.jsx("span",{className:"text-[8px] text-[#444] uppercase tracking-widest font-bold",children:" "}),h.jsx("button",{onClick:()=>pt([]),className:"text-[8px] text-[#333] hover:text-[#666] transition-colors",title:" ",children:""})]}),Yt.map(D=>{const Z=D.path.split("/").pop()||D.path,X=D.eventType==="created"?"+":D.eventType==="deleted"?"D":"M",ne=D.eventType==="created"?"text-emerald-400":D.eventType==="deleted"?"text-red-400":"text-yellow-400",J=Math.floor((Date.now()-D.ts)/1e3),he=J<60?`${J}s`:J<3600?`${Math.floor(J/60)}m`:`${Math.floor(J/3600)}h`;return h.jsxs("button",{onClick:()=>{oe(D.path),U(!0),ri(D.eventType!=="created")},className:"flex items-center gap-1.5 text-left hover:bg-white/5 rounded px-1 py-[1px] group transition-colors w-full min-w-0",title:D.path,children:[h.jsx("span",{className:`text-[9px] font-bold w-3 shrink-0 ${ne}`,children:X}),h.jsx("span",{className:"text-[10px] text-[#ccc] font-mono truncate flex-1 group-hover:text-white",children:Z}),D.hunks.length>0&&h.jsxs("span",{className:"text-[8px] text-[#555] shrink-0 font-mono",children:[D.hunks.slice(0,2).join(" "),D.hunks.length>2?` +${D.hunks.length-2}`:""]}),(D.added>0||D.removed>0)&&h.jsxs("span",{className:"text-[8px] shrink-0 font-mono",children:[D.added>0&&h.jsxs("span",{className:"text-emerald-500",children:["+",D.added]}),D.removed>0&&h.jsxs("span",{className:"text-red-500 ml-0.5",children:["-",D.removed]})]}),h.jsx("span",{className:"text-[8px] text-[#333] shrink-0",children:he})]},D.path)})]}),B&&h.jsxs("div",{className:"border-b border-black/40 bg-[#1a1a1a] flex flex-col shrink-0 relative",style:{height:`${C}%`,minHeight:"100px",maxHeight:"85%",overflow:"hidden"},children:[h.jsxs("div",{className:"h-6 bg-[#2d2d2d] px-2 flex items-center justify-between text-[10px] text-[#cccccc] shrink-0 border-b border-white/5 pointer-events-none",children:[h.jsxs("span",{className:"truncate flex items-center gap-1 opacity-80 pointer-events-auto",children:[Vc(Q||""),Q||"  ..."]}),Ye&&h.jsx("span",{className:"text-[#3794ef] animate-pulse pointer-events-auto",children:""})]}),h.jsx("div",{className:"flex-1 overflow-auto p-2 custom-scrollbar flex items-center justify-center",children:Q&&/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)$/i.test(Q)?h.jsx("img",{src:`${F}/api/image-file?path=${encodeURIComponent(Q.includes(":")||Q.startsWith("/")?Q:`${i}/${Q}`)}`,alt:Q,className:"max-w-full max-h-full object-contain",style:{imageRendering:"auto"}}):De?qt?h.jsx(z8,{diff:qt}):h.jsx("span",{className:"text-[10px] text-[#858585] italic",children:"   (Clean)"}):je?h.jsx(NS,{content:je,fontSize:"11px"}):h.jsx("span",{className:"font-mono text-[11px] text-[#cccccc] italic opacity-40",children:"       ..."})}),h.jsx("div",{onMouseDown:D=>{D.stopPropagation(),L(!0)},className:`absolute bottom-0 left-0 w-full h-1 cursor-row-resize hover:bg-primary/50 transition-colors z-20 ${T?"bg-primary/50":""}`})]}),h.jsx("div",{className:"flex-1 relative min-h-0 overflow-hidden",children:h.jsx("div",{ref:p,className:"absolute inset-0 p-2"})}),h.jsxs("div",{className:"p-2 border-t border-black/40 bg-[#252526] shrink-0 flex flex-col gap-2 z-10",children:[h.jsxs("div",{className:"flex gap-1.5 overflow-x-auto custom-scrollbar pb-0.5 opacity-80 hover:opacity-100 transition-opacity items-center",children:[M.map((D,Z)=>h.jsx("button",{onClick:()=>nt(D.cmd),className:"px-2 py-0.5 bg-[#3c3c3c] hover:bg-white/10 rounded text-[10px] whitespace-nowrap border border-white/5 transition-colors",title:D.cmd,children:D.label},Z)),h.jsx("button",{onClick:()=>V(!0),className:"px-2 py-0.5 bg-primary/20 hover:bg-primary/40 text-primary rounded text-[10px] whitespace-nowrap border border-primary/30 font-bold transition-colors",children:" "})]}),h.jsxs("div",{className:"flex gap-2 items-end relative",children:[h.jsx("textarea",{ref:v,value:H,onChange:D=>{const Z=D.target.value;ee(Z),Z.startsWith("/")&&Z.length>=1?E(!0):Z.startsWith("/")||E(!1)},onCompositionStart:()=>{R.current=!0},onCompositionEnd:()=>{R.current=!1},onKeyDown:D=>{(D.key==="Enter"||D.keyCode===13)&&!D.shiftKey&&(D.preventDefault(),H.trim()&&nt(H))},placeholder:"   (:, +:)...",rows:Math.max(1,Math.min(8,H.split(`
`).length)),className:"flex-1 bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-3 py-2 text-xs focus:outline-none focus:border-primary text-white transition-all resize-none custom-scrollbar leading-relaxed h-auto"}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>E(D=>!D),className:`px-2.5 py-2 rounded text-xs font-bold border transition-all ${W?"bg-primary text-white border-primary":"bg-[#3c3c3c] text-[#cccccc] border-white/10 hover:bg-white/10"}`,title:"  ",children:"/"}),W&&h.jsxs("div",{className:"absolute bottom-full right-0 mb-1 w-80 bg-[#252526] border border-white/15 rounded-md shadow-2xl z-50 overflow-hidden",children:[h.jsxs("div",{className:"h-7 bg-[#2d2d2d] border-b border-black/40 flex items-center px-3 gap-1.5",children:[h.jsx("span",{className:"text-primary font-bold text-[11px]",children:"/"}),h.jsx("span",{className:"text-[11px] font-bold text-[#cccccc] uppercase tracking-wider",children:H.startsWith("/")&&H.length>1?`"${H}"  `:`${P.toUpperCase()} `})]}),h.jsx("div",{className:"max-h-72 overflow-y-auto custom-scrollbar py-1",children:(()=>{const D=kv[P]??kv.claude,Z=H.startsWith("/")&&H.length>1?H.toLowerCase():"",X=Z?D.filter(J=>J.cmd.toLowerCase().includes(Z)||J.desc.includes(Z)):null,ne=J=>{if(J.injectSkill){const he=ES.find(re=>re.name===J.injectSkill);if(he){const re=a,mt=l;let me;P==="claude"&&re?me=he.claudeCmd:P==="gemini"&&mt?me=he.geminiCmd:me=he.algo,nt(me)}}else nt(J.cmd);E(!1)};return X?X.length?X.map(J=>h.jsxs("button",{onClick:()=>ne(J),className:"w-full flex items-center gap-2 px-3 py-1.5 hover:bg-primary/20 text-left group transition-colors",children:[h.jsx("span",{className:`font-mono text-[11px] font-bold w-28 shrink-0 transition-colors ${J.injectSkill?"text-yellow-400 group-hover:text-yellow-200":"text-primary group-hover:text-white"}`,children:J.cmd}),h.jsx("span",{className:"text-[#969696] text-[10px] group-hover:text-[#cccccc] transition-colors leading-tight flex-1",children:J.desc}),J.injectSkill&&h.jsx("span",{className:"text-[7px] bg-yellow-500/20 text-yellow-400 px-1 py-0.5 rounded font-bold shrink-0",children:""})]},J.cmd)):h.jsx("p",{className:"text-[10px] text-[#555] text-center py-4",children:"  "}):["","","",""].map(J=>{const he=D.filter(re=>re.category===J);return he.length?h.jsxs("div",{children:[h.jsx("div",{className:`px-3 py-0.5 text-[9px] font-bold uppercase tracking-widest ${J===""?"text-yellow-400/60":"text-white/25"}`,children:J}),he.map(re=>h.jsxs("button",{onClick:()=>ne(re),className:"w-full flex items-center gap-2 px-3 py-1.5 hover:bg-primary/20 text-left group transition-colors",children:[h.jsx("span",{className:`font-mono text-[11px] font-bold w-28 shrink-0 transition-colors ${re.injectSkill?"text-yellow-400 group-hover:text-yellow-200":"text-primary group-hover:text-white"}`,children:re.cmd}),h.jsx("span",{className:"text-[#969696] text-[10px] group-hover:text-[#cccccc] transition-colors leading-tight flex-1",children:re.desc}),re.injectSkill&&h.jsx("span",{className:"text-[7px] bg-yellow-500/20 text-yellow-400 px-1 py-0.5 rounded font-bold shrink-0",children:""})]},re.cmd))]},J):null})})()})]})]}),h.jsx("button",{onClick:()=>nt(H),className:"px-4 py-2 bg-primary/80 hover:bg-primary text-white rounded text-xs font-bold transition-colors shadow-sm",children:""})]})]})]}):h.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden bg-[#1a1a1a]",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-6 z-10 bg-black/20 backdrop-blur-[2px]",children:h.jsxs("div",{className:"flex flex-col md:flex-row gap-6 max-w-4xl w-full",children:[h.jsxs(oa.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,translateY:-5},className:"flex-1 bg-[#252526] border border-white/10 rounded-2xl p-6 shadow-2xl flex flex-col items-center gap-4 transition-all hover:border-success/50 group relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:h.jsx(ur,{className:"w-12 h-12 text-success"})}),h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-success/10 flex items-center justify-center mb-2 group-hover:bg-success/20 transition-colors shadow-inner",children:h.jsx(ur,{className:"w-8 h-8 text-success"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-xl font-black text-white tracking-tighter mb-1",children:"CLAUDE CODE"}),h.jsx("p",{className:"text-[10px] text-success font-bold uppercase tracking-widest opacity-60",children:"High Precision Agent"})]}),h.jsxs("p",{className:"text-xs text-[#969696] text-center leading-relaxed h-12 flex items-center",children:["Anthropic       .",h.jsx("br",{}),"    ."]}),h.jsxs("div",{className:"flex flex-col w-full gap-2 mt-4",children:[h.jsx("button",{onClick:()=>Si("claude",!1),className:"w-full py-2.5 bg-[#3c3c3c] hover:bg-white/10 rounded-xl text-[11px] font-bold transition-all border border-white/5 flex items-center justify-center gap-2 group/btn",children:"Claude  "}),h.jsxs("button",{onClick:()=>Si("claude",!0),className:"w-full py-2.5 bg-primary/20 hover:bg-primary/40 text-primary rounded-xl text-[11px] font-black transition-all border border-primary/30 flex items-center justify-center gap-2 shadow-lg shadow-primary/10",children:[h.jsx(Ui,{className:"w-3.5 h-3.5 fill-current"})," Claude (YOLO)"]})]})]}),h.jsxs(oa.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},whileHover:{scale:1.02,translateY:-5},className:"flex-1 bg-[#252526] border border-white/10 rounded-2xl p-6 shadow-2xl flex flex-col items-center gap-4 transition-all hover:border-accent/50 group relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:h.jsx(Ao,{className:"w-12 h-12 text-accent"})}),h.jsx("div",{className:"w-16 h-16 rounded-2xl bg-accent/10 flex items-center justify-center mb-2 group-hover:bg-accent/20 transition-colors shadow-inner",children:h.jsx(Ao,{className:"w-8 h-8 text-accent"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-xl font-black text-white tracking-tighter mb-1",children:"GEMINI CLI"}),h.jsx("p",{className:"text-[10px] text-accent font-bold uppercase tracking-widest opacity-60",children:"High Speed Reasoning"})]}),h.jsxs("p",{className:"text-xs text-[#969696] text-center leading-relaxed h-12 flex items-center",children:["Google       .",h.jsx("br",{}),"    ."]}),h.jsxs("div",{className:"flex flex-col w-full gap-2 mt-4",children:[h.jsx("button",{onClick:()=>Si("gemini",!1),className:"w-full py-2.5 bg-[#3c3c3c] hover:bg-white/10 rounded-xl text-[11px] font-bold transition-all border border-white/5 flex items-center justify-center gap-2 group/btn",children:"Gemini  "}),h.jsxs("button",{onClick:()=>Si("gemini",!0),className:"w-full py-2.5 bg-primary/20 hover:bg-primary/40 text-primary rounded-xl text-[11px] font-black transition-all border border-primary/30 flex items-center justify-center gap-2 shadow-lg shadow-primary/10",children:[h.jsx(Ui,{className:"w-3.5 h-3.5 fill-current"})," Gemini (YOLO)"]})]})]})]})}),h.jsxs("div",{ref:f,className:"flex-1 p-3 overflow-y-auto font-mono text-[11px] space-y-1.5 custom-scrollbar blur-[4px] opacity-10 pointer-events-none scale-95 origin-center",children:[jr.map((D,Z)=>h.jsxs("div",{className:"flex items-start gap-2 border-l-2 border-primary/30 pl-2 py-0.5 bg-white/2 rounded-r",children:[h.jsxs("span",{className:"text-primary font-bold whitespace-nowrap opacity-80",children:["[",D.agent,"]"]}),h.jsx("span",{className:"flex-1 text-[#cccccc] break-all leading-relaxed whitespace-pre-wrap",children:D.trigger})]},Z)),jr.length===0&&h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-white/10 italic",children:[h.jsx(ur,{className:"w-8 h-8 mb-2 opacity-10"}),"System ready..."]})]})]}),I&&h.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex items-center justify-center p-2",children:h.jsxs("div",{className:"bg-[#252526] border border-black/40 shadow-2xl rounded-md flex flex-col w-full max-w-md max-h-full",children:[h.jsxs("div",{className:"h-8 bg-[#2d2d2d] border-b border-black/40 flex items-center justify-between px-3 shrink-0",children:[h.jsx("span",{className:"text-xs font-bold text-[#cccccc]",children:"  ()"}),h.jsx("button",{onClick:()=>V(!1),className:"p-1 hover:bg-white/10 rounded text-[#cccccc]",children:h.jsx(aa,{className:"w-4 h-4"})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar",children:[M.map((D,Z)=>h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("input",{value:D.label,onChange:X=>{const ne=[...M];ne[Z].label=X.target.value,xs(ne)},placeholder:" ",className:"w-1/3 bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-2 py-1.5 text-xs text-white focus:border-primary focus:outline-none transition-colors"}),h.jsx("input",{value:D.cmd,onChange:X=>{const ne=[...M];ne[Z].cmd=X.target.value,xs(ne)},placeholder:" ",className:"flex-1 bg-[#1e1e1e] border border-white/10 hover:border-white/30 rounded px-2 py-1.5 text-xs text-white font-mono focus:border-primary focus:outline-none transition-colors"}),h.jsx("button",{onClick:()=>{const X=M.filter((ne,J)=>J!==Z);xs(X)},className:"p-1.5 text-red-400 hover:bg-red-400/20 rounded transition-colors",children:h.jsx(dr,{className:"w-4 h-4"})})]},Z)),h.jsx("button",{onClick:()=>xs([...M,{label:" ",cmd:""}]),className:"w-full py-2 mt-2 border border-dashed border-white/20 hover:border-white/40 hover:bg-white/5 rounded text-xs text-[#cccccc] transition-colors",children:"+   "})]}),h.jsxs("div",{className:"p-3 border-t border-black/40 flex justify-end gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>{confirm("   ?")&&xs(xu)},className:"px-3 py-1.5 hover:bg-white/5 text-xs text-[#cccccc] rounded transition-colors",children:" "}),h.jsx("button",{onClick:()=>V(!1),className:"px-4 py-1.5 bg-primary hover:bg-primary/80 text-white rounded text-xs font-bold transition-colors",children:""})]})]})})]})}Fy(document.getElementById("root")).render(h.jsx(S.StrictMode,{children:h.jsx($8,{})}));
