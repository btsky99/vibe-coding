# AI 작업 통합 모니터 (ai-monitor) — 바이브 코딩(Vibe Coding) 대시보드 리뉴얼 기획서

> 버전: v3.0 (모던 웹 UI 개편안) / 작성: 2026-02-21
> 목적: 기존 TUI(텍스트 터미널)의 한계를 벗어나, 다중 AI 에이전트(Claude, Gemini 등) 작업 및 상태를 모던 웹 기술 기반의 시각적으로 수려한 대시보드 환경에서 통합 모니터링한다.

---

## 1. 전면 UI 개편 배경 및 목표
- **기존 한계**: 콘솔 기반 텍스트(Textual) UI의 투박함, 디테일한 디자인 트렌드(글래스모피즘, 부드러운 애니메이션 등) 적용 불가.
- **개편 목표**: Next.js 풀스택 기반으로 시각적 쾌감을 극대화한 **"트렌디 다크모드 대시보드"** 창출.
- **핵심 가치**: 
  - 시선을 사로잡는 아름다운 UI/UX 디자인 (Neon 엑센트, 반투명 효과).
  - 마우스 클릭과 드래그앤드랍이 매우 부드러운 직관적 상호작용.
  - 파이썬 백엔드(Logger 프로세스)와의 안정적이고 즉각적인 데이터(WebSocket/SSE) 실시간 연동.

---

## 2. 신규 프로젝트(웹 뷰어) 네이밍 확정

공식 명칭: **Vibe Coding (바이브 코딩)** — AI와 개발자가 같은 리듬(Vibe)으로 협업하는 시각적 모니터링 환경.

---

## 3. 새로운 시스템 아키텍처 개요

```mermaid
graph TD
    subgraph AI Agents [여러 터미널의 AI 에이전트 작업]
        C1[Claude Code]
        G1[Gemini CLI]
        S1[Other Scripts]
    end

    subgraph Python Backend [기존 로거 시스템 유지]
        PY[logger.py] --> |파일 I/O & IPC| JSONL[(sessions.jsonl)]
    end

    subgraph Next.js Frontend [신규! 모던 웹 대시보드]
        API[Next.js API Routes / SSE]
        UI[React + Tailwind CSS + Framer Motion]
    end

    C1 -->|logger.bat 호출| PY
    G1 -->|logger.bat 호출| PY
    S1 -->|logger.bat 호출| PY

    JSONL -->|실시간 파일 감지 (Tail/Watch)| API
    API -->|서버 전송 이벤트(SSE)| UI
```

---

## 4. UI/UX 디자인 코어 컨셉

- **테마 (Theme)**: `Deep Space Dark` (완전 블랙이 아닌 심도 있는 네이비 다크 톤 배경)
- **엑센트 컬러 (Accent)**: 사이버펑크 틱한 **네온 블루 & 퍼플** 그라데이션 라인.
- **레이아웃 구조**:
  - **헤더**: 글로벌 프로젝트 선택기 (`Select` 드롭다운) 및 현재 시스템 자원(시간, 총 활성 에이전트 수) 상태 컴포넌트.
  - **사이드바**: 축소/확장 가능한 폴더 디렉토리 브라우저 (부드러운 슬라이딩 패널로 구현, 마우스 스내핑 허용).
  - **메인 캔버스**: 
    - 2x2 반응형 격자 뷰 기본, 필요시 1x4, 3x3 동적 전환.
    - 블러(Blur) 처리된 글래스모피즘(Glassmorphism) 터미널 카드형 슬롯 뷰.
- **인터랙션 (Micro-animations)**:
  - 로그가 추가될 때 서서히 나타나며 위로 밀려 올라가는 스크롤 애니메이션 (`Framer Motion` 활용).
  - 상태 아이콘(🔄 ✅ ❌) 회전 및 펄스 글로우(Glow) 이펙트 적용.

---

## 5. 단계별 마이그레이션(구축) 플랜

| 단계 | 주요 작업 (Task) | 설명 |
|------|-----------------|------|
| **Phase 1: 기획 및 Next.js 초기화** | - `npx create-next-app` 세팅 | `D:\clim\.ai_monitor\web-dashboard` 에 최신 스택 구성 (Tailwind, TypeScript 등) |
| **Phase 2: API & 데이터 브릿지** | - 파이썬 로컬 로그(`sessions.jsonl`) 읽기 API 구축 | Next.js API Route 내 파일 Watcher 적용, 클라이언트로 SSE(Server-Sent Events) 스트리밍 파이프 연결. |
| **Phase 3: 디자인 시스템 & 컴포넌트** | - UI 뼈대 및 디자인 토큰 확립 | 다크/글래스모피즘 컴포넌트(Header, Sidebar, Terminal Card) UI 제작. 마우스 드래그 크기 조절 기능 포함. |
| **Phase 4: 상태 관리 및 뷰 바인딩** | - `Zustand` 또는 Context API 상태 도입 | SSE로 넘어오는 실시간 로그 배열을 터미널 ID(`Terminal Slot`) 별로 파싱하여 뿌려주기 로직 결합. |
| **Phase 5: 데스크탑 앱 래핑 (선택)** | - `Electron` 혹은 웹 브라우저 숏컷화 | 현재처럼 크롬 브라우저를 백엔드 없이 앱 화면처럼 띄우거나 `Tauri`로 패키징. |
| **Phase 6: 8-터미널 자율 소통 네트워크 (Multi-Agent Hive)** | - 최대 8분할 뷰 지원 및 에이전트 간 직접 통신망(IPC/메가폰 스킬) 구축 | 터미널 1의 PM(기획자)에게 지시하면, PM이 각 터미널의 에이전트(프론트/백엔드/QA)에게 스스로 업무를 하달하고 결과를 취합하여 인간(사용자)에게 최종 컨펌을 받는 **완전 자율 협업 파이프라인**. |

---

## 6. 결론
파이썬 콘솔 뷰어(`view.py`)의 개발은 여기서 종료(Archive)하고, 앞으로의 모든 역량은 **Next.js 기반 모던 대시보드** 구축에 집중하여 압도적으로 수려하고 아름다운 개발 모니터링 인터페이스를 제공한다.

**2026-02-23 업데이트 내역 (Gemini-1):**
- **프론트엔드 최신 빌드(Build) 갱신 완료**:
  - `ai_monitor_plan.md`에 기획된 Phase 3~4의 대규모 UI 업데이트(다중 윈도우, 동적 아이콘 등)가 실제 실행 환경(`dist`)에 반영되지 않았던 문제를 해결.
  - `.ai_monitor/vibe-view`에서 `npm run build`를 수행하여 최신 정적 자산 생성 및 서버 서빙 경로 정규화.
- **SQLite 마이그레이션 후속 조치**:
  - 기존 JSONL 기반 로깅에서 SQLite(`hive_mind.db`) 기반으로의 전환에 따른 데이터 정합성 확인.

- **상단 메뉴 바 기능 활성화 및 최적화**:
  - 더미로 존재하던 '편집', '보기', 'AI 도구', '도움말' 메뉴에 실제 동작하는 기능 연결.
  - 불필요한 '선택', '이동', '터미널' 메뉴 삭제하여 UI 간소화 (터미널은 이미 메인 뷰에서 독립적으로 닫기 가능하므로 중복 제거).
  - '편집' 메뉴에 **로그 비우기** 기능 추가.
  - '보기' 메뉴에 **사이드바 숨기기/보이기** 및 **터미널 레이아웃 변경** 숏컷 추가.
  - 'AI 도구' 및 '파일(종료)' 기능 등 유지.
- **좀비 프로세스(Zombie Server) 방지 기능 (Graceful Shutdown) 도입 및 최적화**:
  - 사용자가 대시보드 뷰어 창을 "X" 버튼으로 닫았을 때 백그라운드 파이썬 서버(`server.py`)가 자원을 점유하며 계속 살아있는 문제 해결.
  - 프론트엔드 React 앱에서 마운트 즉시, 그리고 이후 2초마다 `/api/heartbeat` API로 생존 신호 전송.
  - 백그라운드 파이썬 서버는 모니터 스레드를 통해 하트비트가 5초 이상 끊기면(창이 닫히면) 스스로 `os._exit(0)`를 호출하여 즉각적으로 자폭(종료)하도록 최적화.
- **UI/UX 디테일 개선**:
  - 좌측 파일 탐색기(Explorer)의 파일 텍스트 색상을 가독성 높은 흰색(`#ffffff`)으로 변경.
  - 파일 아이콘을 기존 빈 네모 칸에서 명확한 문서 아이콘(`FileText`)으로 교체하여 직관성 확보.
  - 터미널 **4분할 레이아웃 옵션을 2가지로 세분화**:
    1. `4||` (4-col): 세로로 긴 터미널 4개를 가로로 나란히 기둥처럼 배치 (와이드 모니터용).
    2. `4::` (2x2): 기존과 동일하게 화면을 십자(+)로 갈라 2줄 2칸으로 배치 (일반 모니터용).
- **터미널 입력 및 단축어 시스템 도입**:
  - 터미널(xterm.js)의 한글 입력 씹힘 문제 해결을 위해 전용 채팅창 형태의 **하단 입력 바(Input Bar)** 추가.
  - 사용자가 자유롭게 커스터마이징 가능한 **단축어 매크로(Quick Actions) 버튼 및 편집 팝업 모달** 기능 구현.
  - 마스터 호출, 화면 지우기(`/clear`), 깃 커밋/푸시 등 실무 필수 명령어를 기본값으로 등록.
- **다중 창(Multi-Window) 기반 코드 퀵 뷰(Quick View) 시스템 개발**:
  - 왼쪽 탐색기에서 파일을 클릭하면, 화면 중앙을 가리는 기존 모달 대신 **우측에 반투명한 플로팅 창(Floating Panel)**이 뜨도록 UI 전면 개편.
  - **다중 윈도우 지원**: 여러 파일을 클릭하면 OS 바탕화면처럼 파일 코드 창이 독립적으로 여러 개 생성됨.
  - **드래그 앤 드롭(Drag & Drop)**: 창의 헤더 바를 잡고 마우스로 자유롭게 위치 이동 가능.
  - **자유로운 창 크기 조절(Resize)**: 우측 하단 모서리를 잡아당겨 뷰어 창의 가로/세로 길이를 유연하게 조절.
  - **상하좌우 스크롤바 완벽 지원**: 긴 텍스트나 넓은 폭의 코드를 볼 때 가로 스크롤(Overflow-x) 및 세로 스크롤이 자동으로 생기도록 CSS 컨테이너 레이아웃 수정.
- **VS Code 스타일 동적 파일 아이콘 (Dynamic File Icons) 적용**:
  - `react-icons` 라이브러리를 활용하여 좌측 탐색기 및 퀵 뷰 헤더에 파일 확장자별 맞춤형 컬러 아이콘 도입.
  - Python(파랑), JS/TS(노랑/파랑), Markdown(하늘색), JSON(빨강), 이미지, 압축파일, 실행파일 등 VS Code의 Material Theme과 동일한 직관적인 시각적 경험 제공.
- **터미널별 활성 파일 뷰어 (Active File Viewer) 시스템 도입**:
  - 터미널(AI 에이전트)별로 현재 수정 중이거나 읽고 있는 파일의 경로를 0.1초 내로 자동 감지하는 정규식 파서 탑재.
  - 터미널 우측 상단 "👀 파일 뷰어" 버튼을 통해 온/오프 가능. 활성화 시 터미널 상단 1/3을 할당하여 코드를 즉각 분할 렌더링.
  - 실시간 파일 동기화(Live Sync)를 위해 3초 단위로 파일 텍스트를 백그라운드 Fetch하여 뷰어에 최신화된 코드 내용 반영.
  - 뷰어의 하단 경계선을 마우스로 드래그하여 상하 크기를 자유롭게 변경할 수 있도록 `resize: vertical` 적용.
- **다중 에이전트 소통망(IPC) 구축 및 하이브 범용성 강화**:
  - `scripts/megaphone.py` 유틸리티 개발: 특정 터미널(예: 1번)에서 다른 터미널(예: 2번)의 프롬프트 창으로 직접 메시지/명령어를 전송(`api/send-command`)하여 AI 간 자율 협업의 기반(Phase 6) 마련.
  - **하이브 스킬 설치 자동화**: `AI 도구` -> `하이브 스킬 설치` 실행 시 `.gemini`, `scripts/` 폴더뿐만 아니라 핵심 지침서인 `GEMINI.md`, `CLAUDE.md`까지 모두 현재 프로젝트로 복사되도록 API 업그레이드. (어떤 프로젝트에서든 즉시 동일한 오케스트레이션 환경 구축 가능)

**2026-02-24 업데이트 내역 (Gemini CLI) - 한글 입력 최적화 및 UX 개선 완료**:
- **한글 IME(한글 입력) 엔터 키 즉시 전송 로직 최종 개선**: 
  - 메시지 채널(Chat) 및 터미널 입력창에서 한글 조합 중 엔터 키를 눌렀을 때 메시지가 즉시 전송되지 않던 문제 해결.
  - `!isComposing` 차단 로직을 제거하고 `keyCode 13` 핸들링을 강화하여, 한글 조합 중에도 엔터 한 번으로 즉시 전송되도록 최적화.
  - 터미널창에 불필요한 줄바꿈이 생기던 현상을 방지하기 위해 `e.preventDefault()` 및 문자열 `trim()` 처리 로직 보강.
- **프론트엔드(vibe-view) 재빌드 및 배포**: 최신 수정 사항을 반영하여 `npm run build` 수행 및 배포용 실행 파일과의 연동 확인.
- **실행 파일 실행 불가(SyntaxError) 해결**:
  - `server.py` 내의 전역 스코프에서 잘못 사용된 `global main_window` 선언을 제거하여 파이썬 문법 오류(`SyntaxError`) 해결.
  - GUI 초기화 실패 시 폴백을 위한 `open_app_window` 함수 누락 버그 수정 (기본 브라우저 연결 로직 추가).
- **최신 UI 반영 및 배포 자동화 검증**:
     - 최신 프론트엔드인 `vibe-view`를 성공적으로 빌드하여 반영.  - `vibe-coding.exe` (GUI) 및 `vibe-coding_console.exe` (Console) 실행 파일을 `PyInstaller`를 통해 최신 소스로 재빌드 및 루트 `dist` 폴더 배포 완료.
- **코드 정리**:
  - 중복된 `if __name__ == '__main__':` 블록을 하나로 통합하고 자동 업데이트 로직을 정규화함.
`n**2026-02-24 ������Ʈ ���� (Gemini CLI) - �ѱ� �Է� ����ȭ �� UX ����**:`n- **�ѱ� ���� Ű ���� ���� ���� �ذ�**: �͹̳� �Է� �� �� �޽��� ä�ο��� �ѱ� ����(`isComposing`) �� ���� Ű �Է��� �����ϴ� ������ �����Ͽ�, �ѱ� ����ڰ� ����ϴ� �ﰢ���� ���� ȯ�� ����.`n- **�Է� ���ڿ� ����ȭ**: ������ ȯ����� ȣȯ���� �ش�ȭ�ϱ� ���� ���� ���ڿ� ���� `\r\n` (CRLF)�� �����ϵ��� `vibe-view` �� `nexus-view` ���� ����.`n- **�޽��� ä�� UX ����**: ���̵�� �޽��� �Է�â�� ���� ����Ű�� `Ctrl+Enter`���� �Ϲ� `Enter`�� �����Ͽ� �͹̳� �Է� �ٿ� ������ ��� ���� ����.
`r`n**2026-02-25 업데이트 내역 (Gemini CLI) - MCP 서버 연결 장애 복구**:`r`n- **MCP 'fetch' 및 'sqlite' 서버 연결 오류 해결**: 기존 npx 기반의 잘못된 패키지 경로로 인한 연결 끊김 문제 해결. 프로젝트 로컬 .gemini/settings.json을 생성하여 공식 Python 기반 서버인 uvx mcp-server-fetch 및 uvx mcp-server-sqlite로 설정을 갱신. SQLite 서버의 경우 현재 프로젝트의 hive_mind.db 경로를 기본값으로 할당하여 즉각적인 데이터 조회가 가능하도록 조치. 모든 MCP 서버 상태가 Connected임을 확인 완료.
