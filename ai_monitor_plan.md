# AI 작업 통합 모니터 (ai-monitor) — 웹 대시보드 전면 리뉴얼 기획서

> 버전: v3.0 (모던 웹 UI 개편안) / 작성: 2026-02-21
> 목적: 기존 TUI(텍스트 터미널)의 한계를 벗어나, 다중 AI 에이전트(Claude, Gemini 등) 작업 및 상태를 모던 웹 기술 기반의 시각적으로 수려한 대시보드 환경에서 통합 모니터링한다.

---

## 1. 전면 UI 개편 배경 및 목표
- **기존 한계**: 콘솔 기반 텍스트(Textual) UI의 투박함, 디테일한 디자인 트렌드(글래스모피즘, 부드러운 애니메이션 등) 적용 불가.
- **개편 목표**: Next.js 풀스택 기반으로 시각적 쾌감을 극대화한 **"트렌디 다크모드 대시보드"** 창출.
- **핵심 가치**: 
  - 시선을 사로잡는 아름다운 UI/UX 디자인 (Neon 엑센트, 반투명 효과).
  - 마우스 클릭과 드래그앤드랍이 매우 부드러운 직관적 상호작용.
  - 파이썬 백엔드(Logger 프로세스)와의 안정적이고 즉각적인 데이터(WebSocket/SSE) 실시간 연동.

---

## 2. 신규 프로젝트(웹 뷰어) 네이밍 제안

새롭고 엣지있는 UI에 걸맞은 모니터링 대시보드 이름 후보군:
1. **Nexus View (넥서스 뷰)**: 여러 AI들의 작업 지점(Terminal)들이 하나로 뭉쳐 연결되는 모니터 중심점이라는 의미.
2. **Omni Dash (옴니 대시)**: 모든 것(Omni)을 한눈에 통찰하는 전지적 시점의 대시보드.
3. **Aegis Monitor (이지스 모니터)**: 시스템을 안전하게 감시하고 보호하는 방패 같은 뷰어.
4. **Prism UI (프리즘 UI)**: 파편화된 로그 빛구슬들을 하나의 아름다운 스펙트럼 화면으로 투영해 보여주는 앱.

---

## 3. 새로운 시스템 아키텍처 개요

```mermaid
graph TD
    subgraph AI Agents [여러 터미널의 AI 에이전트 작업]
        C1[Claude Code]
        G1[Gemini CLI]
        S1[Other Scripts]
    end

    subgraph Python Backend [기존 로거 시스템 유지]
        PY[logger.py] --> |파일 I/O & IPC| JSONL[(sessions.jsonl)]
    end

    subgraph Next.js Frontend [신규! 모던 웹 대시보드]
        API[Next.js API Routes / SSE]
        UI[React + Tailwind CSS + Framer Motion]
    end

    C1 -->|logger.bat 호출| PY
    G1 -->|logger.bat 호출| PY
    S1 -->|logger.bat 호출| PY

    JSONL -->|실시간 파일 감지 (Tail/Watch)| API
    API -->|서버 전송 이벤트(SSE)| UI
```

---

## 4. UI/UX 디자인 코어 컨셉

- **테마 (Theme)**: `Deep Space Dark` (완전 블랙이 아닌 심도 있는 네이비 다크 톤 배경)
- **엑센트 컬러 (Accent)**: 사이버펑크 틱한 **네온 블루 & 퍼플** 그라데이션 라인.
- **레이아웃 구조**:
  - **헤더**: 글로벌 프로젝트 선택기 (`Select` 드롭다운) 및 현재 시스템 자원(시간, 총 활성 에이전트 수) 상태 컴포넌트.
  - **사이드바**: 축소/확장 가능한 폴더 디렉토리 브라우저 (부드러운 슬라이딩 패널로 구현, 마우스 스내핑 허용).
  - **메인 캔버스**: 
    - 2x2 반응형 격자 뷰 기본, 필요시 1x4, 3x3 동적 전환.
    - 블러(Blur) 처리된 글래스모피즘(Glassmorphism) 터미널 카드형 슬롯 뷰.
- **인터랙션 (Micro-animations)**:
  - 로그가 추가될 때 서서히 나타나며 위로 밀려 올라가는 스크롤 애니메이션 (`Framer Motion` 활용).
  - 상태 아이콘(🔄 ✅ ❌) 회전 및 펄스 글로우(Glow) 이펙트 적용.

---

## 5. 단계별 마이그레이션(구축) 플랜

| 단계 | 주요 작업 (Task) | 설명 |
|------|-----------------|------|
| **Phase 1: 기획 및 Next.js 초기화** | - `npx create-next-app` 세팅 | `D:\clim\.ai_monitor\web-dashboard` 에 최신 스택 구성 (Tailwind, TypeScript 등) |
| **Phase 2: API & 데이터 브릿지** | - 파이썬 로컬 로그(`sessions.jsonl`) 읽기 API 구축 | Next.js API Route 내 파일 Watcher 적용, 클라이언트로 SSE(Server-Sent Events) 스트리밍 파이프 연결. |
| **Phase 3: 디자인 시스템 & 컴포넌트** | - UI 뼈대 및 디자인 토큰 확립 | 다크/글래스모피즘 컴포넌트(Header, Sidebar, Terminal Card) UI 제작. 마우스 드래그 크기 조절 기능 포함. |
| **Phase 4: 상태 관리 및 뷰 바인딩** | - `Zustand` 또는 Context API 상태 도입 | SSE로 넘어오는 실시간 로그 배열을 터미널 ID(`Terminal Slot`) 별로 파싱하여 뿌려주기 로직 결합. |
| **Phase 5: 데스크탑 앱 래핑 (선택)** | - `Electron` 혹은 웹 브라우저 숏컷화 | 현재처럼 크롬 브라우저를 백엔드 없이 앱 화면처럼 띄우거나 `Tauri`로 패키징. |

---

## 6. 결론
파이썬 콘솔 뷰어(`view.py`)의 개발은 여기서 종료(Archive)하고, 앞으로의 모든 역량은 **Next.js 기반 모던 대시보드** 구축에 집중하여 압도적으로 수려하고 아름다운 개발 모니터링 인터페이스를 제공한다.

---

## 7. 최근 업데이트 내역 (Changelog)

**2026-02-22 업데이트 내역:**
- **상단 메뉴 바 기능 활성화 및 최적화**:
  - 더미로 존재하던 '편집', '보기', 'AI 도구', '도움말' 메뉴에 실제 동작하는 기능 연결.
  - 불필요한 '선택', '이동', '터미널' 메뉴 삭제하여 UI 간소화 (터미널은 이미 메인 뷰에서 독립적으로 닫기 가능하므로 중복 제거).
  - '편집' 메뉴에 **로그 비우기** 기능 추가.
  - '보기' 메뉴에 **사이드바 숨기기/보이기** 및 **터미널 레이아웃 변경** 숏컷 추가.
  - 'AI 도구' 및 '파일(종료)' 기능 등 유지.
- **좀비 프로세스(Zombie Server) 방지 기능 (Graceful Shutdown) 도입**:
  - 사용자가 대시보드 뷰어 창을 "X" 버튼으로 닫았을 때 백그라운드 파이썬 서버(`server.py`)가 자원을 점유하며 계속 살아있는 문제 해결.
  - 프론트엔드 React 앱에서 5초마다 `/api/heartbeat` API로 생존 신호 전송.
  - 백그라운드 파이썬 서버는 모니터 스레드를 통해 하트비트가 15초 이상 끊기면(창이 닫히면) 스스로 `os._exit(0)`를 호출하여 깨끗하게 자폭(종료)하도록 개선.
- **UI/UX 디테일 개선**:
  - 좌측 파일 탐색기(Explorer)의 파일 텍스트 색상을 가독성 높은 흰색(`#ffffff`)으로 변경.
  - 파일 아이콘을 기존 빈 네모 칸에서 명확한 문서 아이콘(`FileText`)으로 교체하여 직관성 확보.
  - 터미널 **4분할 레이아웃 옵션을 2가지로 세분화**:
    1. `4||` (4-col): 세로로 긴 터미널 4개를 가로로 나란히 기둥처럼 배치 (와이드 모니터용).
    2. `4::` (2x2): 기존과 동일하게 화면을 십자(+)로 갈라 2줄 2칸으로 배치 (일반 모니터용).
- **터미널 입력 및 단축어 시스템 도입**:
  - 터미널(xterm.js)의 한글 입력 씹힘 문제 해결을 위해 전용 채팅창 형태의 **하단 입력 바(Input Bar)** 추가.
  - 사용자가 자유롭게 커스터마이징 가능한 **단축어 매크로(Quick Actions) 버튼 및 편집 팝업 모달** 기능 구현.
  - 마스터 호출, 화면 지우기(`/clear`), 깃 커밋/푸시 등 실무 필수 명령어를 기본값으로 등록.
- **다중 창(Multi-Window) 기반 코드 퀵 뷰(Quick View) 시스템 개발**:
  - 왼쪽 탐색기에서 파일을 클릭하면, 화면 중앙을 가리는 기존 모달 대신 **우측에 반투명한 플로팅 창(Floating Panel)**이 뜨도록 UI 전면 개편.
  - **다중 윈도우 지원**: 여러 파일을 클릭하면 OS 바탕화면처럼 파일 코드 창이 독립적으로 여러 개 생성됨.
  - **드래그 앤 드롭(Drag & Drop)**: 창의 헤더 바를 잡고 마우스로 자유롭게 위치 이동 가능.
  - **자유로운 창 크기 조절(Resize)**: 우측 하단 모서리를 잡아당겨 뷰어 창의 가로/세로 길이를 유연하게 조절.
  - **상하좌우 스크롤바 완벽 지원**: 긴 텍스트나 넓은 폭의 코드를 볼 때 가로 스크롤(Overflow-x) 및 세로 스크롤이 자동으로 생기도록 CSS 컨테이너 레이아웃 수정.
- **VS Code 스타일 동적 파일 아이콘 (Dynamic File Icons) 적용**:
  - `react-icons` 라이브러리를 활용하여 좌측 탐색기 및 퀵 뷰 헤더에 파일 확장자별 맞춤형 컬러 아이콘 도입.
  - Python(파랑), JS/TS(노랑/파랑), Markdown(하늘색), JSON(빨강), 이미지, 압축파일, 실행파일 등 VS Code의 Material Theme과 동일한 직관적인 시각적 경험 제공.
